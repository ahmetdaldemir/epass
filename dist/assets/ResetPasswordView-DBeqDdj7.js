import{r as e,o as a,_ as s,c as l,a as r,g as t,b as o,k as u,V as n,t as d,n as i,W as p,h as v}from"./vendor-D8r79KCq.js";import{_ as c}from"./index-dZArVhS9.js";import"./swiper-WOzPqNul.js";const m={class:"reset-password-container"},w={class:"reset-password-box"},y={class:"form-group"},f={class:"form-group"},h={class:"form-group"},b=["disabled"],g={class:"back-to-login"},P=c({__name:"ResetPasswordView",setup(c){const P=s(),k=p(),q=e(""),_=e(""),j=e(""),R=e(!1),V=e(""),C=e(!1);async function E(){try{if(R.value=!0,V.value="",C.value=!1,_.value.length<6)return V.value="Password must be at least 6 characters.",void(C.value=!1);if(_.value!==j.value)return V.value="Passwords do not match.",void(C.value=!1);const e=await fetch("https://searchyourtour.com/api/customer/password/reset",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({email:q.value,password:_.value,password_confirmation:j.value,token:P.query.token})}),a=await e.json();a.status?(C.value=!0,V.value=a.message||"Password reset successfully!",q.value="",_.value="",j.value="",setTimeout(()=>{k.push("/my-pass")},3e3)):(C.value=!1,V.value=a.message||"Failed to reset password")}catch(e){C.value=!1,V.value="An error occurred. Please try again."}finally{R.value=!1}}return a(()=>{P.query.token||(V.value="Invalid reset link. Please request a new password reset.",C.value=!1)}),(e,a)=>(v(),l("div",m,[r("div",w,[a[8]||(a[8]=r("div",{class:"header"},[r("h2",null,"Reset Password"),r("p",null,"Enter your new password below")],-1)),r("form",{onSubmit:t(E,["prevent"]),class:"reset-form"},[r("div",y,[a[4]||(a[4]=r("label",null,"Email Address",-1)),u(r("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>q.value=e),type:"email",placeholder:"Enter your email",required:""},null,512),[[n,q.value]])]),r("div",f,[a[5]||(a[5]=r("label",null,"New Password",-1)),u(r("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>_.value=e),type:"password",placeholder:"Enter new password",required:""},null,512),[[n,_.value]]),a[6]||(a[6]=r("small",{class:"field-note"},"Password must be at least 6 characters",-1))]),r("div",h,[a[7]||(a[7]=r("label",null,"Confirm New Password",-1)),u(r("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>j.value=e),type:"password",placeholder:"Confirm new password",required:""},null,512),[[n,j.value]])]),r("button",{class:"btn btn-primary",type:"submit",disabled:R.value},d(R.value?"Resetting...":"Reset Password"),9,b),V.value?(v(),l("div",{key:0,class:i(["message",C.value?"success":"error"])},d(V.value),3)):o("",!0)],32),r("div",g,[r("a",{href:"#",onClick:a[3]||(a[3]=t(a=>e.$router.push("/my-pass"),["prevent"]))},"Back to Login")])])]))}},[["__scopeId","data-v-4c53d391"]]);export{P as default};
