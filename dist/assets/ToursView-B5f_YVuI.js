import{_ as E,r as i,c as b,g as B,h as U,a as r,l as P,b as s,d as j,w as D,m as T,F as w,e as x,t as u,i as q,o as l,f,j as G,k as O}from"./index-CfH28EX-.js";const W={class:"tours"},z={class:"tours-section"},J={class:"container"},K={class:"tours-header"},Q={class:"filters"},R=["value"],X={key:0,class:"loading-state"},Y={key:1,class:"error-state"},Z={key:2,class:"tours-grid"},tt={class:"tour-image"},et=["src","alt"],st={class:"tour-overlay"},ot=["onClick"],nt={class:"tour-content"},at={class:"tour-meta"},rt={class:"destination"},lt={class:"duration"},it={class:"tour-footer"},ut={class:"tour-price"},ct={key:3,class:"no-results"},dt={__name:"ToursView",setup(vt,{expose:$}){const c=i(""),d=i(""),m=i([]),g=i(!1),v=i(null),p=i("en"),C=i(5),_=async()=>{g.value=!0,v.value=null;try{const e=`https://searchyourtour.com/api/tours?token=ad5257a5-efdd-4314-9e5e-b56aabe321f1&language_id=${N(p.value)}&currency_id=${C.value}&limit=100&IpAdrress=78.177.166.135`,t=await fetch(e);if(!t.ok)throw new Error("Failed to fetch tours");const n=await t.json();m.value=n||[]}catch(e){v.value="Failed to load tours. Please try again later.",console.error("Error fetching tours:",e)}finally{g.value=!1}},N=e=>({en:1,tr:2,de:6,ru:9})[e]||1,h=e=>{var t,n;return((n=(t=e.content)==null?void 0:t[0])==null?void 0:n.name)||"Unnamed Tour"},V=e=>{var a,k;const t=(k=(a=e.content)==null?void 0:a[0])==null?void 0:k.meta_content;if(!t)return"No description available";const n=document.createElement("div");n.innerHTML=t;const o=n.textContent||n.innerText||"";return o.length>150?o.substring(0,150)+"...":o},I=e=>{var t,n;return((n=(t=e.files)==null?void 0:t[0])==null?void 0:n.url)||"https://via.placeholder.com/400x250?text=No+Image"},L=e=>{var t;return((t=e.destination)==null?void 0:t.name)||"Unknown Destination"},M=e=>{var o;const t=(o=e.tour_price)==null?void 0:o[0];return t?`${t.currency_icon||"$"}${t.price}`:"Price on request"},A=e=>{const t=e.tour_duraction,n=e.tour_duraction_type||"hour";return t?n==="hour"?`${t} ${t===1?"Hour":"Hours"}`:n==="day"?`${t} ${t===1?"Day":"Days"}`:`${t} ${n}s`:"Duration not specified"},F=b(()=>{const e=m.value.map(t=>{var n;return(n=t.destination)==null?void 0:n.name}).filter(Boolean);return[...new Set(e)]}),y=b(()=>m.value.filter(e=>{var o;const t=!c.value||((o=e.destination)==null?void 0:o.name)===c.value,n=!d.value||(()=>{const a=e.tour_duraction;switch(d.value){case"1-3":return a>=1&&a<=3;case"4-6":return a>=4&&a<=6;case"7+":return a>=7;default:return!0}})();return t&&n})),H=e=>{console.log("Adding tour to wishlist:",e)},S=()=>{c.value="",d.value=""};return $({updateLanguage:e=>{p.value=e,_()}}),B(()=>{const e=localStorage.getItem("selectedLanguage")||"en";p.value=e,_()}),U(()=>localStorage.getItem("selectedLanguage"),e=>{e&&e!==p.value&&(p.value=e,_())}),(e,t)=>{const n=q("router-link");return l(),r("div",W,[t[11]||(t[11]=P('<section class="hero-section" data-v-c7acca90><div class="container" data-v-c7acca90><div class="hero-content" data-v-c7acca90><h1 class="hero-title" data-v-c7acca90>Discover Istanbul with Our Guided Tours</h1><p class="hero-subtitle" data-v-c7acca90>Explore the city&#39;s rich history and culture with our expert guides</p></div></div></section>',1)),s("section",z,[s("div",J,[s("div",K,[t[4]||(t[4]=s("h2",null,"Available Tours",-1)),s("div",Q,[D(s("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>c.value=o),class:"filter-select"},[t[2]||(t[2]=s("option",{value:""},"All Destinations",-1)),(l(!0),r(w,null,x(F.value,o=>(l(),r("option",{key:o,value:o},u(o),9,R))),128))],512),[[T,c.value]]),D(s("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>d.value=o),class:"filter-select"},t[3]||(t[3]=[s("option",{value:""},"All Durations",-1),s("option",{value:"1-3"},"1-3 Hours",-1),s("option",{value:"4-6"},"4-6 Hours",-1),s("option",{value:"7+"},"7+ Hours",-1)]),512),[[T,d.value]])])]),g.value?(l(),r("div",X,t[5]||(t[5]=[s("div",{class:"loading-spinner"},null,-1),s("p",null,"Loading tours...",-1)]))):v.value?(l(),r("div",Y,[s("p",null,u(v.value),1),s("button",{onClick:_,class:"btn btn-primary"},"Try Again")])):(l(),r("div",Z,[(l(!0),r(w,null,x(y.value,o=>(l(),r("div",{class:"tour-card",key:o.id},[s("div",tt,[s("img",{src:I(o),alt:h(o)},null,8,et),s("div",st,[s("button",{onClick:a=>H(o.id),class:"wishlist-btn"},t[6]||(t[6]=[s("i",{class:"fas fa-heart"},null,-1)]),8,ot)])]),s("div",nt,[s("h3",null,u(h(o)),1),s("p",null,u(V(o)),1),s("div",at,[s("span",rt,[t[7]||(t[7]=s("i",{class:"fas fa-map-marker-alt"},null,-1)),f(" "+u(L(o)),1)]),s("span",lt,[t[8]||(t[8]=s("i",{class:"fas fa-clock"},null,-1)),f(" "+u(A(o)),1)])]),s("div",it,[s("div",ut,u(M(o)),1),G(n,{to:`/tour/${o.id}`,class:"btn btn-primary"},{default:O(()=>t[9]||(t[9]=[f("View Details")])),_:2,__:[9]},1032,["to"])])])]))),128))])),!g.value&&!v.value&&y.value.length===0?(l(),r("div",ct,[t[10]||(t[10]=s("p",null,"No tours found matching your criteria.",-1)),s("button",{onClick:S,class:"btn btn-primary"},"Clear Filters")])):j("",!0)])])])}}},_t=E(dt,[["__scopeId","data-v-c7acca90"]]);export{_t as default};
