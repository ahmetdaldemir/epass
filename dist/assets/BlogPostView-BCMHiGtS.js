import{r as e,o as a,a1 as t,P as l,k as o,m as s,l as n,x as r,u as i,j as c,n as u,p as g,F as d,L as b,Z as p,t as v,v as m}from"./vendor-C-dIp69U.js";import{_ as h,u as f}from"./index-ClOcJ79_.js";/* empty css                                                                   */import"./swiper-WOzPqNul.js";const k={class:"blog-post-container"},_={key:0,class:"loading-state"},w={key:1,class:"error-state"},y={key:2,class:"blog-post"},B={class:"blog-post-breadcrumb-wrapper"},j={class:"breadcrumb","aria-label":"Breadcrumb"},$={class:"breadcrumb-list"},x={class:"breadcrumb-item"},L={class:"breadcrumb-item"},C={class:"breadcrumb-item breadcrumb-item--active"},z={class:"breadcrumb-current"},T={class:"post-header"},E={class:"post-meta"},P={key:0,class:"post-category"},S={class:"post-date"},F={key:1,class:"post-author"},H={class:"post-title"},I={key:0,class:"post-tags"},D={key:0,class:"post-featured-image"},M=["src","alt"],U=["innerHTML"],V={class:"post-footer"},Z={class:"post-actions"},q="https://backend.searchyourtour.com/api",A=h({__name:"BlogPostView",setup(h){const A=t(),G=p(),{t:J}=f(),K=e(null),N=e(!0),O=e(null),Q=async e=>{try{N.value=!0,O.value=null;const t=localStorage.getItem("selectedLanguage")||"en",l=ae(t);let o,s;try{if(o=await fetch(`${q}/blog/${e}?token=ad5257a5-efdd-4314-9e5e-b56aabe321f1&language_id=${l}`),!o.ok)throw new Error("Slug endpoint not available");s=await o.json()}catch(a){if(o=await fetch(`${q}/blogs?token=ad5257a5-efdd-4314-9e5e-b56aabe321f1&language_id=${l}`),!o.ok)throw new Error("Failed to load blog posts");const t=await o.json();s=t.find(a=>R(a)===e)||null}K.value=s||null,s||(O.value="Blog post not found")}catch(t){O.value=t.message}finally{N.value=!1}},R=e=>{if(e.blog_content&&e.blog_content.length>0&&e.blog_content[0].slug)return e.blog_content[0].slug;if(e.blog_content&&e.blog_content.length>0&&e.blog_content[0].title){return e.blog_content[0].title.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim()}return e.id},W=e=>e?e.blog_content&&e.blog_content.length>0&&e.blog_content[0].title||`Blog Post ${e.id}`:"Blog Post",X=e=>{if(e.image&&e.image.length>0){return`https://res.cloudinary.com/dpen2pshi/image/upload/v1737105822/${e.image[0]}.webp`}return e.images&&"string"==typeof e.images?e.images:e.files&&e.files.length>0?e.files[0].url||e.files[0]:"/placeholder-blog.jpg"},Y=e=>e?e.blog_content&&e.blog_content.length>0?e.blog_content[0].description||"Blog içeriği henüz eklenmemiş.":"Blog içeriği henüz eklenmemiş. Lütfen daha sonra tekrar kontrol edin.":"Blog içeriği yükleniyor...",ee=e=>{if(!e)return"";return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})},ae=e=>({tr:2,de:6,en:1,ar:3,es:4,fr:5,it:7,pt:8,zh:10,ja:11,ru:9}[e]||1),te=()=>{K.value&&(navigator.share?navigator.share({title:W(K.value),text:Y(K.value).replace(/<[^>]*>/g,"").substring(0,100),url:window.location.href}):(navigator.clipboard.writeText(window.location.href),alert(J("blog.post.linkCopied"))))},le=()=>{G.push("/blog")},oe=async e=>{var a;if(e.detail&&e.detail.language){const l=e.detail.language,o=ae(l),s=null==(a=K.value)?void 0:a.id,n=A.params.slug;if(s)try{const e=await fetch(`${q}/blogs?token=ad5257a5-efdd-4314-9e5e-b56aabe321f1&language_id=${o}`);if(e.ok){const a=(await e.json()).find(e=>e.id===s);if(a){const e=R(a);return K.value=a,void(e&&e!==n&&G.replace(`/blog/${e}`))}}}catch(t){}const r=A.params.slug;r&&Q(r)}};return a(()=>{const e=A.params.slug;e?Q(e):(O.value="Invalid article",N.value=!1),window.addEventListener("language-changed",oe)}),l(()=>{window.removeEventListener("language-changed",oe)}),(e,a)=>{const t=g("router-link");return v(),o("div",k,[N.value?(v(),o("div",_,[a[1]||(a[1]=n("div",{class:"loading-spinner"},null,-1)),n("p",null,r(i(J)("blog.post.loading")),1)])):O.value?(v(),o("div",w,[a[2]||(a[2]=n("div",{class:"error-icon"},"❌",-1)),n("h3",null,r(i(J)("blog.post.notFound")),1),n("p",null,r(O.value),1),n("button",{onClick:a[0]||(a[0]=a=>e.$router.push("/blog")),class:"back-btn"},r(i(J)("blog.post.backToBlog")),1)])):K.value&&!O.value?(v(),o("article",y,[n("div",B,[n("nav",j,[n("ol",$,[n("li",x,[c(t,{to:"/",class:"breadcrumb-link"},{default:u(()=>[a[3]||(a[3]=n("svg",{class:"breadcrumb-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[n("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),n("polyline",{points:"9,22 9,12 15,12 15,22"})],-1)),m(" "+r(i(J)("nav.home")),1)]),_:1,__:[3]}),a[4]||(a[4]=n("svg",{class:"breadcrumb-separator",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[n("polyline",{points:"9,18 15,12 9,6"})],-1))]),n("li",L,[c(t,{to:"/blog",class:"breadcrumb-link"},{default:u(()=>[m(r(i(J)("nav.blog")),1)]),_:1}),a[5]||(a[5]=n("svg",{class:"breadcrumb-separator",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[n("polyline",{points:"9,18 15,12 9,6"})],-1))]),n("li",C,[n("span",z,r(W(K.value)),1)])])])]),n("header",T,[n("div",E,[K.value.category_name&&"Bulunamadı"!==K.value.category_name?(v(),o("span",P,r(K.value.category_name),1)):s("",!0),n("span",S,r(ee(K.value.created_at)),1),K.value.author?(v(),o("span",F,r(K.value.author),1)):s("",!0)]),n("h1",H,r(W(K.value)),1),K.value.category&&K.value.category.length?(v(),o("div",I,[(v(!0),o(d,null,b(K.value.category,e=>(v(),o("span",{key:e,class:"post-tag"},r(e),1))),128))])):s("",!0)]),"/placeholder-blog.jpg"!==X(K.value)?(v(),o("div",D,[n("img",{src:X(K.value),alt:W(K.value),loading:"lazy"},null,8,M)])):s("",!0),n("div",{class:"post-content",innerHTML:Y(K.value)},null,8,U),n("footer",V,[n("div",Z,[n("button",{onClick:te,class:"share-btn"},r(i(J)("blog.post.share")),1),n("button",{onClick:le,class:"back-btn"},r(i(J)("blog.post.backToBlog")),1)])])])):s("",!0)])}}},[["__scopeId","data-v-be3823b7"]]);export{A as default};
