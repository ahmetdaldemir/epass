import{_ as I,r as d,d as C,w as D,c as r,a as n,e as L,t as g,F as N,b as V,f as E,o as i,g as f,h as T,i as F}from"./index-D7T6RlOk.js";const M={class:"attractions"},B={class:"attractions-list"},H={class:"container"},P={key:0,class:"loading-state"},S={key:1,class:"error-state"},j={key:2,class:"attractions-grid"},R={class:"attraction-image"},U=["src","alt"],W={class:"attraction-content"},q={class:"attraction-meta"},z={class:"price"},G={class:"duration"},J={class:"attraction-actions"},K=["onClick"],O={key:3,class:"no-results"},Q={__name:"AttractionsView",setup(X,{expose:h}){const v=d([]),_=d(!1),c=d(null),l=d("en"),y=d(5),p=async()=>{_.value=!0,c.value=null;try{const e=`https://searchyourtour.com/api/tours?token=ad5257a5-efdd-4314-9e5e-b56aabe321f1&language_id=${b(l.value)}&currency_id=${y.value}&limit=200&IpAdrress=78.177.166.135`,t=await fetch(e);if(!t.ok)throw new Error("Failed to fetch attractions");const s=(await t.json()||[]).filter(o=>{var u;return((u=o.destination)==null?void 0:u.id)===404&&o.is_active===!0&&o.content&&o.content.length>0});v.value=s}catch(e){c.value="Failed to load attractions. Please try again later.",console.error("Error fetching attractions:",e)}finally{_.value=!1}},b=e=>({en:1,tr:2,de:6,ru:9})[e]||1,m=e=>{var t,a;return((a=(t=e.content)==null?void 0:t[0])==null?void 0:a.name)||"Unnamed Attraction"},k=e=>{var o,u;const t=(u=(o=e.content)==null?void 0:o[0])==null?void 0:u.meta_content;if(!t)return"No description available";const a=document.createElement("div");a.innerHTML=t;const s=a.textContent||a.innerText||"";return s.length>120?s.substring(0,120)+"...":s},A=e=>{var t,a;return((a=(t=e.files)==null?void 0:t[0])==null?void 0:a.url)||"https://via.placeholder.com/300x200?text=Istanbul+Attraction"},$=e=>{var s;const t=(s=e.tour_price)==null?void 0:s[0];return t?`${t.currency_icon||"$"}${t.price}`:"FREE with Pass"},x=e=>{const t=e.tour_duraction,a=e.tour_duraction_type||"hour";return t?a==="hour"?`${t} ${t===1?"Hour":"Hours"}`:a==="day"?`${t} ${t===1?"Day":"Days"}`:`${t} ${a}s`:"Duration not specified"},w=e=>{console.log("Adding attraction to wishlist:",e)};return h({updateLanguage:e=>{l.value=e,p()}}),C(()=>{const e=localStorage.getItem("selectedLanguage")||"en";l.value=e,p()}),D(()=>localStorage.getItem("selectedLanguage"),e=>{e&&e!==l.value&&(l.value=e,p())}),(e,t)=>{const a=E("router-link");return i(),r("div",M,[t[5]||(t[5]=n("section",{class:"hero-section"},[n("div",{class:"container"},[n("h1",null,"Istanbul Attractions"),n("p",null,"Discover the most popular attractions and tours included in your pass")])],-1)),n("section",B,[n("div",H,[_.value?(i(),r("div",P,t[0]||(t[0]=[n("div",{class:"loading-spinner"},null,-1),n("p",null,"Loading Istanbul attractions...",-1)]))):c.value?(i(),r("div",S,[n("p",null,g(c.value),1),n("button",{onClick:p,class:"btn btn-primary"},"Try Again")])):(i(),r("div",j,[(i(!0),r(N,null,V(v.value,s=>(i(),r("div",{class:"attraction-card",key:s.id},[n("div",R,[n("img",{src:A(s),alt:m(s)},null,8,U)]),n("div",W,[n("h3",null,g(m(s)),1),n("p",null,g(k(s)),1),n("div",q,[n("span",z,g($(s)),1),n("span",G,[t[1]||(t[1]=n("i",{class:"fas fa-clock"},null,-1)),f(" "+g(x(s)),1)])]),n("div",J,[T(a,{to:`/tour/${s.id}`,class:"btn btn-primary"},{default:F(()=>t[2]||(t[2]=[f("View Details")])),_:2,__:[2]},1032,["to"]),n("button",{onClick:o=>w(s.id),class:"btn btn-secondary"},t[3]||(t[3]=[n("i",{class:"fas fa-heart"},null,-1)]),8,K)])])]))),128))])),!_.value&&!c.value&&v.value.length===0?(i(),r("div",O,t[4]||(t[4]=[n("p",null,"No Istanbul attractions found at the moment.",-1)]))):L("",!0)])])])}}},tt=I(Q,[["__scopeId","data-v-ba8593c6"]]);export{tt as default};
