import{r as e,c as a,o as t,P as l,k as s,l as n,m as o,x as i,u as c,j as g,F as r,L as u,Z as d,t as p,J as b}from"./vendor-C-dIp69U.js";import{_ as v,u as m}from"./index-Dmf9SOn9.js";import{B as h}from"./Breadcrumb-CdrjXgk0.js";import"./swiper-WOzPqNul.js";/* empty css                                                                   */const y={class:"blog-container"},_={class:"blog-header"},f={class:"subtitle"},k={class:"blog-breadcrumb-wrapper"},w={key:0,class:"loading-state"},j={key:1,class:"empty-state"},x={key:2,class:"blog-posts"},B=["onClick"],C={class:"post-image"},L=["src","alt"],$={key:0,class:"post-category"},S={class:"post-content"},z={class:"post-meta"},E={class:"post-date"},M={key:0,class:"post-author"},D={class:"post-title"},F={class:"post-excerpt"},I={key:0,class:"post-tags"},P={class:"read-more"},q={key:3,class:"pagination"},J=["disabled"],U={class:"pagination-numbers"},V=["onClick"],Z=["disabled"],A=v({__name:"BlogView",setup(v){const A=d(),{t:G}=m(),H=e([]),K=e(!0),N=e(1),O=e(1),Q=e(6),R=a(()=>{const e=[],a=Math.max(1,N.value-2),t=Math.min(O.value,a+4);for(let l=a;l<=t;l++)e.push(l);return e}),T=async(e=1)=>{try{K.value=!0;const a=localStorage.getItem("selectedLanguage")||"en",t=W(a),l=await fetch(`https://backend.searchyourtour.com/api/blogs?token=ad5257a5-efdd-4314-9e5e-b56aabe321f1&page=${e}&limit=${Q.value}&language_id=${t}`);if(!l.ok)throw new Error("Failed to load blog posts");const s=await l.json();s&&s.length>0&&s.slice(0,3).forEach((e,a)=>{}),H.value=s||[],O.value=Math.ceil(H.value.length/Q.value),N.value=e}catch(a){H.value=[],O.value=1}finally{K.value=!1}},W=e=>({tr:2,de:6,en:1,ar:3,es:4,fr:5,it:7,pt:8,zh:10,ja:11,ru:9}[e]||1),X=e=>{if(!e)return"";return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})},Y=e=>e.blog_content&&e.blog_content.length>0&&e.blog_content[0].title||`Blog Post ${e.id}`,ee=e=>{if(e.blog_content&&e.blog_content.length>0){const a=(e.blog_content[0].description||"").replace(/<[^>]*>/g,"");return a.length>150?a.substring(0,150)+"...":a}return"Blog iÃ§eriÄŸi henÃ¼z eklenmemiÅŸ."},ae=e=>{if(e.image&&e.image.length>0){return`https://res.cloudinary.com/dpen2pshi/image/upload/v1737105822/${e.image[0]}.webp`}return e.images&&"string"==typeof e.images?e.images:e.files&&e.files.length>0?e.files[0].url||e.files[0]:"/placeholder-blog.jpg"},te=e=>{e>=1&&e<=O.value&&T(e)},le=e=>{e.detail&&e.detail.language&&T(N.value)};return t(()=>{T(),window.addEventListener("language-changed",le)}),l(()=>{window.removeEventListener("language-changed",le)}),(e,a)=>(p(),s("div",y,[n("div",_,[n("h1",null,i(c(G)("blog.title")),1),n("div",f,i(c(G)("blog.subtitle")),1)]),n("div",k,[g(h)]),K.value?(p(),s("div",w,[a[2]||(a[2]=n("div",{class:"loading-spinner"},null,-1)),n("p",null,i(c(G)("blog.loading")),1)])):0===H.value.length?(p(),s("div",j,[a[3]||(a[3]=n("div",{class:"empty-icon"},"ðŸ“",-1)),n("h3",null,i(c(G)("blog.emptyState.title")),1),n("p",null,i(c(G)("blog.emptyState.description")),1)])):(p(),s("div",x,[(p(!0),s(r,null,u(H.value,e=>(p(),s("article",{key:e.id,class:"blog-post",onClick:a=>(e=>{const a=(e=>e.blog_content&&e.blog_content.length>0&&e.blog_content[0].slug?e.blog_content[0].slug:e.blog_content&&e.blog_content.length>0&&e.blog_content[0].title?e.blog_content[0].title.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim():e.id)(e);A.push(`/blog/${a}`)})(e)},[n("div",C,[n("img",{src:ae(e),alt:Y(e),loading:"lazy"},null,8,L),e.category_name&&"BulunamadÄ±"!==e.category_name?(p(),s("div",$,i(e.category_name),1)):o("",!0)]),n("div",S,[n("div",z,[n("span",E,i(X(e.created_at)),1),e.author?(p(),s("span",M,i(e.author),1)):o("",!0)]),n("h2",D,i(Y(e)),1),n("p",F,i(ee(e)),1),e.category&&e.category.length?(p(),s("div",I,[(p(!0),s(r,null,u(e.category.slice(0,3),e=>(p(),s("span",{key:e,class:"post-tag"},i(e),1))),128))])):o("",!0),n("div",P,i(c(G)("blog.readMore")),1)])],8,B))),128))])),O.value>1?(p(),s("div",q,[n("button",{onClick:a[0]||(a[0]=e=>te(N.value-1)),disabled:1===N.value,class:"pagination-btn"},i(c(G)("blog.pagination.previous")),9,J),n("div",U,[(p(!0),s(r,null,u(R.value,e=>(p(),s("button",{key:e,onClick:a=>te(e),class:b(["pagination-number",{active:e===N.value}])},i(e),11,V))),128))]),n("button",{onClick:a[1]||(a[1]=e=>te(N.value+1)),disabled:N.value===O.value,class:"pagination-btn"},i(c(G)("blog.pagination.next")),9,Z)])):o("",!0)]))}},[["__scopeId","data-v-61a1f49f"]]);export{A as default};
