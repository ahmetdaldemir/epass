import{r as t,o as a,w as e,c as n,a as s,b as l,t as i,F as o,l as r,f as c,h as u,I as d,e as v,i as p,d as m,g}from"./vendor-D8r79KCq.js";import{_ as h}from"./index-CGOmOGGe.js";import"./swiper-WOzPqNul.js";const f={class:"attractions"},y={class:"attractions-list"},b={class:"container"},k={key:0,class:"loading-state"},_={key:1,class:"error-state"},w={key:2,class:"attractions-grid"},$={class:"attraction-image"},I=["src","alt"],x={class:"attraction-content"},C={class:"attraction-meta"},L={class:"price"},T={class:"duration"},A={class:"attraction-actions"},E=["onClick"],S={key:3,class:"no-results"},j=h({__name:"AttractionsView",setup(h,{expose:j}){const D=t([]),U=t(!1),M=t(null),P=t("en"),B=computed(()=>{const t=localStorage.getItem("selectedCurrency")||"EUR";return R(t)}),F=async()=>{U.value=!0,M.value=null;try{const t=`https://searchyourtour.com/api/tours?token=ad5257a5-efdd-4314-9e5e-b56aabe321f1&language_id=${H(P.value)}&currency_id=${B.value}&limit=200&IpAdrress=78.177.166.135`,a=await fetch(t);if(!a.ok)throw new Error("Failed to fetch attractions");const e=(await a.json()||[]).filter(t=>{var a;return 404===(null==(a=t.destination)?void 0:a.id)&&!0===t.is_active});D.value=e}catch(t){M.value="Failed to load attractions. Please try again later."}finally{U.value=!1}},H=t=>({tr:2,de:6,en:1,ar:3,es:4,fr:5,it:7,pt:8,zh:10,ja:11,ru:9}[t]||1),R=t=>({EUR:4,USD:5,GBP:6,TRY:7}[t]||4),V=t=>{var a,e;return(null==(e=null==(a=t.content)?void 0:a[0])?void 0:e.name)||"Unnamed Attraction"},N=t=>{var a,e;const n=null==(e=null==(a=t.content)?void 0:a[0])?void 0:e.meta_content;if(!n)return"No description available";const s=document.createElement("div");s.innerHTML=n;const l=s.textContent||s.innerText||"";return l.length>120?l.substring(0,120)+"...":l},z=t=>{var a,e;return(null==(e=null==(a=t.files)?void 0:a[0])?void 0:e.url)||"https://via.placeholder.com/300x200?text=Istanbul+Attraction"},G=t=>{var a;const e=null==(a=t.tour_price)?void 0:a[0];if(!e)return"CALL";return`${e.currency_icon||"$"}${e.price}`},W=t=>{const a=t.tour_duraction,e=t.tour_duraction_type;return a?"hour"===e?`${a} Hr`:"day"===e?`${a} Day`:"week"===e?`${a} Week`:"month"===e?`${a} Month`:"minutes"===e||"minute"===e||"min"===e?`${a} Min`:`${a} ${e}s`:"Duration not specified"};j({updateLanguage:t=>{P.value=t,F()}});const Y=t=>{t.detail&&t.detail.currency&&F()};return a(()=>{window.addEventListener("currency-changed",Y);const t=localStorage.getItem("selectedLanguage")||"en";P.value=t,F()}),onBeforeUnmount(()=>{window.removeEventListener("currency-changed",Y)}),e(()=>localStorage.getItem("selectedLanguage"),t=>{t&&t!==P.value&&(P.value=t,F())}),(t,a)=>{const e=c("router-link");return u(),n("div",f,[a[6]||(a[6]=s("section",{class:"hero-section"},[s("div",{class:"container"},[s("h1",null,"Istanbul Attractions & Tours - Discover Top Cultural Sites"),s("h2",null,"Explore Hagia Sophia, Topkapi Palace, Basilica Cistern & More"),s("p",null,"Discover the most popular attractions and guided tours included in your Istanbul Tourist Pass. Visit iconic landmarks and hidden gems with expert guides.")])],-1)),s("section",y,[s("div",b,[U.value?(u(),n("div",k,a[1]||(a[1]=[s("div",{class:"loading-spinner"},null,-1),s("p",null,"Loading Istanbul attractions...",-1)]))):M.value?(u(),n("div",_,[s("p",null,i(M.value),1),s("button",{onClick:F,class:"btn btn-primary"},"Try Again")])):(u(),n("div",w,[(u(!0),n(o,null,r(D.value,t=>(u(),d(e,{key:t.id,to:`/tour/${t.id}`,class:"attraction-card",style:{"text-decoration":"none",color:"inherit",display:"block",height:"100%"}},{default:v(()=>[s("div",$,[s("img",{src:z(t),alt:V(t)},null,8,I)]),s("div",x,[s("h3",null,i(V(t)),1),s("p",null,i(N(t)),1),s("div",C,[s("span",L,i(G(t)),1),s("span",T,[a[2]||(a[2]=s("i",{class:"fas fa-clock"},null,-1)),p(" "+i(W(t)),1)])]),s("div",A,[m(e,{onClick:a[0]||(a[0]=g(()=>{},["stop"])),to:`/tour/${t.id}`,class:"btn btn-primary"},{default:v(()=>a[3]||(a[3]=[p("View")])),_:2,__:[3]},1032,["to"]),s("button",{onClick:g(a=>{t.id},["stop"]),class:"btn btn-secondary"},a[4]||(a[4]=[s("i",{class:"fas fa-heart"},null,-1)]),8,E)])])]),_:2},1032,["to"]))),128))])),U.value||M.value||0!==D.value.length?l("",!0):(u(),n("div",S,a[5]||(a[5]=[s("p",null,"No Istanbul attractions found at the moment.",-1)])))])])])}}},[["__scopeId","data-v-faf51c2b"]]);export{j as default};
