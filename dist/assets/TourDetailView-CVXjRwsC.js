import{_ as B,r as c,g as O,a as i,o as u,b as t,d,w as I,v as x,t as o,f as p,n as G,c as R,F as S,e as M,j as P,k as L,i as K,p as N,u as J}from"./index-CTsXmSUE.js";const Q={class:"checkout-container"},X={class:"form-group"},Z={class:"form-group"},tt={class:"order-summary"},et={class:"summary-row"},st={class:"total-amount"},nt=["disabled"],lt={key:0},ot={key:1},at={key:0,class:"success-message"},it={key:1,class:"error-message"},ut={__name:"CheckoutForm",props:{orderTotal:{type:String,default:"€149.00"}},setup(F){let w,v,s;const k=c(""),_=c(""),m=c(!1),b=c(!1),f=c("");O(()=>{if(window.Stripe)T();else{const g=document.createElement("script");g.src="https://js.stripe.com/v3/",g.onload=T,document.head.appendChild(g)}});function T(){w=window.Stripe("pk_test_51N9...YOUR_PUBLIC_KEY..."),v=w.elements(),s=v.create("card"),s.mount("#card-element")}const C=async()=>{m.value=!0,f.value="",b.value=!1;try{const{paymentMethod:g,error:r}=await w.createPaymentMethod({type:"card",card:s,billing_details:{name:k.value,email:_.value}});if(r){f.value=r.message,m.value=!1;return}setTimeout(()=>{m.value=!1,b.value=!0},1200)}catch(g){f.value=g.message||"Payment failed.",m.value=!1}};return(g,r)=>(u(),i("div",Q,[r[8]||(r[8]=t("h2",null,"Payment",-1)),t("form",{onSubmit:G(C,["prevent"]),class:"checkout-form"},[t("div",X,[r[2]||(r[2]=t("label",null,"Name on Card",-1)),I(t("input",{"onUpdate:modelValue":r[0]||(r[0]=h=>k.value=h),type:"text",required:"",placeholder:"Full Name"},null,512),[[x,k.value]])]),t("div",Z,[r[3]||(r[3]=t("label",null,"Email Address",-1)),I(t("input",{"onUpdate:modelValue":r[1]||(r[1]=h=>_.value=h),type:"email",required:"",placeholder:"you@email.com"},null,512),[[x,_.value]])]),r[7]||(r[7]=t("div",{class:"form-group"},[t("label",null,"Card Details"),t("div",{id:"card-element",class:"stripe-card-element"})],-1)),t("div",tt,[t("div",et,[r[4]||(r[4]=t("span",null,"Order Total",-1)),t("span",st,o(F.orderTotal),1)])]),t("button",{class:"pay-btn",disabled:m.value},[m.value?(u(),i("span",lt,"Processing...")):(u(),i("span",ot,"Pay Now"))],8,nt),b.value?(u(),i("div",at,r[5]||(r[5]=[t("i",{class:"fas fa-check-circle"},null,-1),p(" Payment Successful! Thank you. ")]))):d("",!0),f.value?(u(),i("div",it,[r[6]||(r[6]=t("i",{class:"fas fa-exclamation-circle"},null,-1)),p(" "+o(f.value),1)])):d("",!0)],32)]))}},rt=B(ut,[["__scopeId","data-v-fa66d254"]]),dt={class:"tour-detail"},ct={key:0,class:"loading-state"},vt={key:1,class:"error-state"},pt={key:2},mt={class:"tour-hero"},_t={class:"container"},ft={class:"tour-hero-content"},gt={class:"tour-images"},yt={class:"main-image"},kt=["src","alt"],bt={key:0,class:"image-gallery"},Tt=["src","alt"],wt={class:"tour-info"},ht={class:"breadcrumb"},$t={class:"tour-title"},Ct={class:"tour-meta"},Dt={class:"duration"},Nt={class:"destination"},It={class:"tour-description"},xt={class:"info-card"},St={class:"info-item"},Mt={class:"info-item"},Pt={class:"info-item"},Ft={class:"info-item"},At={key:0,class:"info-item"},Vt={class:"tour-details"},qt={class:"container"},Et={class:"content-row"},Lt={class:"content-row-tabs"},Ut={class:"tabs"},Bt={class:"tab-content"},Ot={key:0,class:"tab-panel"},jt={class:"overview-content"},Ht={class:"overview-text"},Wt=["innerHTML"],Yt={key:1,class:"tab-panel"},zt={class:"inclusions-grid"},Gt={key:0,class:"inclusions-section"},Rt={class:"inclusions-list"},Kt={key:1,class:"inclusions-section"},Jt={class:"exclusions-list"},Qt={key:2,class:"tab-panel"},Xt={class:"additional-info"},Zt={class:"info-section"},te={class:"detail-item"},ee={class:"detail-item"},se={class:"detail-item"},ne={key:0,class:"detail-item"},le={class:"content-row-booking"},oe={key:0,class:"pass-box"},ae={class:"pass-select-row"},ie={class:"pass-select"},ue={class:"pass-price"},re={class:"quantity-row"},de=["disabled"],ce={class:"price-summary"},ve={key:0,class:"old-price"},pe={class:"new-price"},me={key:1,class:"discount"},_e={class:"order-total-row"},fe={class:"order-total"},ge={key:0,class:"save-note"},ye={key:3,class:"checkout-modal"},ke={class:"checkout-content"},U="€10.00",be={__name:"TourDetailView",setup(F){const w=J(),v=c("overview"),s=c(null),k=c(!1),_=c(null),m=c(1),b=c(""),f=c(""),T=c(!1),C=async()=>{k.value=!0,_.value=null;try{const l=localStorage.getItem("selectedLanguage")||"en",a=`https://searchyourtour.com/api/tours?token=ad5257a5-efdd-4314-9e5e-b56aabe321f1&language_id=${g(l)}&currency_id=5&limit=100&IpAdrress=78.177.166.135`,n=await fetch(a);if(!n.ok)throw new Error("Failed to fetch tour data");const $=(await n.json()).find(z=>z.id.toString()===w.params.id);if(!$){_.value="Tour not found";return}s.value=$}catch(l){_.value="Failed to load tour details. Please try again later.",console.error("Error fetching tour:",l)}finally{k.value=!1}},g=l=>({en:1,tr:2,de:6,ru:9})[l]||1,r=l=>{var e,a;return((a=(e=l.content)==null?void 0:e[0])==null?void 0:a.name)||"Unnamed Tour"},h=l=>{var y,$;const e=($=(y=l.content)==null?void 0:y[0])==null?void 0:$.meta_content;if(!e)return"No description available";const a=document.createElement("div");a.innerHTML=e;const n=a.textContent||a.innerText||"";return n.length>200?n.substring(0,200)+"...":n},j=l=>{var e,a;return((a=(e=l.content)==null?void 0:e[0])==null?void 0:a.description)||"No detailed description available"},H=l=>{var e,a;return((a=(e=l.files)==null?void 0:e[0])==null?void 0:a.url)||"https://via.placeholder.com/800x500?text=No+Image"},A=l=>{var e;return((e=l.destination)==null?void 0:e.name)||"Unknown Destination"},V=l=>{var n,y;const e=(n=l.tour_price)==null?void 0:n[0];return e?`${((y=e.currency)==null?void 0:y.icon)||"€"}${e.price}`:"Price on request"},q=l=>{var a,n;const e=(a=l.tour_price)==null?void 0:a[0];return e&&e.old_price&&e.old_price>e.price?`${((n=e.currency)==null?void 0:n.icon)||"€"}${e.old_price}`:null},D=l=>{var a;const e=(a=l.tour_price)==null?void 0:a[0];return e&&e.old_price&&e.old_price>e.price?`€${e.old_price-e.price}`:null},E=R(()=>{var a;if(!s.value)return"€0.00";const l=(a=s.value.tour_price)==null?void 0:a[0];return l?`€${l.price*m.value+10}.00`:"Price on request"}),W=()=>{T.value=!0},Y=l=>{if(!l.days||l.days.length===0)return"Not specified";const e=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];return l.days.map(a=>e[a-1]).join(", ")};return O(()=>{C()}),(l,e)=>{const a=K("router-link");return u(),i("div",dt,[k.value?(u(),i("div",ct,e[9]||(e[9]=[t("div",{class:"loading-spinner"},null,-1),t("p",null,"Loading tour details...",-1)]))):_.value?(u(),i("div",vt,[t("p",null,o(_.value),1),t("button",{onClick:C,class:"btn btn-primary"},"Try Again")])):s.value?(u(),i("div",pt,[t("section",mt,[t("div",_t,[t("div",ft,[t("div",gt,[t("div",yt,[t("img",{src:H(s.value),alt:r(s.value)},null,8,kt)]),s.value.files&&s.value.files.length>1?(u(),i("div",bt,[(u(!0),i(S,null,M(s.value.files.slice(1,5),(n,y)=>(u(),i("div",{class:"gallery-item",key:n.id},[t("img",{src:n.url,alt:`${r(s.value)} - Image ${y+2}`},null,8,Tt)]))),128))])):d("",!0)]),t("div",wt,[t("nav",ht,[P(a,{to:"/"},{default:L(()=>e[10]||(e[10]=[p("Home")])),_:1,__:[10]}),e[12]||(e[12]=t("span",null,"/",-1)),P(a,{to:"/tours"},{default:L(()=>e[11]||(e[11]=[p("Tours")])),_:1,__:[11]}),e[13]||(e[13]=t("span",null,"/",-1)),t("span",null,o(r(s.value)),1)]),t("h1",$t,o(r(s.value)),1),t("div",Ct,[e[16]||(e[16]=t("div",{class:"rating"},[t("i",{class:"fas fa-star"}),t("span",null,"4.5"),t("span",{class:"review-count"},"(New)")],-1)),t("div",Dt,[e[14]||(e[14]=t("i",{class:"fas fa-clock"},null,-1)),t("span",null,o(s.value.tour_duraction)+" "+o(s.value.tour_duraction_type)+o(s.value.tour_duraction>1?"s":""),1)]),t("div",Nt,[e[15]||(e[15]=t("i",{class:"fas fa-map-marker-alt"},null,-1)),t("span",null,o(A(s.value)),1)])]),t("div",It,[t("p",null,o(h(s.value)),1)]),t("div",xt,[e[22]||(e[22]=t("h4",null,"Tour Information",-1)),t("div",St,[e[17]||(e[17]=t("i",{class:"fas fa-map-marker-alt"},null,-1)),t("span",null,"Destination: "+o(A(s.value)),1)]),t("div",Mt,[e[18]||(e[18]=t("i",{class:"fas fa-clock"},null,-1)),t("span",null,"Duration: "+o(s.value.tour_duraction)+" "+o(s.value.tour_duraction_type)+o(s.value.tour_duraction>1?"s":""),1)]),t("div",Pt,[e[19]||(e[19]=t("i",{class:"fas fa-users"},null,-1)),t("span",null,"Max Group Size: "+o(s.value.pax||"Not specified"),1)]),t("div",Ft,[e[20]||(e[20]=t("i",{class:"fas fa-calendar"},null,-1)),t("span",null,"Available Days: "+o(Y(s.value)),1)]),s.value.min_age?(u(),i("div",At,[e[21]||(e[21]=t("i",{class:"fas fa-child"},null,-1)),t("span",null,"Minimum Age: "+o(s.value.min_age),1)])):d("",!0)])])])])]),t("section",Vt,[t("div",qt,[t("div",Et,[t("div",Lt,[t("div",Ut,[t("button",{class:N(["tab-btn",{active:v.value==="overview"}]),onClick:e[0]||(e[0]=n=>v.value="overview")}," Overview ",2),t("button",{class:N(["tab-btn",{active:v.value==="inclusions"}]),onClick:e[1]||(e[1]=n=>v.value="inclusions")}," What's Included ",2),t("button",{class:N(["tab-btn",{active:v.value==="additional"}]),onClick:e[2]||(e[2]=n=>v.value="additional")}," Additional Info ",2)]),t("div",Bt,[v.value==="overview"?(u(),i("div",Ot,[t("div",jt,[t("div",Ht,[e[23]||(e[23]=t("h3",null,"About This Tour",-1)),t("div",{innerHTML:j(s.value)},null,8,Wt)]),e[24]||(e[24]=t("div",{class:"overview-sidebar"},null,-1))])])):d("",!0),v.value==="inclusions"?(u(),i("div",Yt,[t("div",zt,[s.value.tour_include_service&&s.value.tour_include_service.length>0?(u(),i("div",Gt,[e[26]||(e[26]=t("h3",null,"What's Included",-1)),t("ul",Rt,[(u(!0),i(S,null,M(s.value.tour_include_service,n=>(u(),i("li",{key:n.id},[e[25]||(e[25]=t("i",{class:"fas fa-check"},null,-1)),p(" "+o(n.include_service),1)]))),128))])])):d("",!0),s.value.tour_outside_service&&s.value.tour_outside_service.length>0?(u(),i("div",Kt,[e[28]||(e[28]=t("h3",null,"Not Included",-1)),t("ul",Jt,[(u(!0),i(S,null,M(s.value.tour_outside_service,n=>(u(),i("li",{key:n.id},[e[27]||(e[27]=t("i",{class:"fas fa-times"},null,-1)),p(" "+o(n.outside_service),1)]))),128))])])):d("",!0)])])):d("",!0),v.value==="additional"?(u(),i("div",Qt,[t("div",Xt,[t("div",Zt,[e[33]||(e[33]=t("h3",null,"Tour Details",-1)),t("div",te,[e[29]||(e[29]=t("strong",null,"Tour Code:",-1)),p(" "+o(s.value.code),1)]),t("div",ee,[e[30]||(e[30]=t("strong",null,"Duration Type:",-1)),p(" "+o(s.value.tour_duraction_type),1)]),t("div",se,[e[31]||(e[31]=t("strong",null,"Status:",-1)),t("span",{class:N(s.value.is_active?"status-active":"status-inactive")},o(s.value.is_active?"Active":"Inactive"),3)]),s.value.ask_for_price?(u(),i("div",ne,e[32]||(e[32]=[t("strong",null,"Pricing:",-1),p(" Price on request ")]))):d("",!0)])])])):d("",!0)])]),t("div",le,[s.value?(u(),i("div",oe,[e[39]||(e[39]=t("h2",null,"Book this tour",-1)),t("div",ae,[t("div",ie,o(r(s.value)),1),t("span",ue,[p(o(V(s.value)),1),e[34]||(e[34]=t("small",null," / person",-1))])]),t("div",re,[t("button",{onClick:e[3]||(e[3]=(...n)=>l.decrement&&l.decrement(...n)),disabled:m.value<=1},"-",8,de),t("span",null,o(m.value),1),t("button",{onClick:e[4]||(e[4]=(...n)=>l.increment&&l.increment(...n))},"+")]),t("div",ce,[q(s.value)?(u(),i("div",ve,[t("s",null,o(q(s.value)),1)])):d("",!0),t("div",pe,o(V(s.value)),1),D(s.value)?(u(),i("div",me,[e[35]||(e[35]=t("span",null,"Sale Discount",-1)),t("span",null,"-"+o(D(s.value)),1)])):d("",!0)]),e[40]||(e[40]=t("hr",null,null,-1)),t("div",{class:"fee-row"},[e[36]||(e[36]=t("span",null,[p("Instant Access Fee "),t("span",{class:"info",title:"You get your booking instantly after payment."},"i")],-1)),t("span",null,o(U))]),e[41]||(e[41]=t("div",{class:"eco-row"},[t("span",{class:"eco-icon"},"🌱"),t("span",null,"Eco-Friendly Green Technology")],-1)),e[42]||(e[42]=t("hr",null,null,-1)),t("div",_e,[e[37]||(e[37]=t("span",null,"Order Total",-1)),t("span",fe,o(E.value),1)]),e[43]||(e[43]=t("div",{class:"tax-note"},"All taxes and fees included",-1)),I(t("input",{type:"email",placeholder:"E-mail Address",class:"input","onUpdate:modelValue":e[5]||(e[5]=n=>b.value=n)},null,512),[[x,b.value]]),I(t("input",{type:"date",placeholder:"Tour Date",class:"input","onUpdate:modelValue":e[6]||(e[6]=n=>f.value=n)},null,512),[[x,f.value]]),t("button",{class:"pay-btn",onClick:W},"Book Now"),D(s.value)?(u(),i("div",ge,[t("b",null,"Save "+o(D(s.value)),1),e[38]||(e[38]=p(" on this tour versus original price. "))])):d("",!0)])):d("",!0)])])])])])):d("",!0),T.value?(u(),i("div",ye,[t("div",ke,[t("span",{class:"close-btn",onClick:e[7]||(e[7]=n=>T.value=!1)},"×"),e[44]||(e[44]=t("h2",null,"Checkout",-1)),P(rt,{tour:s.value,quantity:m.value,email:b.value,startDate:f.value,instantFee:U,orderTotal:E.value,onClose:e[8]||(e[8]=n=>T.value=!1)},null,8,["tour","quantity","email","startDate","orderTotal"])])])):d("",!0)])}}},we=B(be,[["__scopeId","data-v-427236ec"]]);export{we as default};
