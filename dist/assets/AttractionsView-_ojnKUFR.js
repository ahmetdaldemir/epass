import{r as t,c as a,o as n,P as e,w as r,k as s,l as o,x as i,j as l,m as c,F as u,L as d,J as v,p,t as m,U as g,n as h,v as _,q as y}from"./vendor-C-dIp69U.js";import{_ as $,u as f}from"./index-Dmf9SOn9.js";import{B as k}from"./Breadcrumb-CdrjXgk0.js";import"./swiper-WOzPqNul.js";/* empty css                                                                   */const b={class:"hero-section"},w={class:"container"},x={class:"container"},L={class:"attractions-list"},j={class:"container"},C={key:0,class:"loading-state"},A={key:1,class:"error-state"},E={key:2,class:"attractions-grid"},I={class:"attraction-image"},S=["src","alt"],B={class:"attraction-content"},R={class:"attraction-meta"},U={class:"price"},T={class:"duration"},q={class:"attraction-actions"},D=["onClick"],P={key:3,class:"no-results"},z=$({__name:"AttractionsView",setup($,{expose:z}){const{t:F,locale:G}=f(),H=t([]),J=t(!1),M=t(null),V=t("en"),Y=a(()=>{const t=localStorage.getItem("selectedCurrency")||"EUR";return Q(t)}),K=a(()=>"ar"===G.value),N=async()=>{J.value=!0,M.value=null;try{const t=`https://backend.searchyourtour.com/api/tours?token=ad5257a5-efdd-4314-9e5e-b56aabe321f1&language_id=${O(V.value)}&currency_id=${Y.value}&limit=200&IpAdrress=78.177.166.135`,a=await fetch(t);if(!a.ok)throw new Error(F("attractions.error"));const n=(await a.json()||[]).filter(t=>{var a,n;return 404===(null==(a=t.destination)?void 0:a.id)&&!0===t.is_active&&t.tour_price&&t.tour_price.length>0&&(null==(n=t.tour_price[0])?void 0:n.price)&&t.tour_price[0].price>0});H.value=n}catch(t){M.value=F("attractions.error")}finally{J.value=!1}},O=t=>({tr:2,de:6,en:1,ar:3,es:4,fr:5,it:7,pt:8,zh:10,ja:11,ru:9}[t]||1),Q=t=>({EUR:4,USD:5,GBP:6,TRY:7}[t]||4),W=t=>{var a,n;return(null==(n=null==(a=t.content)?void 0:a[0])?void 0:n.name)||F("attractions.unnamedAttraction")},X=t=>{var a,n;const e=null==(n=null==(a=t.content)?void 0:a[0])?void 0:n.meta_content;if(!e)return F("attractions.noDescription");const r=document.createElement("div");r.innerHTML=e;const s=r.textContent||r.innerText||"";return s.length>120?s.substring(0,120)+"...":s},Z=t=>{var a,n;return(null==(n=null==(a=t.files)?void 0:a[0])?void 0:n.url)||"https://via.placeholder.com/300x200?text=Istanbul+Attraction"},tt=t=>{var a;const n=null==(a=t.tour_price)?void 0:a[0];if(!n)return"CALL";return`${n.currency_icon||"$"}${n.price}`},at=t=>{const a=t.tour_duraction,n=t.tour_duraction_type;return a?"hour"===n?`${a} ${F(1===a?"attractions.duration.hour":"attractions.duration.hours")}`:"day"===n?`${a} ${F(1===a?"attractions.duration.day":"attractions.duration.days")}`:"week"===n?`${a} ${F(1===a?"attractions.duration.week":"attractions.duration.weeks")}`:"month"===n?`${a} ${F(1===a?"attractions.duration.month":"attractions.duration.months")}`:"minutes"===n||"minute"===n||"min"===n?`${a} ${F("attractions.duration.minute")}`:`${a} ${n}s`:F("attractions.duration.notSpecified")};z({updateLanguage:t=>{V.value=t,N()}});const nt=t=>{t.detail&&t.detail.currency&&N()};return n(()=>{window.addEventListener("currency-changed",nt);const t=localStorage.getItem("selectedLanguage")||"en";V.value=t,N()}),e(()=>{window.removeEventListener("currency-changed",nt)}),r(()=>localStorage.getItem("selectedLanguage"),t=>{t&&t!==V.value&&(V.value=t,N())}),(t,a)=>{const n=p("router-link");return m(),s("div",{class:v(["attractions",{rtl:K.value}])},[o("section",b,[o("div",w,[o("h1",null,i(t.$t("attractions.hero.title")),1),o("h2",null,i(t.$t("attractions.hero.subtitle")),1),o("p",null,i(t.$t("attractions.hero.description")),1)])]),o("div",x,[l(k)]),o("section",L,[o("div",j,[J.value?(m(),s("div",C,[a[1]||(a[1]=o("div",{class:"loading-spinner"},null,-1)),o("p",null,i(t.$t("attractions.loading")),1)])):M.value?(m(),s("div",A,[o("p",null,i(M.value),1),o("button",{onClick:N,class:"btn btn-primary"},i(t.$t("attractions.tryAgain")),1)])):(m(),s("div",E,[(m(!0),s(u,null,d(H.value,e=>(m(),g(n,{key:e.id,to:`${e.slug_url}`,class:"attraction-card",style:{"text-decoration":"none",color:"inherit",display:"block",height:"100%"}},{default:h(()=>[o("div",I,[o("img",{src:Z(e),alt:W(e)},null,8,S)]),o("div",B,[o("h3",null,i(W(e)),1),o("p",null,i(X(e)),1),o("div",R,[o("span",U,i(tt(e)),1),o("span",T,[a[2]||(a[2]=o("i",{class:"fas fa-clock"},null,-1)),_(" "+i(at(e)),1)])]),o("div",q,[l(n,{onClick:a[0]||(a[0]=y(()=>{},["stop"])),to:`${e.slug_url}`,class:"btn btn-primary"},{default:h(()=>[_(i(t.$t("attractions.view")),1)]),_:2},1032,["to"]),o("button",{onClick:y(t=>{e.id},["stop"]),class:"btn btn-secondary"},a[3]||(a[3]=[o("i",{class:"fas fa-heart"},null,-1)]),8,D)])])]),_:2},1032,["to"]))),128))])),J.value||M.value||0!==H.value.length?c("",!0):(m(),s("div",P,[o("p",null,i(t.$t("attractions.noResults")),1)]))])])],2)}}},[["__scopeId","data-v-d3d4e3d4"]]);export{z as default};
