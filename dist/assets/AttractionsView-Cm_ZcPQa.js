import{_ as I,r as d,g as L,h as w,a as o,b as n,d as D,t as g,F as M,e as N,i as V,o as r,f,j as T,k as E}from"./index-CTsXmSUE.js";const F={class:"attractions"},B={class:"attractions-list"},H={class:"container"},S={key:0,class:"loading-state"},W={key:1,class:"error-state"},j={key:2,class:"attractions-grid"},P={class:"attraction-image"},U=["src","alt"],q={class:"attraction-content"},z={class:"attraction-meta"},G={class:"price"},J={class:"duration"},K={class:"attraction-actions"},O=["onClick"],Q={key:3,class:"no-results"},R={__name:"AttractionsView",setup(X,{expose:h}){const v=d([]),_=d(!1),c=d(null),l=d("en"),y=d(5),p=async()=>{_.value=!0,c.value=null;try{const e=`https://searchyourtour.com/api/tours?token=ad5257a5-efdd-4314-9e5e-b56aabe321f1&language_id=${k(l.value)}&currency_id=${y.value}&limit=200&IpAdrress=78.177.166.135`,t=await fetch(e);if(!t.ok)throw new Error("Failed to fetch attractions");const a=(await t.json()||[]).filter(i=>{var u;return((u=i.destination)==null?void 0:u.id)===404&&i.is_active===!0});console.log(a),v.value=a}catch(e){c.value="Failed to load attractions. Please try again later.",console.error("Error fetching attractions:",e)}finally{_.value=!1}},k=e=>({en:1,tr:2,de:6,ru:9})[e]||1,m=e=>{var t,s;return((s=(t=e.content)==null?void 0:t[0])==null?void 0:s.name)||"Unnamed Attraction"},b=e=>{var i,u;const t=(u=(i=e.content)==null?void 0:i[0])==null?void 0:u.meta_content;if(!t)return"No description available";const s=document.createElement("div");s.innerHTML=t;const a=s.textContent||s.innerText||"";return a.length>120?a.substring(0,120)+"...":a},$=e=>{var t,s;return((s=(t=e.files)==null?void 0:t[0])==null?void 0:s.url)||"https://via.placeholder.com/300x200?text=Istanbul+Attraction"},A=e=>{var a;const t=(a=e.tour_price)==null?void 0:a[0];return t?`${t.currency_icon||"$"}${t.price}`:"CALL"},x=e=>{const t=e.tour_duraction,s=e.tour_duraction_type;return t?s==="hour"?`${t} Hr`:s==="day"?`${t} Day`:s==="week"?`${t} Week`:s==="month"?`${t} Month`:s==="minutes"||s==="minute"||s==="min"?`${t} Min`:`${t} ${s}s`:"Duration not specified"},C=e=>{console.log("Adding attraction to wishlist:",e)};return h({updateLanguage:e=>{l.value=e,p()}}),L(()=>{const e=localStorage.getItem("selectedLanguage")||"en";l.value=e,p()}),w(()=>localStorage.getItem("selectedLanguage"),e=>{e&&e!==l.value&&(l.value=e,p())}),(e,t)=>{const s=V("router-link");return r(),o("div",F,[t[5]||(t[5]=n("section",{class:"hero-section"},[n("div",{class:"container"},[n("h1",null,"Istanbul Attractions"),n("p",null,"Discover the most popular attractions and tours included in your pass")])],-1)),n("section",B,[n("div",H,[_.value?(r(),o("div",S,t[0]||(t[0]=[n("div",{class:"loading-spinner"},null,-1),n("p",null,"Loading Istanbul attractions...",-1)]))):c.value?(r(),o("div",W,[n("p",null,g(c.value),1),n("button",{onClick:p,class:"btn btn-primary"},"Try Again")])):(r(),o("div",j,[(r(!0),o(M,null,N(v.value,a=>(r(),o("div",{class:"attraction-card",key:a.id},[n("div",P,[n("img",{src:$(a),alt:m(a)},null,8,U)]),n("div",q,[n("h3",null,g(m(a)),1),n("p",null,g(b(a)),1),n("div",z,[n("span",G,g(A(a)),1),n("span",J,[t[1]||(t[1]=n("i",{class:"fas fa-clock"},null,-1)),f(" "+g(x(a)),1)])]),n("div",K,[T(s,{to:`/tour/${a.id}`,class:"btn btn-primary"},{default:E(()=>t[2]||(t[2]=[f("View")])),_:2,__:[2]},1032,["to"]),n("button",{onClick:i=>C(a.id),class:"btn btn-secondary"},t[3]||(t[3]=[n("i",{class:"fas fa-heart"},null,-1)]),8,O)])])]))),128))])),!_.value&&!c.value&&v.value.length===0?(r(),o("div",Q,t[4]||(t[4]=[n("p",null,"No Istanbul attractions found at the moment.",-1)]))):D("",!0)])])])}}},tt=I(R,[["__scopeId","data-v-224e2202"]]);export{tt as default};
