import{r as e,o as a,a1 as s,k as l,l as r,q as t,m as o,I as u,Y as n,x as d,J as i,Z as p,t as v}from"./vendor-C-dIp69U.js";import{_ as c}from"./index-BPtefy7M.js";import"./swiper-WOzPqNul.js";const m={class:"reset-password-container"},w={class:"reset-password-box"},y={class:"form-group"},f={class:"form-group"},h={class:"form-group"},b=["disabled"],g={class:"back-to-login"},P=c({__name:"ResetPasswordView",setup(c){const P=s(),k=p(),q=e(""),j=e(""),R=e(""),_=e(!1),x=e(""),C=e(!1);async function E(){try{if(_.value=!0,x.value="",C.value=!1,j.value.length<6)return x.value="Password must be at least 6 characters.",void(C.value=!1);if(j.value!==R.value)return x.value="Passwords do not match.",void(C.value=!1);const e=await fetch("https://backend.searchyourtour.com/api/customer/password/reset",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({email:q.value,password:j.value,password_confirmation:R.value,token:P.query.token})}),a=await e.json();a.status?(C.value=!0,x.value=a.message||"Password reset successfully!",q.value="",j.value="",R.value="",setTimeout(()=>{k.push("/my-pass")},3e3)):(C.value=!1,x.value=a.message||"Failed to reset password")}catch(e){C.value=!1,x.value="An error occurred. Please try again."}finally{_.value=!1}}return a(()=>{P.query.token||(x.value="Invalid reset link. Please request a new password reset.",C.value=!1)}),(e,a)=>(v(),l("div",m,[r("div",w,[a[8]||(a[8]=r("div",{class:"header"},[r("h2",null,"Reset Password"),r("p",null,"Enter your new password below")],-1)),r("form",{onSubmit:t(E,["prevent"]),class:"reset-form"},[r("div",y,[a[4]||(a[4]=r("label",null,"Email Address",-1)),u(r("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>q.value=e),type:"email",placeholder:"Enter your email",required:""},null,512),[[n,q.value]])]),r("div",f,[a[5]||(a[5]=r("label",null,"New Password",-1)),u(r("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>j.value=e),type:"password",placeholder:"Enter new password",required:""},null,512),[[n,j.value]]),a[6]||(a[6]=r("small",{class:"field-note"},"Password must be at least 6 characters",-1))]),r("div",h,[a[7]||(a[7]=r("label",null,"Confirm New Password",-1)),u(r("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>R.value=e),type:"password",placeholder:"Confirm new password",required:""},null,512),[[n,R.value]])]),r("button",{class:"btn btn-primary",type:"submit",disabled:_.value},d(_.value?"Resetting...":"Reset Password"),9,b),x.value?(v(),l("div",{key:0,class:i(["message",C.value?"success":"error"])},d(x.value),3)):o("",!0)],32),r("div",g,[r("a",{href:"#",onClick:a[3]||(a[3]=t(a=>e.$router.push("/my-pass"),["prevent"]))},"Back to Login")])])]))}},[["__scopeId","data-v-120c6a95"]]);export{P as default};
