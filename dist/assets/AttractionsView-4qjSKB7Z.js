import{r as t,c as a,o as e,Q as n,w as s,k as l,l as i,m as r,x as o,F as c,L as u,p as d,t as v,U as p,n as m,v as g,j as h,q as y}from"./vendor-DH4wiDP_.js";import{_ as f}from"./index-DBFTelcP.js";import"./swiper-WOzPqNul.js";const b={class:"attractions"},k={class:"attractions-list"},_={class:"container"},w={key:0,class:"loading-state"},$={key:1,class:"error-state"},x={key:2,class:"attractions-grid"},I={class:"attraction-image"},L=["src","alt"],C={class:"attraction-content"},T={class:"attraction-meta"},A={class:"price"},E={class:"duration"},j={class:"attraction-actions"},S=["onClick"],D={key:3,class:"no-results"},U=f({__name:"AttractionsView",setup(f,{expose:U}){const M=t([]),P=t(!1),F=t(null),H=t("en"),R=a(()=>{const t=localStorage.getItem("selectedCurrency")||"EUR";return N(t)}),V=async()=>{P.value=!0,F.value=null;try{const t=`https://backend.searchyourtour.com/api/tours?token=ad5257a5-efdd-4314-9e5e-b56aabe321f1&language_id=${B(H.value)}&currency_id=${R.value}&limit=200&IpAdrress=78.177.166.135`,a=await fetch(t);if(!a.ok)throw new Error("Failed to fetch attractions");const e=(await a.json()||[]).filter(t=>{var a;return 404===(null==(a=t.destination)?void 0:a.id)&&!0===t.is_active});M.value=e}catch(t){F.value="Failed to load attractions. Please try again later."}finally{P.value=!1}},B=t=>({tr:2,de:6,en:1,ar:3,es:4,fr:5,it:7,pt:8,zh:10,ja:11,ru:9}[t]||1),N=t=>({EUR:4,USD:5,GBP:6,TRY:7}[t]||4),q=t=>{var a,e;return(null==(e=null==(a=t.content)?void 0:a[0])?void 0:e.name)||"Unnamed Attraction"},z=t=>{var a,e;const n=null==(e=null==(a=t.content)?void 0:a[0])?void 0:e.meta_content;if(!n)return"No description available";const s=document.createElement("div");s.innerHTML=n;const l=s.textContent||s.innerText||"";return l.length>120?l.substring(0,120)+"...":l},G=t=>{var a,e;return(null==(e=null==(a=t.files)?void 0:a[0])?void 0:e.url)||"https://via.placeholder.com/300x200?text=Istanbul+Attraction"},Q=t=>{var a;const e=null==(a=t.tour_price)?void 0:a[0];if(!e)return"CALL";return`${e.currency_icon||"$"}${e.price}`},W=t=>{const a=t.tour_duraction,e=t.tour_duraction_type;return a?"hour"===e?`${a} Hr`:"day"===e?`${a} Day`:"week"===e?`${a} Week`:"month"===e?`${a} Month`:"minutes"===e||"minute"===e||"min"===e?`${a} Min`:`${a} ${e}s`:"Duration not specified"};U({updateLanguage:t=>{H.value=t,V()}});const Y=t=>{t.detail&&t.detail.currency&&V()};return e(()=>{window.addEventListener("currency-changed",Y);const t=localStorage.getItem("selectedLanguage")||"en";H.value=t,V()}),n(()=>{window.removeEventListener("currency-changed",Y)}),s(()=>localStorage.getItem("selectedLanguage"),t=>{t&&t!==H.value&&(H.value=t,V())}),(t,a)=>{const e=d("router-link");return v(),l("div",b,[a[6]||(a[6]=i("section",{class:"hero-section"},[i("div",{class:"container"},[i("h1",null,"Istanbul Attractions & Tours - Discover Top Cultural Sites"),i("h2",null,"Explore Hagia Sophia, Topkapi Palace, Basilica Cistern & More"),i("p",null,"Discover the most popular attractions and guided tours included in your Istanbul Tourist Pass. Visit iconic landmarks and hidden gems with expert guides.")])],-1)),i("section",k,[i("div",_,[P.value?(v(),l("div",w,a[1]||(a[1]=[i("div",{class:"loading-spinner"},null,-1),i("p",null,"Loading Istanbul attractions...",-1)]))):F.value?(v(),l("div",$,[i("p",null,o(F.value),1),i("button",{onClick:V,class:"btn btn-primary"},"Try Again")])):(v(),l("div",x,[(v(!0),l(c,null,u(M.value,t=>(v(),p(e,{key:t.id,to:`/tour/${t.id}`,class:"attraction-card",style:{"text-decoration":"none",color:"inherit",display:"block",height:"100%"}},{default:m(()=>[i("div",I,[i("img",{src:G(t),alt:q(t)},null,8,L)]),i("div",C,[i("h3",null,o(q(t)),1),i("p",null,o(z(t)),1),i("div",T,[i("span",A,o(Q(t)),1),i("span",E,[a[2]||(a[2]=i("i",{class:"fas fa-clock"},null,-1)),g(" "+o(W(t)),1)])]),i("div",j,[h(e,{onClick:a[0]||(a[0]=y(()=>{},["stop"])),to:`/tour/${t.id}`,class:"btn btn-primary"},{default:m(()=>a[3]||(a[3]=[g("View")])),_:2,__:[3]},1032,["to"]),i("button",{onClick:y(a=>{t.id},["stop"]),class:"btn btn-secondary"},a[4]||(a[4]=[i("i",{class:"fas fa-heart"},null,-1)]),8,S)])])]),_:2},1032,["to"]))),128))])),P.value||F.value||0!==M.value.length?r("",!0):(v(),l("div",D,a[5]||(a[5]=[i("p",null,"No Istanbul attractions found at the moment.",-1)])))])])])}}},[["__scopeId","data-v-d44cb95e"]]);export{U as default};
