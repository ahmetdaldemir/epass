import{_ as B,r as p,i as w,d as H,c as r,j as I,a as s,e as T,k as D,v as x,F as m,b as h,t as l,f as S,o as i,g as b,h as U,w as $}from"./index-C89EAVNL.js";const L={class:"tours"},P={class:"tours-section"},j={class:"container"},q={class:"tours-header"},G={class:"filters"},O=["value"],W={key:0,class:"loading-state"},z={key:1,class:"error-state"},J={key:2,class:"tours-grid"},K={class:"tour-image"},Q=["src","alt"],R={key:0,class:"tour-badge"},X={class:"tour-content"},Y={class:"tour-meta"},Z={class:"category"},tt={class:"duration"},st={class:"tour-title"},et={class:"tour-description"},ot={class:"tour-features"},nt={class:"tour-footer"},at={class:"tour-price"},rt={class:"price"},it={class:"tour-actions"},lt=["onClick"],ct={key:3,class:"no-results"},ut={__name:"ToursView",setup(dt){const u=p(""),d=p(""),f=p([]),_=p(!1),v=p(null),g=async()=>{_.value=!0,v.value=null;try{const o=await fetch("https://searchyourtour.com/api/allTours");if(!o.ok)throw new Error("Failed to fetch tours");const t=await o.json();f.value=t.data||[]}catch(o){v.value="Failed to load tours. Please try again later.",console.error("Error fetching tours:",o)}finally{_.value=!1}},y=o=>{var t,n;return((n=(t=o.content)==null?void 0:t[0])==null?void 0:n.name)||"Unnamed Tour"},N=o=>{var a,c;const t=(c=(a=o.content)==null?void 0:a[0])==null?void 0:c.meta_content;if(!t)return"No description available";const n=document.createElement("div");n.innerHTML=t;const e=n.textContent||n.innerText||"";return e.length>150?e.substring(0,150)+"...":e},C=o=>{var t,n;return((n=(t=o.files)==null?void 0:t[0])==null?void 0:n.url)||"https://via.placeholder.com/400x250?text=No+Image"},V=o=>{var t;return((t=o.destination)==null?void 0:t.name)||"Unknown Destination"},A=o=>{var e,a;const t=(e=o.tour_price)==null?void 0:e[0];return t?`${((a=t.currency)==null?void 0:a.icon)||"â‚¬"}${t.price}`:"Price on request"},F=w(()=>{const o=f.value.map(t=>{var n;return(n=t.destination)==null?void 0:n.name}).filter(Boolean);return[...new Set(o)]}),k=w(()=>f.value.filter(o=>{var e;const t=!u.value||((e=o.destination)==null?void 0:e.name)===u.value,n=!d.value||(()=>{const a=o.tour_duraction;switch(d.value){case"1-3":return a>=1&&a<=3;case"4-6":return a>=4&&a<=6;case"7+":return a>=7;default:return!0}})();return t&&n})),E=o=>{console.log("Adding tour to wishlist:",o)},M=()=>{u.value="",d.value=""};return H(()=>{g()}),(o,t)=>{const n=S("router-link");return i(),r("div",L,[t[13]||(t[13]=I('<section class="hero-section" data-v-bdb0c5a3><div class="container" data-v-bdb0c5a3><div class="hero-content" data-v-bdb0c5a3><h1 class="hero-title" data-v-bdb0c5a3>Discover Istanbul with Our Guided Tours</h1><p class="hero-subtitle" data-v-bdb0c5a3>Explore the city&#39;s rich history and culture with our expert guides</p></div></div></section>',1)),s("section",P,[s("div",j,[s("div",q,[t[4]||(t[4]=s("h2",null,"Available Tours",-1)),s("div",G,[D(s("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>u.value=e),class:"filter-select"},[t[2]||(t[2]=s("option",{value:""},"All Destinations",-1)),(i(!0),r(m,null,h(F.value,e=>(i(),r("option",{key:e,value:e},l(e),9,O))),128))],512),[[x,u.value]]),D(s("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>d.value=e),class:"filter-select"},t[3]||(t[3]=[s("option",{value:""},"All Durations",-1),s("option",{value:"1-3"},"1-3 Hours",-1),s("option",{value:"4-6"},"4-6 Hours",-1),s("option",{value:"7+"},"7+ Hours",-1)]),512),[[x,d.value]])])]),_.value?(i(),r("div",W,t[5]||(t[5]=[s("div",{class:"loading-spinner"},null,-1),s("p",null,"Loading tours...",-1)]))):v.value?(i(),r("div",z,[s("p",null,l(v.value),1),s("button",{onClick:g,class:"btn btn-primary"},"Try Again")])):(i(),r("div",J,[(i(!0),r(m,null,h(k.value,e=>{var a;return i(),r("div",{class:"tour-card",key:e.id},[s("div",K,[s("img",{src:C(e),alt:y(e)},null,8,Q),e.is_active?(i(),r("div",R,"Active")):T("",!0)]),s("div",X,[s("div",Y,[s("span",Z,l(V(e)),1),s("span",tt,[t[6]||(t[6]=s("i",{class:"fas fa-clock"},null,-1)),b(" "+l(e.tour_duraction)+" "+l(e.tour_duraction_type)+l(e.tour_duraction>1?"s":""),1)])]),s("h3",st,l(y(e)),1),s("p",et,l(N(e)),1),s("div",ot,[(i(!0),r(m,null,h((a=e.tour_include_service)==null?void 0:a.slice(0,3),c=>(i(),r("span",{key:c.id,class:"feature"},[t[7]||(t[7]=s("i",{class:"fas fa-check"},null,-1)),b(" "+l(c.include_service),1)]))),128))]),s("div",nt,[t[9]||(t[9]=s("div",{class:"tour-rating"},[s("i",{class:"fas fa-star"}),s("span",null,"4.5"),s("span",{class:"review-count"},"(New)")],-1)),s("div",at,[s("span",rt,l(A(e)),1),t[8]||(t[8]=s("span",{class:"price-note"},"per person",-1))])]),s("div",it,[U(n,{to:`/tour/${e.id}`,class:"btn btn-primary"},{default:$(()=>t[10]||(t[10]=[b(" View Details ")])),_:2,__:[10]},1032,["to"]),s("button",{class:"btn btn-secondary",onClick:c=>E(e.id)},t[11]||(t[11]=[s("i",{class:"fas fa-heart"},null,-1)]),8,lt)])])])}),128))])),!_.value&&!v.value&&k.value.length===0?(i(),r("div",ct,[t[12]||(t[12]=s("p",null,"No tours found matching your criteria.",-1)),s("button",{onClick:M,class:"btn btn-primary"},"Clear Filters")])):T("",!0)])])])}}},pt=B(ut,[["__scopeId","data-v-bdb0c5a3"]]);export{pt as default};
