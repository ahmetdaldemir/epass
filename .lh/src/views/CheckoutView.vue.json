{
    "sourceFile": "src/views/CheckoutView.vue",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 122,
            "patches": [
                {
                    "date": 1751893563511,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1751965682575,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -12,99 +12,45 @@\n           <div>Payment</div>\r\n         </div>\r\n       </div>\r\n       <div class=\"checkout-content\">\r\n-        <form v-if=\"step === 1\" class=\"checkout-form\" @submit.prevent=\"goToPayment\">\r\n-          <h2>Enter your personal details</h2>\r\n-          <div class=\"secure-info\"><i class=\"fas fa-lock\"></i> Checkout is fast and secure</div>\r\n-          <div class=\"form-group\">\r\n-            <label>Full name *</label>\r\n-            <input v-model=\"contact.name\" type=\"text\" required placeholder=\"Full name\" />\r\n-          </div>\r\n-          <div class=\"form-group\">\r\n-            <label>Email *</label>\r\n-            <input v-model=\"contact.email\" type=\"email\" required placeholder=\"Email\" />\r\n-          </div>\r\n-          <div class=\"form-group\">\r\n-            <label>Country *</label>\r\n-            <select v-model=\"contact.country\" required>\r\n-              <option value=\"Turkey\">Turkey (+90)</option>\r\n-              <option value=\"USA\">USA (+1)</option>\r\n-              <option value=\"Germany\">Germany (+49)</option>\r\n-              <option value=\"UK\">UK (+44)</option>\r\n-              <!-- Diğer ülkeler eklenebilir -->\r\n-            </select>\r\n-          </div>\r\n-          <div class=\"form-group\">\r\n-            <label>Mobile phone number *</label>\r\n-            <input v-model=\"contact.phone\" type=\"tel\" required placeholder=\"Mobile phone number\" />\r\n-          </div>\r\n-          <button class=\"btn-primary big-btn\" type=\"submit\">Go to payment</button>\r\n-        </form>\r\n-        <form v-else class=\"checkout-form\" @submit.prevent=\"submitPayment\">\r\n-          <h2>Payment details</h2>\r\n-          <div class=\"form-group\">\r\n-            <label>Cardholder Name *</label>\r\n-            <input v-model=\"payment.cardName\" type=\"text\" required placeholder=\"Cardholder Name\" />\r\n-          </div>\r\n-          <div class=\"form-group\">\r\n-            <label>Card Number *</label>\r\n-            <input v-model=\"payment.cardNumber\" type=\"text\" required maxlength=\"19\" placeholder=\"1234 5678 9012 3456\" />\r\n-          </div>\r\n-          <div class=\"form-row\">\r\n-            <div class=\"form-group\">\r\n-              <label>Expiry *</label>\r\n-              <input v-model=\"payment.expiry\" type=\"text\" required maxlength=\"5\" placeholder=\"MM/YY\" />\r\n-            </div>\r\n-            <div class=\"form-group\">\r\n-              <label>CVC *</label>\r\n-              <input v-model=\"payment.cvc\" type=\"text\" required maxlength=\"4\" placeholder=\"CVC\" />\r\n-            </div>\r\n-          </div>\r\n-          <button class=\"btn-primary big-btn\" type=\"submit\">Pay now</button>\r\n-        </form>\r\n+        <CheckoutForm v-if=\"selectedTourStore.tour\" :tourDetails=\"selectedTourStore.tour\" />\r\n       </div>\r\n     </div>\r\n     <div class=\"checkout-summary\">\r\n-      <div class=\"summary-card\">\r\n+      <div class=\"summary-card\" v-if=\"selectedTourStore.tour\">\r\n         <div class=\"summary-title\">Order summary</div>\r\n         <div class=\"summary-tour\">\r\n-          <img class=\"summary-img\" :src=\"tour.image\" alt=\"Tour image\" />\r\n+          <img class=\"summary-img\" :src=\"selectedTourStore.tour.image\" alt=\"Tour image\" />\r\n           <div>\r\n-            <div class=\"tour-name\">{{ tour.name }}</div>\r\n-            <div class=\"tour-date\">{{ tour.date }}</div>\r\n-            <div class=\"tour-detail\">{{ tour.detail }}</div>\r\n+            <div class=\"tour-name\">{{ selectedTourStore.tour.title }}</div>\r\n+            <div class=\"tour-date\">{{ selectedTourStore.tour.date }}</div>\r\n+            <div class=\"tour-detail\">{{ selectedTourStore.tour.description }}</div>\r\n           </div>\r\n         </div>\r\n         <div class=\"summary-info\">\r\n-          <div><i class=\"fas fa-user\"></i> {{ tour.person }}</div>\r\n-          <div><i class=\"fas fa-star\"></i> {{ tour.rating }}</div>\r\n+          <div><i class=\"fas fa-user\"></i> {{ selectedTourStore.tour.participants }}</div>\r\n+          <div><i class=\"fas fa-star\"></i> {{ selectedTourStore.tour.rating }}</div>\r\n         </div>\r\n         <div class=\"summary-total\">\r\n           <div>Total</div>\r\n-          <div class=\"summary-price\">{{ tour.price }}</div>\r\n+          <div class=\"summary-price\">{{ selectedTourStore.tour.price }}</div>\r\n         </div>\r\n       </div>\r\n     </div>\r\n   </div>\r\n </template>\r\n \r\n <script setup>\r\n import { ref } from 'vue'\r\n+import { useSelectedTourStore } from '@/stores/selectedTour'\r\n+import CheckoutForm from '@/components/CheckoutForm.vue'\r\n \r\n const step = ref(1)\r\n const contact = ref({ name: '', email: '', country: 'Turkey', phone: '' })\r\n const payment = ref({ cardName: '', cardNumber: '', expiry: '', cvc: '' })\r\n \r\n-const tour = ref({\r\n-  image: 'https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=400&q=80',\r\n-  name: 'San Diego: Harbor Cruise',\r\n-  date: 'Friday, July 18, 2025 at 10:00 AM',\r\n-  detail: 'North Harbor Tour (1 Hour) • Language: English',\r\n-  person: '1 adult (Age 13 - 99)',\r\n-  rating: '4.6 (1,200)',\r\n-  price: '₺1,450.13'\r\n-})\r\n+const selectedTourStore = useSelectedTourStore()\r\n \r\n function goToPayment() {\r\n   step.value = 2\r\n }\r\n"
                },
                {
                    "date": 1751965984838,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -41,9 +41,9 @@\n </template>\r\n \r\n <script setup>\r\n import { ref } from 'vue'\r\n-import { useSelectedTourStore } from '@/stores/selectedTour'\r\n+import { useSelectedTourStore } from '../stores/selectedTour'\r\n import CheckoutForm from '@/components/CheckoutForm.vue'\r\n \r\n const step = ref(1)\r\n const contact = ref({ name: '', email: '', country: 'Turkey', phone: '' })\r\n"
                },
                {
                    "date": 1751973832498,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,9 +42,9 @@\n \r\n <script setup>\r\n import { ref } from 'vue'\r\n import { useSelectedTourStore } from '../stores/selectedTour'\r\n-import CheckoutForm from '@/components/CheckoutForm.vue'\r\n+import CheckoutForm from '../components/CheckoutForm.vue'\r\n \r\n const step = ref(1)\r\n const contact = ref({ name: '', email: '', country: 'Turkey', phone: '' })\r\n const payment = ref({ cardName: '', cardNumber: '', expiry: '', cvc: '' })\r\n"
                },
                {
                    "date": 1751980290026,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,21 +1,8 @@\n <template>\r\n   <div class=\"checkout-wrapper\">\r\n     <div class=\"checkout-main\">\r\n-      <div class=\"checkout-stepper\">\r\n-        <div :class=\"['step', {active: step === 1}]\">\r\n-          <span>1</span>\r\n-          <div>Contact</div>\r\n-        </div>\r\n-        <div class=\"step-line\"></div>\r\n-        <div :class=\"['step', {active: step === 2}]\">\r\n-          <span>2</span>\r\n-          <div>Payment</div>\r\n-        </div>\r\n-      </div>\r\n-      <div class=\"checkout-content\">\r\n-        <CheckoutForm v-if=\"selectedTourStore.tour\" :tourDetails=\"selectedTourStore.tour\" />\r\n-      </div>\r\n+      <CheckoutForm v-if=\"selectedTourStore.tour\" :tourDetails=\"selectedTourStore.tour\" />\r\n     </div>\r\n     <div class=\"checkout-summary\">\r\n       <div class=\"summary-card\" v-if=\"selectedTourStore.tour\">\r\n         <div class=\"summary-title\">Order summary</div>\r\n"
                },
                {
                    "date": 1751980423126,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -27,24 +27,11 @@\n   </div>\r\n </template>\r\n \r\n <script setup>\r\n-import { ref } from 'vue'\r\n import { useSelectedTourStore } from '../stores/selectedTour'\r\n import CheckoutForm from '../components/CheckoutForm.vue'\r\n-\r\n-const step = ref(1)\r\n-const contact = ref({ name: '', email: '', country: 'Turkey', phone: '' })\r\n-const payment = ref({ cardName: '', cardNumber: '', expiry: '', cvc: '' })\r\n-\r\n const selectedTourStore = useSelectedTourStore()\r\n-\r\n-function goToPayment() {\r\n-  step.value = 2\r\n-}\r\n-function submitPayment() {\r\n-  alert('Payment submitted!')\r\n-}\r\n </script>\r\n \r\n <style scoped>\r\n .checkout-wrapper {\r\n@@ -65,119 +52,8 @@\n   display: flex;\r\n   flex-direction: column;\r\n   align-items: stretch;\r\n }\r\n-.checkout-stepper {\r\n-  display: flex;\r\n-  align-items: center;\r\n-  justify-content: center;\r\n-  margin-bottom: 2.2rem;\r\n-  gap: 1.2rem;\r\n-}\r\n-.step {\r\n-  display: flex;\r\n-  flex-direction: column;\r\n-  align-items: center;\r\n-  color: #b0b8c1;\r\n-  font-weight: 600;\r\n-  font-size: 1.1rem;\r\n-}\r\n-.step.active {\r\n-  color: #223366;\r\n-}\r\n-.step span {\r\n-  width: 32px;\r\n-  height: 32px;\r\n-  border-radius: 50%;\r\n-  background: #f7fafd;\r\n-  border: 2.5px solid #b0b8c1;\r\n-  color: #b0b8c1;\r\n-  display: flex;\r\n-  align-items: center;\r\n-  justify-content: center;\r\n-  font-size: 1.2rem;\r\n-  margin-bottom: 0.3rem;\r\n-  font-weight: 700;\r\n-  transition: border 0.2s, color 0.2s;\r\n-}\r\n-.step.active span {\r\n-  border-color: #223366;\r\n-  color: #223366;\r\n-  background: #fff;\r\n-}\r\n-.step-line {\r\n-  width: 48px;\r\n-  height: 3px;\r\n-  background: #b0b8c1;\r\n-  border-radius: 2px;\r\n-}\r\n-.checkout-content {\r\n-  width: 100%;\r\n-}\r\n-.checkout-form {\r\n-  display: flex;\r\n-  flex-direction: column;\r\n-  gap: 1.3rem;\r\n-}\r\n-.checkout-form h2 {\r\n-  font-size: 1.5rem;\r\n-  font-weight: 700;\r\n-  margin-bottom: 0.5rem;\r\n-  color: #223366;\r\n-}\r\n-.secure-info {\r\n-  color: #0a8a4a;\r\n-  font-size: 1.08rem;\r\n-  margin-bottom: 0.7rem;\r\n-  display: flex;\r\n-  align-items: center;\r\n-  gap: 0.5rem;\r\n-  font-weight: 600;\r\n-}\r\n-.form-group {\r\n-  display: flex;\r\n-  flex-direction: column;\r\n-  gap: 0.3rem;\r\n-}\r\n-.form-group label {\r\n-  font-size: 1.08rem;\r\n-  color: #223366;\r\n-  font-weight: 600;\r\n-}\r\n-.form-group input,\r\n-.form-group select {\r\n-  padding: 0.95rem 1.1rem;\r\n-  border-radius: 8px;\r\n-  border: 2px solid #e0e6ed;\r\n-  font-size: 1.08rem;\r\n-  background: #f7fafd;\r\n-  outline: none;\r\n-  transition: border 0.2s;\r\n-}\r\n-.form-group input:focus,\r\n-.form-group select:focus {\r\n-  border-color: #223366;\r\n-}\r\n-.form-row {\r\n-  display: flex;\r\n-  gap: 1.2rem;\r\n-}\r\n-.big-btn {\r\n-  width: 100%;\r\n-  padding: 1.1rem 0;\r\n-  font-size: 1.18rem;\r\n-  border-radius: 32px;\r\n-  background: #0070eb;\r\n-  color: #fff;\r\n-  font-weight: 700;\r\n-  margin-top: 1.2rem;\r\n-  box-shadow: 0 2px 12px rgba(0,112,235,0.08);\r\n-  border: none;\r\n-  transition: background 0.2s;\r\n-}\r\n-.big-btn:hover {\r\n-  background: #005bb5;\r\n-}\r\n .checkout-summary {\r\n   width: 370px;\r\n   background: none;\r\n   display: flex;\r\n"
                },
                {
                    "date": 1751980577843,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,21 @@\n <template>\r\n   <div class=\"checkout-wrapper\">\r\n     <div class=\"checkout-main\">\r\n-      <CheckoutForm v-if=\"selectedTourStore.tour\" :tourDetails=\"selectedTourStore.tour\" />\r\n+      <div class=\"checkout-stepper\">\r\n+        <div :class=\"['step', {active: step === 1}]\">\r\n+          <span>1</span>\r\n+          <div>Contact</div>\r\n+        </div>\r\n+        <div class=\"step-line\"></div>\r\n+        <div :class=\"['step', {active: step === 2}]\">\r\n+          <span>2</span>\r\n+          <div>Payment</div>\r\n+        </div>\r\n+      </div>\r\n+      <div class=\"checkout-content\">\r\n+        <CheckoutForm v-if=\"selectedTourStore.tour\" :tourDetails=\"selectedTourStore.tour\" />\r\n+      </div>\r\n     </div>\r\n     <div class=\"checkout-summary\">\r\n       <div class=\"summary-card\" v-if=\"selectedTourStore.tour\">\r\n         <div class=\"summary-title\">Order summary</div>\r\n@@ -27,11 +40,24 @@\n   </div>\r\n </template>\r\n \r\n <script setup>\r\n+import { ref } from 'vue'\r\n import { useSelectedTourStore } from '../stores/selectedTour'\r\n import CheckoutForm from '../components/CheckoutForm.vue'\r\n+\r\n+const step = ref(1)\r\n+const contact = ref({ name: '', email: '', country: 'Turkey', phone: '' })\r\n+const payment = ref({ cardName: '', cardNumber: '', expiry: '', cvc: '' })\r\n+\r\n const selectedTourStore = useSelectedTourStore()\r\n+\r\n+function goToPayment() {\r\n+  step.value = 2\r\n+}\r\n+function submitPayment() {\r\n+  alert('Payment submitted!')\r\n+}\r\n </script>\r\n \r\n <style scoped>\r\n .checkout-wrapper {\r\n@@ -52,8 +78,119 @@\n   display: flex;\r\n   flex-direction: column;\r\n   align-items: stretch;\r\n }\r\n+.checkout-stepper {\r\n+  display: flex;\r\n+  align-items: center;\r\n+  justify-content: center;\r\n+  margin-bottom: 2.2rem;\r\n+  gap: 1.2rem;\r\n+}\r\n+.step {\r\n+  display: flex;\r\n+  flex-direction: column;\r\n+  align-items: center;\r\n+  color: #b0b8c1;\r\n+  font-weight: 600;\r\n+  font-size: 1.1rem;\r\n+}\r\n+.step.active {\r\n+  color: #223366;\r\n+}\r\n+.step span {\r\n+  width: 32px;\r\n+  height: 32px;\r\n+  border-radius: 50%;\r\n+  background: #f7fafd;\r\n+  border: 2.5px solid #b0b8c1;\r\n+  color: #b0b8c1;\r\n+  display: flex;\r\n+  align-items: center;\r\n+  justify-content: center;\r\n+  font-size: 1.2rem;\r\n+  margin-bottom: 0.3rem;\r\n+  font-weight: 700;\r\n+  transition: border 0.2s, color 0.2s;\r\n+}\r\n+.step.active span {\r\n+  border-color: #223366;\r\n+  color: #223366;\r\n+  background: #fff;\r\n+}\r\n+.step-line {\r\n+  width: 48px;\r\n+  height: 3px;\r\n+  background: #b0b8c1;\r\n+  border-radius: 2px;\r\n+}\r\n+.checkout-content {\r\n+  width: 100%;\r\n+}\r\n+.checkout-form {\r\n+  display: flex;\r\n+  flex-direction: column;\r\n+  gap: 1.3rem;\r\n+}\r\n+.checkout-form h2 {\r\n+  font-size: 1.5rem;\r\n+  font-weight: 700;\r\n+  margin-bottom: 0.5rem;\r\n+  color: #223366;\r\n+}\r\n+.secure-info {\r\n+  color: #0a8a4a;\r\n+  font-size: 1.08rem;\r\n+  margin-bottom: 0.7rem;\r\n+  display: flex;\r\n+  align-items: center;\r\n+  gap: 0.5rem;\r\n+  font-weight: 600;\r\n+}\r\n+.form-group {\r\n+  display: flex;\r\n+  flex-direction: column;\r\n+  gap: 0.3rem;\r\n+}\r\n+.form-group label {\r\n+  font-size: 1.08rem;\r\n+  color: #223366;\r\n+  font-weight: 600;\r\n+}\r\n+.form-group input,\r\n+.form-group select {\r\n+  padding: 0.95rem 1.1rem;\r\n+  border-radius: 8px;\r\n+  border: 2px solid #e0e6ed;\r\n+  font-size: 1.08rem;\r\n+  background: #f7fafd;\r\n+  outline: none;\r\n+  transition: border 0.2s;\r\n+}\r\n+.form-group input:focus,\r\n+.form-group select:focus {\r\n+  border-color: #223366;\r\n+}\r\n+.form-row {\r\n+  display: flex;\r\n+  gap: 1.2rem;\r\n+}\r\n+.big-btn {\r\n+  width: 100%;\r\n+  padding: 1.1rem 0;\r\n+  font-size: 1.18rem;\r\n+  border-radius: 32px;\r\n+  background: #0070eb;\r\n+  color: #fff;\r\n+  font-weight: 700;\r\n+  margin-top: 1.2rem;\r\n+  box-shadow: 0 2px 12px rgba(0,112,235,0.08);\r\n+  border: none;\r\n+  transition: background 0.2s;\r\n+}\r\n+.big-btn:hover {\r\n+  background: #005bb5;\r\n+}\r\n .checkout-summary {\r\n   width: 370px;\r\n   background: none;\r\n   display: flex;\r\n"
                },
                {
                    "date": 1751980620263,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,289 +0,0 @@\n-<template>\r\n-  <div class=\"checkout-wrapper\">\r\n-    <div class=\"checkout-main\">\r\n-      <div class=\"checkout-stepper\">\r\n-        <div :class=\"['step', {active: step === 1}]\">\r\n-          <span>1</span>\r\n-          <div>Contact</div>\r\n-        </div>\r\n-        <div class=\"step-line\"></div>\r\n-        <div :class=\"['step', {active: step === 2}]\">\r\n-          <span>2</span>\r\n-          <div>Payment</div>\r\n-        </div>\r\n-      </div>\r\n-      <div class=\"checkout-content\">\r\n-        <CheckoutForm v-if=\"selectedTourStore.tour\" :tourDetails=\"selectedTourStore.tour\" />\r\n-      </div>\r\n-    </div>\r\n-    <div class=\"checkout-summary\">\r\n-      <div class=\"summary-card\" v-if=\"selectedTourStore.tour\">\r\n-        <div class=\"summary-title\">Order summary</div>\r\n-        <div class=\"summary-tour\">\r\n-          <img class=\"summary-img\" :src=\"selectedTourStore.tour.image\" alt=\"Tour image\" />\r\n-          <div>\r\n-            <div class=\"tour-name\">{{ selectedTourStore.tour.title }}</div>\r\n-            <div class=\"tour-date\">{{ selectedTourStore.tour.date }}</div>\r\n-            <div class=\"tour-detail\">{{ selectedTourStore.tour.description }}</div>\r\n-          </div>\r\n-        </div>\r\n-        <div class=\"summary-info\">\r\n-          <div><i class=\"fas fa-user\"></i> {{ selectedTourStore.tour.participants }}</div>\r\n-          <div><i class=\"fas fa-star\"></i> {{ selectedTourStore.tour.rating }}</div>\r\n-        </div>\r\n-        <div class=\"summary-total\">\r\n-          <div>Total</div>\r\n-          <div class=\"summary-price\">{{ selectedTourStore.tour.price }}</div>\r\n-        </div>\r\n-      </div>\r\n-    </div>\r\n-  </div>\r\n-</template>\r\n-\r\n-<script setup>\r\n-import { ref } from 'vue'\r\n-import { useSelectedTourStore } from '../stores/selectedTour'\r\n-import CheckoutForm from '../components/CheckoutForm.vue'\r\n-\r\n-const step = ref(1)\r\n-const contact = ref({ name: '', email: '', country: 'Turkey', phone: '' })\r\n-const payment = ref({ cardName: '', cardNumber: '', expiry: '', cvc: '' })\r\n-\r\n-const selectedTourStore = useSelectedTourStore()\r\n-\r\n-function goToPayment() {\r\n-  step.value = 2\r\n-}\r\n-function submitPayment() {\r\n-  alert('Payment submitted!')\r\n-}\r\n-</script>\r\n-\r\n-<style scoped>\r\n-.checkout-wrapper {\r\n-  display: flex;\r\n-  justify-content: center;\r\n-  align-items: flex-start;\r\n-  gap: 2.5rem;\r\n-  padding: 2.5rem 0 3.5rem 0;\r\n-  background: #f7fafd;\r\n-  min-height: 100vh;\r\n-}\r\n-.checkout-main {\r\n-  width: 480px;\r\n-  background: #fff;\r\n-  border-radius: 18px;\r\n-  box-shadow: 0 4px 32px rgba(44,62,80,0.08);\r\n-  padding: 2.5rem 2.5rem 2rem 2.5rem;\r\n-  display: flex;\r\n-  flex-direction: column;\r\n-  align-items: stretch;\r\n-}\r\n-.checkout-stepper {\r\n-  display: flex;\r\n-  align-items: center;\r\n-  justify-content: center;\r\n-  margin-bottom: 2.2rem;\r\n-  gap: 1.2rem;\r\n-}\r\n-.step {\r\n-  display: flex;\r\n-  flex-direction: column;\r\n-  align-items: center;\r\n-  color: #b0b8c1;\r\n-  font-weight: 600;\r\n-  font-size: 1.1rem;\r\n-}\r\n-.step.active {\r\n-  color: #223366;\r\n-}\r\n-.step span {\r\n-  width: 32px;\r\n-  height: 32px;\r\n-  border-radius: 50%;\r\n-  background: #f7fafd;\r\n-  border: 2.5px solid #b0b8c1;\r\n-  color: #b0b8c1;\r\n-  display: flex;\r\n-  align-items: center;\r\n-  justify-content: center;\r\n-  font-size: 1.2rem;\r\n-  margin-bottom: 0.3rem;\r\n-  font-weight: 700;\r\n-  transition: border 0.2s, color 0.2s;\r\n-}\r\n-.step.active span {\r\n-  border-color: #223366;\r\n-  color: #223366;\r\n-  background: #fff;\r\n-}\r\n-.step-line {\r\n-  width: 48px;\r\n-  height: 3px;\r\n-  background: #b0b8c1;\r\n-  border-radius: 2px;\r\n-}\r\n-.checkout-content {\r\n-  width: 100%;\r\n-}\r\n-.checkout-form {\r\n-  display: flex;\r\n-  flex-direction: column;\r\n-  gap: 1.3rem;\r\n-}\r\n-.checkout-form h2 {\r\n-  font-size: 1.5rem;\r\n-  font-weight: 700;\r\n-  margin-bottom: 0.5rem;\r\n-  color: #223366;\r\n-}\r\n-.secure-info {\r\n-  color: #0a8a4a;\r\n-  font-size: 1.08rem;\r\n-  margin-bottom: 0.7rem;\r\n-  display: flex;\r\n-  align-items: center;\r\n-  gap: 0.5rem;\r\n-  font-weight: 600;\r\n-}\r\n-.form-group {\r\n-  display: flex;\r\n-  flex-direction: column;\r\n-  gap: 0.3rem;\r\n-}\r\n-.form-group label {\r\n-  font-size: 1.08rem;\r\n-  color: #223366;\r\n-  font-weight: 600;\r\n-}\r\n-.form-group input,\r\n-.form-group select {\r\n-  padding: 0.95rem 1.1rem;\r\n-  border-radius: 8px;\r\n-  border: 2px solid #e0e6ed;\r\n-  font-size: 1.08rem;\r\n-  background: #f7fafd;\r\n-  outline: none;\r\n-  transition: border 0.2s;\r\n-}\r\n-.form-group input:focus,\r\n-.form-group select:focus {\r\n-  border-color: #223366;\r\n-}\r\n-.form-row {\r\n-  display: flex;\r\n-  gap: 1.2rem;\r\n-}\r\n-.big-btn {\r\n-  width: 100%;\r\n-  padding: 1.1rem 0;\r\n-  font-size: 1.18rem;\r\n-  border-radius: 32px;\r\n-  background: #0070eb;\r\n-  color: #fff;\r\n-  font-weight: 700;\r\n-  margin-top: 1.2rem;\r\n-  box-shadow: 0 2px 12px rgba(0,112,235,0.08);\r\n-  border: none;\r\n-  transition: background 0.2s;\r\n-}\r\n-.big-btn:hover {\r\n-  background: #005bb5;\r\n-}\r\n-.checkout-summary {\r\n-  width: 370px;\r\n-  background: none;\r\n-  display: flex;\r\n-  flex-direction: column;\r\n-  align-items: stretch;\r\n-}\r\n-.summary-card {\r\n-  background: #fff;\r\n-  border-radius: 16px;\r\n-  box-shadow: 0 2px 16px rgba(44,62,80,0.10);\r\n-  padding: 2rem 2rem 1.5rem 2rem;\r\n-  display: flex;\r\n-  flex-direction: column;\r\n-  gap: 1.2rem;\r\n-}\r\n-.summary-title {\r\n-  font-size: 1.3rem;\r\n-  font-weight: 700;\r\n-  color: #223366;\r\n-  margin-bottom: 0.7rem;\r\n-}\r\n-.summary-tour {\r\n-  display: flex;\r\n-  gap: 1.1rem;\r\n-  align-items: center;\r\n-  margin-bottom: 0.7rem;\r\n-}\r\n-.summary-img {\r\n-  width: 64px;\r\n-  height: 64px;\r\n-  border-radius: 10px;\r\n-  object-fit: cover;\r\n-  box-shadow: 0 2px 8px rgba(44,62,80,0.08);\r\n-}\r\n-.tour-name {\r\n-  font-size: 1.08rem;\r\n-  font-weight: 700;\r\n-  color: #223366;\r\n-}\r\n-.tour-date {\r\n-  font-size: 1.01rem;\r\n-  color: #444;\r\n-}\r\n-.tour-detail {\r\n-  font-size: 0.98rem;\r\n-  color: #888;\r\n-}\r\n-.summary-info {\r\n-  display: flex;\r\n-  gap: 1.2rem;\r\n-  font-size: 1.01rem;\r\n-  color: #223366;\r\n-  align-items: center;\r\n-}\r\n-.summary-total {\r\n-  display: flex;\r\n-  justify-content: space-between;\r\n-  align-items: center;\r\n-  font-size: 1.18rem;\r\n-  font-weight: 700;\r\n-  color: #223366;\r\n-  margin-top: 1.2rem;\r\n-  border-top: 1.5px solid #e0e6ed;\r\n-  padding-top: 1.1rem;\r\n-}\r\n-.summary-price {\r\n-  color: #0070eb;\r\n-  font-size: 1.25rem;\r\n-  font-weight: 800;\r\n-}\r\n-@media (max-width: 1100px) {\r\n-  .checkout-wrapper {\r\n-    flex-direction: column;\r\n-    align-items: center;\r\n-    gap: 1.5rem;\r\n-    padding: 1.2rem 0 2.5rem 0;\r\n-  }\r\n-  .checkout-main {\r\n-    width: 98vw;\r\n-    max-width: 520px;\r\n-    margin-bottom: 2rem;\r\n-  }\r\n-  .checkout-summary {\r\n-    width: 98vw;\r\n-    max-width: 420px;\r\n-  }\r\n-}\r\n-@media (max-width: 600px) {\r\n-  .checkout-main {\r\n-    padding: 1.2rem 0.5rem 1.2rem 0.5rem;\r\n-  }\r\n-  .summary-card {\r\n-    padding: 1.2rem 0.5rem 1.2rem 0.5rem;\r\n-  }\r\n-}\r\n-</style> \n\\ No newline at end of file\n"
                },
                {
                    "date": 1751980674262,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,152 @@\n+<template>\r\n+  <div class=\"checkout-wrapper\">\r\n+    <div class=\"checkout-main\">\r\n+      <CheckoutForm v-if=\"selectedTourStore.tour\" :tourDetails=\"selectedTourStore.tour\" />\r\n+    </div>\r\n+    <div class=\"checkout-summary\">\r\n+      <div class=\"summary-card\" v-if=\"selectedTourStore.tour\">\r\n+        <div class=\"summary-title\">Order summary</div>\r\n+        <div class=\"summary-tour\">\r\n+          <img class=\"summary-img\" :src=\"selectedTourStore.tour.image\" alt=\"Tour image\" />\r\n+          <div>\r\n+            <div class=\"tour-name\">{{ selectedTourStore.tour.title }}</div>\r\n+            <div class=\"tour-date\">{{ selectedTourStore.tour.date }}</div>\r\n+            <div class=\"tour-detail\">{{ selectedTourStore.tour.description }}</div>\r\n+          </div>\r\n+        </div>\r\n+        <div class=\"summary-info\">\r\n+          <div><i class=\"fas fa-user\"></i> {{ selectedTourStore.tour.participants }}</div>\r\n+          <div><i class=\"fas fa-star\"></i> {{ selectedTourStore.tour.rating }}</div>\r\n+        </div>\r\n+        <div class=\"summary-total\">\r\n+          <div>Total</div>\r\n+          <div class=\"summary-price\">{{ selectedTourStore.tour.price }}</div>\r\n+        </div>\r\n+      </div>\r\n+    </div>\r\n+  </div>\r\n+</template>\r\n+\r\n+<script setup>\r\n+import { useSelectedTourStore } from '../stores/selectedTour'\r\n+import CheckoutForm from '../components/CheckoutForm.vue'\r\n+const selectedTourStore = useSelectedTourStore()\r\n+</script>\r\n+\r\n+<style scoped>\r\n+.checkout-wrapper {\r\n+  display: flex;\r\n+  justify-content: center;\r\n+  align-items: flex-start;\r\n+  gap: 2.5rem;\r\n+  padding: 2.5rem 0 3.5rem 0;\r\n+  background: #f7fafd;\r\n+  min-height: 100vh;\r\n+}\r\n+.checkout-main {\r\n+  width: 480px;\r\n+  background: #fff;\r\n+  border-radius: 18px;\r\n+  box-shadow: 0 4px 32px rgba(44,62,80,0.08);\r\n+  padding: 2.5rem 2.5rem 2rem 2.5rem;\r\n+  display: flex;\r\n+  flex-direction: column;\r\n+  align-items: stretch;\r\n+}\r\n+.checkout-summary {\r\n+  width: 370px;\r\n+  background: none;\r\n+  display: flex;\r\n+  flex-direction: column;\r\n+  align-items: stretch;\r\n+}\r\n+.summary-card {\r\n+  background: #fff;\r\n+  border-radius: 16px;\r\n+  box-shadow: 0 2px 16px rgba(44,62,80,0.10);\r\n+  padding: 2rem 2rem 1.5rem 2rem;\r\n+  display: flex;\r\n+  flex-direction: column;\r\n+  gap: 1.2rem;\r\n+}\r\n+.summary-title {\r\n+  font-size: 1.3rem;\r\n+  font-weight: 700;\r\n+  color: #223366;\r\n+  margin-bottom: 0.7rem;\r\n+}\r\n+.summary-tour {\r\n+  display: flex;\r\n+  gap: 1.1rem;\r\n+  align-items: center;\r\n+  margin-bottom: 0.7rem;\r\n+}\r\n+.summary-img {\r\n+  width: 64px;\r\n+  height: 64px;\r\n+  border-radius: 10px;\r\n+  object-fit: cover;\r\n+  box-shadow: 0 2px 8px rgba(44,62,80,0.08);\r\n+}\r\n+.tour-name {\r\n+  font-size: 1.08rem;\r\n+  font-weight: 700;\r\n+  color: #223366;\r\n+}\r\n+.tour-date {\r\n+  font-size: 1.01rem;\r\n+  color: #444;\r\n+}\r\n+.tour-detail {\r\n+  font-size: 0.98rem;\r\n+  color: #888;\r\n+}\r\n+.summary-info {\r\n+  display: flex;\r\n+  gap: 1.2rem;\r\n+  font-size: 1.01rem;\r\n+  color: #223366;\r\n+  align-items: center;\r\n+}\r\n+.summary-total {\r\n+  display: flex;\r\n+  justify-content: space-between;\r\n+  align-items: center;\r\n+  font-size: 1.18rem;\r\n+  font-weight: 700;\r\n+  color: #223366;\r\n+  margin-top: 1.2rem;\r\n+  border-top: 1.5px solid #e0e6ed;\r\n+  padding-top: 1.1rem;\r\n+}\r\n+.summary-price {\r\n+  color: #0070eb;\r\n+  font-size: 1.25rem;\r\n+  font-weight: 800;\r\n+}\r\n+@media (max-width: 1100px) {\r\n+  .checkout-wrapper {\r\n+    flex-direction: column;\r\n+    align-items: center;\r\n+    gap: 1.5rem;\r\n+    padding: 1.2rem 0 2.5rem 0;\r\n+  }\r\n+  .checkout-main {\r\n+    width: 98vw;\r\n+    max-width: 520px;\r\n+    margin-bottom: 2rem;\r\n+  }\r\n+  .checkout-summary {\r\n+    width: 98vw;\r\n+    max-width: 420px;\r\n+  }\r\n+}\r\n+@media (max-width: 600px) {\r\n+  .checkout-main {\r\n+    padding: 1.2rem 0.5rem 1.2rem 0.5rem;\r\n+  }\r\n+  .summary-card {\r\n+    padding: 1.2rem 0.5rem 1.2rem 0.5rem;\r\n+  }\r\n+}\r\n+</style>\r\n"
                },
                {
                    "date": 1751981561654,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,152 +1,646 @@\n <template>\r\n-  <div class=\"checkout-wrapper\">\r\n-    <div class=\"checkout-main\">\r\n-      <CheckoutForm v-if=\"selectedTourStore.tour\" :tourDetails=\"selectedTourStore.tour\" />\r\n+  <div class=\"checkout-main-layout\">\r\n+    <!-- SOL: Kişisel Bilgiler ve Ödeme Formu (Stepper) -->\r\n+    <div class=\"checkout-left\">\r\n+      <h2>Enter your personal details</h2>\r\n+      <div class=\"secure-checkout\">\r\n+        <i class=\"fas fa-lock\"></i> Checkout is fast and secure\r\n+      </div>\r\n+      <form @submit.prevent=\"handleStep\" class=\"checkout-form\">\r\n+        <template v-if=\"currentStep === 1\">\r\n+          <div class=\"form-group\">\r\n+            <label>Full name <span class=\"required\">*</span></label>\r\n+            <input v-model=\"name\" type=\"text\" required placeholder=\"Full Name\" />\r\n+          </div>\r\n+          <div class=\"form-group\">\r\n+            <label>Email <span class=\"required\">*</span></label>\r\n+            <input v-model=\"email\" type=\"email\" required placeholder=\"you@email.com\" />\r\n+          </div>\r\n+          <div class=\"form-group\">\r\n+            <label>Country <span class=\"required\">*</span></label>\r\n+            <select v-model=\"country\" class=\"country-select-fullwidth\">\r\n+              <option v-for=\"c in countries\" :key=\"c.iso\" :value=\"c.name\">\r\n+                {{ c.name }}\r\n+              </option>\r\n+            </select>\r\n+          </div>\r\n+          <div class=\"form-group phone-row\">\r\n+            <label>Mobile phone number <span class=\"required\">*</span></label>\r\n+            <div class=\"phone-input-group\">\r\n+              <div class=\"country-code-display\">\r\n+                <img :src=\"`https://flagsapi.com/${selectedCountry.iso}/flat/24.png`\" :alt=\"selectedCountry.name\" class=\"flag-option\" />\r\n+                <span>{{ selectedCountry.code }}</span>\r\n+              </div>\r\n+              <input\r\n+                v-model=\"phone\"\r\n+                type=\"tel\"\r\n+                required\r\n+                class=\"phone-input\"\r\n+                :placeholder=\"selectedCountry.iso === 'TR' ? '5xx xxx xx xx' : selectedCountry.iso === 'US' ? 'xxx xxx xxxx' : selectedCountry.iso === 'DE' ? '1xx xxxxxxx' : 'xx xx xx xx'\"\r\n+              />\r\n+            </div>\r\n+          </div>\r\n+          <div class=\"form-note\">We’ll only contact you with essential updates or changes to your booking</div>\r\n+          <button class=\"pay-btn\" type=\"submit\">Go to payment</button>\r\n+        </template>\r\n+        <template v-else>\r\n+          <div class=\"form-group\">\r\n+            <label>Name on Card <span class=\"required\">*</span></label>\r\n+            <input v-model=\"cardName\" type=\"text\" required placeholder=\"Name on Card\" />\r\n+          </div>\r\n+          <div class=\"form-group\">\r\n+            <label>Card Details</label>\r\n+            <div id=\"card-element\" class=\"stripe-card-element\"></div>\r\n+          </div>\r\n+          <button class=\"pay-btn\" :disabled=\"loading\" type=\"submit\">\r\n+            <span v-if=\"loading\">Processing...</span>\r\n+            <span v-else>Pay Now</span>\r\n+          </button>\r\n+          <div v-if=\"success\" class=\"success-message\">\r\n+            <i class=\"fas fa-check-circle\"></i> Payment Successful! Thank you.\r\n+          </div>\r\n+          <div v-if=\"errorMsg\" class=\"error-message\">\r\n+            <i class=\"fas fa-exclamation-circle\"></i> {{ errorMsg }}\r\n+          </div>\r\n+        </template>\r\n+      </form>\r\n     </div>\r\n-    <div class=\"checkout-summary\">\r\n-      <div class=\"summary-card\" v-if=\"selectedTourStore.tour\">\r\n-        <div class=\"summary-title\">Order summary</div>\r\n-        <div class=\"summary-tour\">\r\n-          <img class=\"summary-img\" :src=\"selectedTourStore.tour.image\" alt=\"Tour image\" />\r\n-          <div>\r\n-            <div class=\"tour-name\">{{ selectedTourStore.tour.title }}</div>\r\n-            <div class=\"tour-date\">{{ selectedTourStore.tour.date }}</div>\r\n-            <div class=\"tour-detail\">{{ selectedTourStore.tour.description }}</div>\r\n+    <!-- SAĞ: Order Summary -->\r\n+    <div class=\"checkout-right\">\r\n+      <div class=\"order-summary-panel\" v-if=\"selectedTourStore.tour\">\r\n+        <div class=\"order-summary-title\">Order summary</div>\r\n+        <div class=\"order-summary-product\">\r\n+          <img class=\"order-summary-img\" :src=\"selectedTourStore.tour.image\" :alt=\"selectedTourStore.tour.title\" />\r\n+          <div class=\"order-summary-product-info\">\r\n+            <div class=\"product-title\">{{ selectedTourStore.tour.title }}</div>\r\n+            <div class=\"product-detail\"><i class=\"fas fa-map-marker-alt\"></i> {{ selectedTourStore.tour.description }}</div>\r\n+            <div class=\"product-detail\" v-if=\"selectedTourStore.tour.bookingDate\"><i class=\"fas fa-calendar-alt\"></i> {{ selectedTourStore.tour.bookingDate }}</div>\r\n+            <div class=\"product-detail\"><i class=\"fas fa-user\"></i> {{ selectedTourStore.tour.participants }}</div>\r\n+            <div class=\"product-detail\" v-if=\"selectedTourStore.tour.email\"><i class=\"fas fa-envelope\"></i> {{ selectedTourStore.tour.email }}</div>\r\n+            <div class=\"product-link\"><a href=\"#\">Change date or participants</a></div>\r\n+            <div class=\"product-rating\">\r\n+              <span class=\"rating-badge\">H</span>\r\n+              <span class=\"stars\">★ {{ selectedTourStore.tour.rating }}</span>\r\n+              <span class=\"review-count\">({{ selectedTourStore.tour.reviewCount }})</span>\r\n+              <span class=\"rating-desc\">Loved by over {{ selectedTourStore.tour.reviewCount }} customers</span>\r\n+            </div>\r\n           </div>\r\n         </div>\r\n-        <div class=\"summary-info\">\r\n-          <div><i class=\"fas fa-user\"></i> {{ selectedTourStore.tour.participants }}</div>\r\n-          <div><i class=\"fas fa-star\"></i> {{ selectedTourStore.tour.rating }}</div>\r\n+        <div class=\"order-summary-benefits\">\r\n+          <div><i class=\"fas fa-check-circle\"></i> Free cancellation <span>Until 10:00 AM on July 17</span></div>\r\n+          <div><i class=\"fas fa-thumbs-up\"></i> Great value <span>Customers rated this {{ selectedTourStore.tour.rating }}/5 for value for money</span></div>\r\n         </div>\r\n-        <div class=\"summary-total\">\r\n-          <div>Total</div>\r\n-          <div class=\"summary-price\">{{ selectedTourStore.tour.price }}</div>\r\n+        <div class=\"order-summary-promo\">\r\n+          <a href=\"#\">Enter promo, credit, or gift code</a>\r\n         </div>\r\n+        <div class=\"order-summary-total-row\">\r\n+          <span>Total</span>\r\n+          <span class=\"order-summary-total\">{{ selectedTourStore.tour.price }}</span>\r\n+        </div>\r\n+        <div class=\"order-summary-taxes\">All taxes and fees included</div>\r\n       </div>\r\n     </div>\r\n   </div>\r\n </template>\r\n \r\n <script setup>\r\n+import { ref, onMounted, watch, computed } from 'vue'\r\n import { useSelectedTourStore } from '../stores/selectedTour'\r\n-import CheckoutForm from '../components/CheckoutForm.vue'\r\n+let stripe, elements, card\r\n+\r\n const selectedTourStore = useSelectedTourStore()\r\n+\r\n+// Tüm ülkeler ve kodları\r\n+const countries = [\r\n+  { name: 'Turkey', code: '+90', iso: 'TR' },\r\n+  { name: 'United States', code: '+1', iso: 'US' },\r\n+  { name: 'Germany', code: '+49', iso: 'DE' },\r\n+  { name: 'France', code: '+33', iso: 'FR' },\r\n+  { name: 'United Kingdom', code: '+44', iso: 'GB' },\r\n+  { name: 'Italy', code: '+39', iso: 'IT' },\r\n+  { name: 'Spain', code: '+34', iso: 'ES' },\r\n+  { name: 'Netherlands', code: '+31', iso: 'NL' },\r\n+  { name: 'Russia', code: '+7', iso: 'RU' },\r\n+  { name: 'Japan', code: '+81', iso: 'JP' },\r\n+  { name: 'China', code: '+86', iso: 'CN' },\r\n+  { name: 'India', code: '+91', iso: 'IN' },\r\n+  { name: 'Brazil', code: '+55', iso: 'BR' },\r\n+  { name: 'Canada', code: '+1', iso: 'CA' },\r\n+  { name: 'Australia', code: '+61', iso: 'AU' },\r\n+]\r\n+\r\n+const country = ref(countries[0].name)\r\n+const phone = ref('')\r\n+const selectedCountry = computed(() => countries.find(c => c.name === country.value) || countries[0])\r\n+\r\n+const name = ref('')\r\n+const email = ref(selectedTourStore.tour?.email || '')\r\n+const cardName = ref('')\r\n+const loading = ref(false)\r\n+const success = ref(false)\r\n+const errorMsg = ref('')\r\n+const currentStep = ref(1)\r\n+\r\n+onMounted(() => {\r\n+  watch(currentStep, (step) => {\r\n+    if (step === 2) {\r\n+      setTimeout(() => {\r\n+        if (!window.Stripe) {\r\n+          const script = document.createElement('script')\r\n+          script.src = 'https://js.stripe.com/v3/'\r\n+          script.onload = setupStripe\r\n+          document.head.appendChild(script)\r\n+        } else {\r\n+          setupStripe()\r\n+        }\r\n+      }, 0)\r\n+    }\r\n+  }, { immediate: true })\r\n+})\r\n+\r\n+function setupStripe() {\r\n+  if (card) return\r\n+  stripe = window.Stripe('pk_test_51N9...YOUR_PUBLIC_KEY...') // TODO: Replace with your real public key\r\n+  elements = stripe.elements()\r\n+  card = elements.create('card')\r\n+  card.mount('#card-element')\r\n+}\r\n+\r\n+const handleStep = async () => {\r\n+  if (currentStep.value === 1) {\r\n+    if (!name.value || !email.value || !country.value || !phone.value) return\r\n+    currentStep.value = 2\r\n+    return\r\n+  }\r\n+  loading.value = true\r\n+  errorMsg.value = ''\r\n+  success.value = false\r\n+  try {\r\n+    const { paymentMethod, error } = await stripe.createPaymentMethod({\r\n+      type: 'card',\r\n+      card: card,\r\n+      billing_details: {\r\n+        name: cardName.value,\r\n+        email: email.value\r\n+      }\r\n+    })\r\n+    if (error) {\r\n+      errorMsg.value = error.message\r\n+      loading.value = false\r\n+      return\r\n+    }\r\n+    setTimeout(() => {\r\n+      loading.value = false\r\n+      success.value = true\r\n+    }, 1200)\r\n+  } catch (err) {\r\n+    errorMsg.value = err.message || 'Payment failed.'\r\n+    loading.value = false\r\n+  }\r\n+}\r\n </script>\r\n \r\n <style scoped>\r\n-.checkout-wrapper {\r\n+/* CheckoutForm.vue'dan taşınan stiller */\r\n+.checkout-main-layout {\r\n   display: flex;\r\n+  gap: 64px;\r\n+  align-items: flex-start;\r\n   justify-content: center;\r\n-  align-items: flex-start;\r\n-  gap: 2.5rem;\r\n-  padding: 2.5rem 0 3.5rem 0;\r\n-  background: #f7fafd;\r\n-  min-height: 100vh;\r\n+  background: #f6f8fa;\r\n+  padding: 48px 0;\r\n }\r\n-.checkout-main {\r\n-  width: 480px;\r\n+.checkout-left {\r\n+  width: 600px;\r\n   background: #fff;\r\n-  border-radius: 18px;\r\n-  box-shadow: 0 4px 32px rgba(44,62,80,0.08);\r\n-  padding: 2.5rem 2.5rem 2rem 2.5rem;\r\n+  border-radius: 26px;\r\n+  box-shadow: 0 8px 32px rgba(44,62,80,0.10);\r\n+  padding: 36px 44px 24px 44px;\r\n+  font-family: 'Inter', 'Segoe UI', Arial, sans-serif;\r\n+}\r\n+.checkout-left h2 {\r\n+  color: #1a2a3a;\r\n+  font-size: 2.3rem;\r\n+  margin-bottom: 18px;\r\n+  font-weight: 900;\r\n+  text-align: left;\r\n+  letter-spacing: -1px;\r\n+}\r\n+.secure-checkout {\r\n+  color: #0a8a4a;\r\n+  font-size: 1.08rem;\r\n+  margin-bottom: 18px;\r\n   display: flex;\r\n+  align-items: center;\r\n+  gap: 8px;\r\n+  font-weight: 600;\r\n+}\r\n+.checkout-form {\r\n+  display: flex;\r\n   flex-direction: column;\r\n-  align-items: stretch;\r\n+  gap: 18px;\r\n }\r\n-.checkout-summary {\r\n-  width: 370px;\r\n-  background: none;\r\n+.form-group {\r\n   display: flex;\r\n   flex-direction: column;\r\n-  align-items: stretch;\r\n+  gap: 4px;\r\n }\r\n-.summary-card {\r\n+input, select {\r\n+  padding: 12px 16px;\r\n+  border-radius: 10px;\r\n+  border: 2px solid #e0e6ed;\r\n+  font-size: 1.08rem;\r\n+  background: #f7fafd;\r\n+  outline: none;\r\n+  transition: border 0.2s;\r\n+}\r\n+input:focus, select:focus {\r\n+  border-color: #0070eb;\r\n+}\r\n+.stripe-card-element {\r\n+  padding: 12px 16px;\r\n+  border-radius: 10px;\r\n+  border: 2px solid #e0e6ed;\r\n+  background: #f7fafd;\r\n+  margin-top: 4px;\r\n+}\r\n+.form-note {\r\n+  font-size: 0.97rem;\r\n+  color: #888;\r\n+  margin-bottom: 8px;\r\n+}\r\n+.required { color: #d7263d; }\r\n+.pay-btn {\r\n+  width: 100%;\r\n+  background: linear-gradient(90deg, #0070eb 60%, #00c6fb 100%);\r\n+  color: #fff;\r\n+  font-size: 1.15rem;\r\n+  font-weight: 800;\r\n+  border: none;\r\n+  border-radius: 32px;\r\n+  padding: 1.05rem 0;\r\n+  margin-top: 8px;\r\n+  cursor: pointer;\r\n+  transition: background 0.2s, box-shadow 0.2s;\r\n+  box-shadow: 0 2px 12px rgba(0,112,235,0.08);\r\n+  letter-spacing: 0.5px;\r\n+}\r\n+.pay-btn:hover {\r\n+  background: linear-gradient(90deg, #005bb5 60%, #00a6d6 100%);\r\n+  box-shadow: 0 4px 24px rgba(0,112,235,0.13);\r\n+}\r\n+.pay-btn:disabled {\r\n+  background: #aaa;\r\n+  cursor: not-allowed;\r\n+}\r\n+.success-message {\r\n+  color: #27ae60;\r\n+  text-align: center;\r\n+  margin-top: 16px;\r\n+  font-size: 1.1rem;\r\n+}\r\n+.error-message {\r\n+  color: #d7263d;\r\n+  text-align: center;\r\n+  margin-top: 12px;\r\n+  font-size: 1rem;\r\n+}\r\n+\r\n+.checkout-right {\r\n+  width: 480px;\r\n+  position: sticky;\r\n+  top: 48px;\r\n+}\r\n+.order-summary-panel {\r\n   background: #fff;\r\n-  border-radius: 16px;\r\n-  box-shadow: 0 2px 16px rgba(44,62,80,0.10);\r\n-  padding: 2rem 2rem 1.5rem 2rem;\r\n+  border-radius: 22px;\r\n+  box-shadow: 0 8px 32px rgba(44,62,80,0.10);\r\n+  padding: 36px 36px 22px 36px;\r\n+  font-family: 'Inter', 'Segoe UI', Arial, sans-serif;\r\n   display: flex;\r\n   flex-direction: column;\r\n-  gap: 1.2rem;\r\n+  gap: 18px;\r\n }\r\n-.summary-title {\r\n-  font-size: 1.3rem;\r\n-  font-weight: 700;\r\n-  color: #223366;\r\n-  margin-bottom: 0.7rem;\r\n+.order-summary-title {\r\n+  font-size: 1.45rem;\r\n+  font-weight: 900;\r\n+  margin-bottom: 18px;\r\n+  color: #1a2a3a;\r\n+  letter-spacing: -0.5px;\r\n }\r\n-.summary-tour {\r\n+.order-summary-product {\r\n   display: flex;\r\n-  gap: 1.1rem;\r\n-  align-items: center;\r\n-  margin-bottom: 0.7rem;\r\n+  gap: 22px;\r\n+  margin-bottom: 10px;\r\n+  align-items: flex-start;\r\n }\r\n-.summary-img {\r\n-  width: 64px;\r\n-  height: 64px;\r\n-  border-radius: 10px;\r\n+.order-summary-img {\r\n+  width: 88px;\r\n+  height: 88px;\r\n+  border-radius: 14px;\r\n   object-fit: cover;\r\n   box-shadow: 0 2px 8px rgba(44,62,80,0.08);\r\n }\r\n-.tour-name {\r\n-  font-size: 1.08rem;\r\n-  font-weight: 700;\r\n-  color: #223366;\r\n+.order-summary-product-info {\r\n+  flex: 1;\r\n+  display: flex;\r\n+  flex-direction: column;\r\n+  gap: 2px;\r\n }\r\n-.tour-date {\r\n-  font-size: 1.01rem;\r\n+.product-title {\r\n+  font-weight: 900;\r\n+  font-size: 1.18rem;\r\n+  margin-bottom: 2px;\r\n+  color: #1a2a3a;\r\n+}\r\n+.product-detail {\r\n+  font-size: 1.04rem;\r\n   color: #444;\r\n+  margin-bottom: 2px;\r\n+  display: flex;\r\n+  align-items: center;\r\n+  gap: 6px;\r\n }\r\n-.tour-detail {\r\n-  font-size: 0.98rem;\r\n-  color: #888;\r\n+.product-link {\r\n+  margin: 4px 0 2px 0;\r\n }\r\n-.summary-info {\r\n+.product-link a {\r\n+  color: #0070eb;\r\n+  font-size: 0.97rem;\r\n+  text-decoration: underline;\r\n+}\r\n+.product-rating {\r\n   display: flex;\r\n-  gap: 1.2rem;\r\n-  font-size: 1.01rem;\r\n-  color: #223366;\r\n   align-items: center;\r\n+  gap: 8px;\r\n+  margin-top: 4px;\r\n }\r\n-.summary-total {\r\n+.rating-badge {\r\n+  background: #0a8a4a;\r\n+  color: #fff;\r\n+  border-radius: 50%;\r\n+  width: 24px;\r\n+  height: 24px;\r\n   display: flex;\r\n-  justify-content: space-between;\r\n   align-items: center;\r\n-  font-size: 1.18rem;\r\n+  justify-content: center;\r\n+  font-weight: 800;\r\n+  font-size: 1.05rem;\r\n+}\r\n+.stars {\r\n+  color: #0a8a4a;\r\n   font-weight: 700;\r\n-  color: #223366;\r\n-  margin-top: 1.2rem;\r\n-  border-top: 1.5px solid #e0e6ed;\r\n-  padding-top: 1.1rem;\r\n }\r\n-.summary-price {\r\n+.review-count {\r\n+  color: #888;\r\n+  font-size: 0.97rem;\r\n+}\r\n+.rating-desc {\r\n+  color: #888;\r\n+  font-size: 0.97rem;\r\n+}\r\n+.order-summary-badge {\r\n+  display: inline-block;\r\n+  background: #ff385c;\r\n+  color: #fff;\r\n+  font-size: 0.93rem;\r\n+  font-weight: 700;\r\n+  border-radius: 8px;\r\n+  padding: 2px 10px;\r\n+  margin-bottom: 6px;\r\n+  margin-left: 4px;\r\n+  letter-spacing: 0.2px;\r\n+}\r\n+.order-summary-benefits {\r\n+  margin: 12px 0 8px 0;\r\n+  font-size: 1.01rem;\r\n+  color: #0a8a4a;\r\n+  display: flex;\r\n+  flex-direction: column;\r\n+  gap: 4px;\r\n+}\r\n+.order-summary-benefits i {\r\n+  color: #0a8a4a;\r\n+  margin-right: 6px;\r\n+}\r\n+.order-summary-benefits span {\r\n+  color: #222;\r\n+  font-weight: 400;\r\n+  margin-left: 6px;\r\n+}\r\n+.order-summary-promo {\r\n+  margin: 10px 0 10px 0;\r\n+}\r\n+.order-summary-promo a {\r\n   color: #0070eb;\r\n-  font-size: 1.25rem;\r\n-  font-weight: 800;\r\n+  font-size: 0.97rem;\r\n+  text-decoration: underline;\r\n }\r\n-@media (max-width: 1100px) {\r\n-  .checkout-wrapper {\r\n-    flex-direction: column;\r\n+.order-summary-total-row {\r\n+  display: flex;\r\n+  justify-content: space-between;\r\n+  font-size: 1.22rem;\r\n+  font-weight: 900;\r\n+  margin-top: 10px;\r\n+  letter-spacing: 0.2px;\r\n+}\r\n+.order-summary-total {\r\n+  color: #0070eb;\r\n+  font-size: 1.32rem;\r\n+  font-weight: 900;\r\n+}\r\n+.order-summary-taxes {\r\n+  color: #0a8a4a;\r\n+  font-size: 0.97rem;\r\n+  margin-top: 2px;\r\n+  text-align: right;\r\n+}\r\n+.phone-row {\r\n+  margin-bottom: 0;\r\n+}\r\n+.phone-input-group {\r\n+  display: flex;\r\n+  gap: 10px;\r\n+  align-items: stretch;\r\n+}\r\n+.country-code-display {\r\n+  display: flex;\r\n+  align-items: center;\r\n+  gap: 6px;\r\n+  background: #f7fafd;\r\n+  border: 2px solid #e0e6ed;\r\n+  border-radius: 10px;\r\n+  padding: 12px 16px;\r\n+  font-size: 1.08rem;\r\n+  min-width: 90px;\r\n+  font-weight: 600;\r\n+  height: 48px;\r\n+  box-sizing: border-box;\r\n+}\r\n+.flag-option {\r\n+  width: 22px;\r\n+  height: 16px;\r\n+  margin-right: 7px;\r\n+  vertical-align: middle;\r\n+  border-radius: 3px;\r\n+  box-shadow: 0 1px 3px rgba(0,0,0,0.07);\r\n+}\r\n+.country-select-row {\r\n+  margin-bottom: 0;\r\n+}\r\n+.country-select-flex {\r\n+  display: flex;\r\n+  align-items: center;\r\n+  gap: 8px;\r\n+}\r\n+.country-select-fullwidth {\r\n+  width: 100%;\r\n+  min-width: 0;\r\n+  box-sizing: border-box;\r\n+}\r\n+.phone-input {\r\n+  flex: 1;\r\n+  padding: 12px 16px;\r\n+  border-radius: 10px;\r\n+  border: 2px solid #e0e6ed;\r\n+  font-size: 1.08rem;\r\n+  background: #f7fafd;\r\n+  outline: none;\r\n+  transition: border 0.2s;\r\n+  height: 48px;\r\n+  box-sizing: border-box;\r\n+}\r\n+.phone-input:focus {\r\n+  border-color: #0070eb;\r\n+}\r\n+@media (max-width: 900px) {\r\n+  .checkout-modal {\r\n+    position: fixed;\r\n+    top: 0; left: 0; right: 0; bottom: 0;\r\n+    width: 100vw;\r\n+    height: 100vh;\r\n+    z-index: 9999;\r\n+    background: rgba(0,0,0,0.12);\r\n+    display: flex;\r\n     align-items: center;\r\n-    gap: 1.5rem;\r\n-    padding: 1.2rem 0 2.5rem 0;\r\n+    justify-content: center;\r\n   }\r\n-  .checkout-main {\r\n-    width: 98vw;\r\n-    max-width: 520px;\r\n-    margin-bottom: 2rem;\r\n+  .checkout-content {\r\n+    width: 100vw;\r\n+    max-width: 100vw;\r\n+    height: 100vh;\r\n+    max-height: 100vh;\r\n+    overflow-y: auto;\r\n+    background: #fff;\r\n+    border-radius: 0;\r\n+    box-shadow: none;\r\n+    padding: 0;\r\n+    display: flex;\r\n+    flex-direction: column;\r\n+    align-items: stretch;\r\n   }\r\n-  .checkout-summary {\r\n-    width: 98vw;\r\n-    max-width: 420px;\r\n+  .checkout-main-layout {\r\n+    flex-direction: column;\r\n+    align-items: stretch;\r\n+    gap: 0;\r\n+    padding: 0;\r\n+    min-height: 100vh;\r\n+    height: auto;\r\n+    overflow-y: auto;\r\n+    background: #fff !important;\r\n   }\r\n+  .checkout-left,\r\n+  .checkout-right,\r\n+  .order-summary-panel {\r\n+    width: 100vw !important;\r\n+    max-width: 100vw !important;\r\n+    border-radius: 0 !important;\r\n+    box-shadow: none !important;\r\n+    padding: 0.5rem 0.2rem !important;\r\n+    margin: 0 !important;\r\n+    background: #fff !important;\r\n+  }\r\n }\r\n @media (max-width: 600px) {\r\n-  .checkout-main {\r\n-    padding: 1.2rem 0.5rem 1.2rem 0.5rem;\r\n+  body, html {\r\n+    background: #fff !important;\r\n+    margin: 0 !important;\r\n+    padding: 0 !important;\r\n+    overflow-x: hidden !important;\r\n   }\r\n-  .summary-card {\r\n-    padding: 1.2rem 0.5rem 1.2rem 0.5rem;\r\n+  .checkout-main-layout {\r\n+    flex-direction: column !important;\r\n+    align-items: stretch !important;\r\n+    gap: 0 !important;\r\n+    padding: 0 !important;\r\n+    min-height: 100vh !important;\r\n+    width: 100vw !important;\r\n+    max-width: 100vw !important;\r\n+    background: #fff !important;\r\n+    box-sizing: border-box !important;\r\n   }\r\n+  .checkout-left,\r\n+  .checkout-right,\r\n+  .order-summary-panel {\r\n+    width: 100vw !important;\r\n+    max-width: 100vw !important;\r\n+    min-width: 0 !important;\r\n+    border-radius: 0 !important;\r\n+    box-shadow: none !important;\r\n+    padding: 0.5rem 0.2rem !important;\r\n+    margin: 0 !important;\r\n+    background: #fff !important;\r\n+    box-sizing: border-box !important;\r\n+  }\r\n+  .form-group,\r\n+  .country-select-fullwidth,\r\n+  .phone-input,\r\n+  .country-code-display,\r\n+  .pay-btn {\r\n+    width: 100% !important;\r\n+    max-width: 100vw !important;\r\n+    min-width: 0 !important;\r\n+    box-sizing: border-box !important;\r\n+    font-size: 1rem !important;\r\n+    padding-left: 0.2rem !important;\r\n+    padding-right: 0.2rem !important;\r\n+  }\r\n+  .order-summary-img {\r\n+    width: 44px !important;\r\n+    height: 44px !important;\r\n+    min-width: 32px !important;\r\n+    max-width: 44px !important;\r\n+  }\r\n+  .product-title,\r\n+  .order-summary-title {\r\n+    font-size: 1.08rem !important;\r\n+    word-break: break-word !important;\r\n+  }\r\n+  .pay-btn {\r\n+    font-size: 1.08rem !important;\r\n+    padding: 0.7rem 0 !important;\r\n+    margin-top: 0.5rem !important;\r\n+    border-radius: 12px !important;\r\n+  }\r\n+  .form-note {\r\n+    font-size: 0.9rem !important;\r\n+  }\r\n+  /* Scroll edilebilirlik için: */\r\n+  .checkout-modal,\r\n+  .checkout-content {\r\n+    width: 100vw !important;\r\n+    max-width: 100vw !important;\r\n+    height: 100vh !important;\r\n+    max-height: 100vh !important;\r\n+    overflow-y: auto !important;\r\n+    background: #fff !important;\r\n+    border-radius: 0 !important;\r\n+    box-shadow: none !important;\r\n+    padding: 0 !important;\r\n+    margin: 0 !important;\r\n+    display: flex !important;\r\n+    flex-direction: column !important;\r\n+    align-items: stretch !important;\r\n+  }\r\n }\r\n </style>\r\n"
                },
                {
                    "date": 1751982565147,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -72,28 +72,14 @@\n         <div class=\"order-summary-product\">\r\n           <img class=\"order-summary-img\" :src=\"selectedTourStore.tour.image\" :alt=\"selectedTourStore.tour.title\" />\r\n           <div class=\"order-summary-product-info\">\r\n             <div class=\"product-title\">{{ selectedTourStore.tour.title }}</div>\r\n-            <div class=\"product-detail\"><i class=\"fas fa-map-marker-alt\"></i> {{ selectedTourStore.tour.description }}</div>\r\n+            <div class=\"product-detail\">{{ selectedTourStore.tour.description }}</div>\r\n             <div class=\"product-detail\" v-if=\"selectedTourStore.tour.bookingDate\"><i class=\"fas fa-calendar-alt\"></i> {{ selectedTourStore.tour.bookingDate }}</div>\r\n             <div class=\"product-detail\"><i class=\"fas fa-user\"></i> {{ selectedTourStore.tour.participants }}</div>\r\n             <div class=\"product-detail\" v-if=\"selectedTourStore.tour.email\"><i class=\"fas fa-envelope\"></i> {{ selectedTourStore.tour.email }}</div>\r\n-            <div class=\"product-link\"><a href=\"#\">Change date or participants</a></div>\r\n-            <div class=\"product-rating\">\r\n-              <span class=\"rating-badge\">H</span>\r\n-              <span class=\"stars\">★ {{ selectedTourStore.tour.rating }}</span>\r\n-              <span class=\"review-count\">({{ selectedTourStore.tour.reviewCount }})</span>\r\n-              <span class=\"rating-desc\">Loved by over {{ selectedTourStore.tour.reviewCount }} customers</span>\r\n-            </div>\r\n           </div>\r\n         </div>\r\n-        <div class=\"order-summary-benefits\">\r\n-          <div><i class=\"fas fa-check-circle\"></i> Free cancellation <span>Until 10:00 AM on July 17</span></div>\r\n-          <div><i class=\"fas fa-thumbs-up\"></i> Great value <span>Customers rated this {{ selectedTourStore.tour.rating }}/5 for value for money</span></div>\r\n-        </div>\r\n-        <div class=\"order-summary-promo\">\r\n-          <a href=\"#\">Enter promo, credit, or gift code</a>\r\n-        </div>\r\n         <div class=\"order-summary-total-row\">\r\n           <span>Total</span>\r\n           <span class=\"order-summary-total\">{{ selectedTourStore.tour.price }}</span>\r\n         </div>\r\n@@ -204,20 +190,27 @@\n /* CheckoutForm.vue'dan taşınan stiller */\r\n .checkout-main-layout {\r\n   display: flex;\r\n   gap: 64px;\r\n-  align-items: flex-start;\r\n+  align-items: stretch;\r\n   justify-content: center;\r\n   background: #f6f8fa;\r\n   padding: 48px 0;\r\n+  min-height: 100vh;\r\n }\r\n-.checkout-left {\r\n-  width: 600px;\r\n+.checkout-left, .checkout-right {\r\n+  flex: 1 1 0;\r\n+  min-width: 340px;\r\n+  max-width: 600px;\r\n   background: #fff;\r\n   border-radius: 26px;\r\n   box-shadow: 0 8px 32px rgba(44,62,80,0.10);\r\n   padding: 36px 44px 24px 44px;\r\n   font-family: 'Inter', 'Segoe UI', Arial, sans-serif;\r\n+  display: flex;\r\n+  flex-direction: column;\r\n+  justify-content: flex-start;\r\n+  height: 100%;\r\n }\r\n .checkout-left h2 {\r\n   color: #1a2a3a;\r\n   font-size: 2.3rem;\r\n@@ -305,30 +298,14 @@\n   margin-top: 12px;\r\n   font-size: 1rem;\r\n }\r\n \r\n-.checkout-right {\r\n-  width: 480px;\r\n-  position: sticky;\r\n-  top: 48px;\r\n-}\r\n .order-summary-panel {\r\n-  background: #fff;\r\n-  border-radius: 22px;\r\n-  box-shadow: 0 8px 32px rgba(44,62,80,0.10);\r\n-  padding: 36px 36px 22px 36px;\r\n-  font-family: 'Inter', 'Segoe UI', Arial, sans-serif;\r\n   display: flex;\r\n   flex-direction: column;\r\n   gap: 18px;\r\n+  height: 100%;\r\n }\r\n-.order-summary-title {\r\n-  font-size: 1.45rem;\r\n-  font-weight: 900;\r\n-  margin-bottom: 18px;\r\n-  color: #1a2a3a;\r\n-  letter-spacing: -0.5px;\r\n-}\r\n .order-summary-product {\r\n   display: flex;\r\n   gap: 22px;\r\n   margin-bottom: 10px;\r\n@@ -360,83 +337,15 @@\n   display: flex;\r\n   align-items: center;\r\n   gap: 6px;\r\n }\r\n-.product-link {\r\n-  margin: 4px 0 2px 0;\r\n+.order-summary-title {\r\n+  font-size: 1.45rem;\r\n+  font-weight: 900;\r\n+  margin-bottom: 18px;\r\n+  color: #1a2a3a;\r\n+  letter-spacing: -0.5px;\r\n }\r\n-.product-link a {\r\n-  color: #0070eb;\r\n-  font-size: 0.97rem;\r\n-  text-decoration: underline;\r\n-}\r\n-.product-rating {\r\n-  display: flex;\r\n-  align-items: center;\r\n-  gap: 8px;\r\n-  margin-top: 4px;\r\n-}\r\n-.rating-badge {\r\n-  background: #0a8a4a;\r\n-  color: #fff;\r\n-  border-radius: 50%;\r\n-  width: 24px;\r\n-  height: 24px;\r\n-  display: flex;\r\n-  align-items: center;\r\n-  justify-content: center;\r\n-  font-weight: 800;\r\n-  font-size: 1.05rem;\r\n-}\r\n-.stars {\r\n-  color: #0a8a4a;\r\n-  font-weight: 700;\r\n-}\r\n-.review-count {\r\n-  color: #888;\r\n-  font-size: 0.97rem;\r\n-}\r\n-.rating-desc {\r\n-  color: #888;\r\n-  font-size: 0.97rem;\r\n-}\r\n-.order-summary-badge {\r\n-  display: inline-block;\r\n-  background: #ff385c;\r\n-  color: #fff;\r\n-  font-size: 0.93rem;\r\n-  font-weight: 700;\r\n-  border-radius: 8px;\r\n-  padding: 2px 10px;\r\n-  margin-bottom: 6px;\r\n-  margin-left: 4px;\r\n-  letter-spacing: 0.2px;\r\n-}\r\n-.order-summary-benefits {\r\n-  margin: 12px 0 8px 0;\r\n-  font-size: 1.01rem;\r\n-  color: #0a8a4a;\r\n-  display: flex;\r\n-  flex-direction: column;\r\n-  gap: 4px;\r\n-}\r\n-.order-summary-benefits i {\r\n-  color: #0a8a4a;\r\n-  margin-right: 6px;\r\n-}\r\n-.order-summary-benefits span {\r\n-  color: #222;\r\n-  font-weight: 400;\r\n-  margin-left: 6px;\r\n-}\r\n-.order-summary-promo {\r\n-  margin: 10px 0 10px 0;\r\n-}\r\n-.order-summary-promo a {\r\n-  color: #0070eb;\r\n-  font-size: 0.97rem;\r\n-  text-decoration: underline;\r\n-}\r\n .order-summary-total-row {\r\n   display: flex;\r\n   justify-content: space-between;\r\n   font-size: 1.22rem;\r\n@@ -513,53 +422,27 @@\n .phone-input:focus {\r\n   border-color: #0070eb;\r\n }\r\n @media (max-width: 900px) {\r\n-  .checkout-modal {\r\n-    position: fixed;\r\n-    top: 0; left: 0; right: 0; bottom: 0;\r\n-    width: 100vw;\r\n-    height: 100vh;\r\n-    z-index: 9999;\r\n-    background: rgba(0,0,0,0.12);\r\n-    display: flex;\r\n-    align-items: center;\r\n-    justify-content: center;\r\n-  }\r\n-  .checkout-content {\r\n-    width: 100vw;\r\n-    max-width: 100vw;\r\n-    height: 100vh;\r\n-    max-height: 100vh;\r\n-    overflow-y: auto;\r\n-    background: #fff;\r\n-    border-radius: 0;\r\n-    box-shadow: none;\r\n-    padding: 0;\r\n-    display: flex;\r\n-    flex-direction: column;\r\n-    align-items: stretch;\r\n-  }\r\n   .checkout-main-layout {\r\n     flex-direction: column;\r\n-    align-items: stretch;\r\n     gap: 0;\r\n-    padding: 0;\r\n+    padding: 0.5rem 0 1rem 0;\r\n     min-height: 100vh;\r\n-    height: auto;\r\n-    overflow-y: auto;\r\n-    background: #fff !important;\r\n+    width: 100vw;\r\n+    background: #fff;\r\n+    box-sizing: border-box;\r\n   }\r\n-  .checkout-left,\r\n-  .checkout-right,\r\n-  .order-summary-panel {\r\n-    width: 100vw !important;\r\n-    max-width: 100vw !important;\r\n-    border-radius: 0 !important;\r\n-    box-shadow: none !important;\r\n-    padding: 0.5rem 0.2rem !important;\r\n-    margin: 0 !important;\r\n-    background: #fff !important;\r\n+  .checkout-left, .checkout-right, .order-summary-panel {\r\n+    width: 100%;\r\n+    max-width: 100vw;\r\n+    border-radius: 10px;\r\n+    box-shadow: 0 2px 8px rgba(44,62,80,0.06);\r\n+    padding: 0.7rem 0.5rem;\r\n+    margin: 0 0 1rem 0;\r\n+    background: #fff;\r\n+    box-sizing: border-box;\r\n+    min-width: 0;\r\n   }\r\n }\r\n @media (max-width: 600px) {\r\n   body, html {\r\n"
                },
                {
                    "date": 1751983116376,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -73,9 +73,11 @@\n           <img class=\"order-summary-img\" :src=\"selectedTourStore.tour.image\" :alt=\"selectedTourStore.tour.title\" />\r\n           <div class=\"order-summary-product-info\">\r\n             <div class=\"product-title\">{{ selectedTourStore.tour.title }}</div>\r\n             <div class=\"product-detail\">{{ selectedTourStore.tour.description }}</div>\r\n-            <div class=\"product-detail\" v-if=\"selectedTourStore.tour.bookingDate\"><i class=\"fas fa-calendar-alt\"></i> {{ selectedTourStore.tour.bookingDate }}</div>\r\n+            <div class=\"product-detail\" v-if=\"selectedTourStore.tour.bookingDate\">\r\n+              <i class=\"fas fa-calendar-alt\"></i> {{ selectedTourStore.tour.bookingDate }}\r\n+            </div>\r\n             <div class=\"product-detail\"><i class=\"fas fa-user\"></i> {{ selectedTourStore.tour.participants }}</div>\r\n             <div class=\"product-detail\" v-if=\"selectedTourStore.tour.email\"><i class=\"fas fa-envelope\"></i> {{ selectedTourStore.tour.email }}</div>\r\n           </div>\r\n         </div>\r\n"
                },
                {
                    "date": 1751983448490,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -466,15 +466,15 @@\n   }\r\n   .checkout-left,\r\n   .checkout-right,\r\n   .order-summary-panel {\r\n-    width: 100vw !important;\r\n+    width: 100% !important;\r\n     max-width: 100vw !important;\r\n     min-width: 0 !important;\r\n-    border-radius: 0 !important;\r\n-    box-shadow: none !important;\r\n-    padding: 0.5rem 0.2rem !important;\r\n-    margin: 0 !important;\r\n+    border-radius: 10px !important;\r\n+    box-shadow: 0 2px 8px rgba(44,62,80,0.06) !important;\r\n+    padding: 0.7rem 0.5rem !important;\r\n+    margin: 0 12px 1rem 12px !important;\r\n     background: #fff !important;\r\n     box-sizing: border-box !important;\r\n   }\r\n   .form-group,\r\n"
                },
                {
                    "date": 1751984260428,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -456,9 +456,9 @@\n   .checkout-main-layout {\r\n     flex-direction: column !important;\r\n     align-items: stretch !important;\r\n     gap: 0 !important;\r\n-    padding: 0 !important;\r\n+    padding: 0 12px !important;\r\n     min-height: 100vh !important;\r\n     width: 100vw !important;\r\n     max-width: 100vw !important;\r\n     background: #fff !important;\r\n@@ -472,9 +472,9 @@\n     min-width: 0 !important;\r\n     border-radius: 10px !important;\r\n     box-shadow: 0 2px 8px rgba(44,62,80,0.06) !important;\r\n     padding: 0.7rem 0.5rem !important;\r\n-    margin: 0 12px 1rem 12px !important;\r\n+    margin: 0 auto 1rem auto !important;\r\n     background: #fff !important;\r\n     box-sizing: border-box !important;\r\n   }\r\n   .form-group,\r\n"
                },
                {
                    "date": 1751984518209,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -476,8 +476,12 @@\n     margin: 0 auto 1rem auto !important;\r\n     background: #fff !important;\r\n     box-sizing: border-box !important;\r\n   }\r\n+  .checkout-left h2 {\r\n+    font-size: 1.4rem !important;\r\n+    margin-bottom: 14px !important;\r\n+  }\r\n   .form-group,\r\n   .country-select-fullwidth,\r\n   .phone-input,\r\n   .country-code-display,\r\n"
                },
                {
                    "date": 1751985022488,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -266,9 +266,9 @@\n }\r\n .required { color: #d7263d; }\r\n .pay-btn {\r\n   width: 100%;\r\n-  background: linear-gradient(90deg, #0070eb 60%, #00c6fb 100%);\r\n+  background: linear-gradient(90deg, #FC6421 60%, #ff3401 100%);\r\n   color: #fff;\r\n   font-size: 1.15rem;\r\n   font-weight: 800;\r\n   border: none;\r\n@@ -280,9 +280,9 @@\n   box-shadow: 0 2px 12px rgba(0,112,235,0.08);\r\n   letter-spacing: 0.5px;\r\n }\r\n .pay-btn:hover {\r\n-  background: linear-gradient(90deg, #005bb5 60%, #00a6d6 100%);\r\n+  background: linear-gradient(90deg, #FC6421 60%, #ebebeb 100%);\r\n   box-shadow: 0 4px 24px rgba(0,112,235,0.13);\r\n }\r\n .pay-btn:disabled {\r\n   background: #aaa;\r\n"
                },
                {
                    "date": 1751985042104,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -280,9 +280,9 @@\n   box-shadow: 0 2px 12px rgba(0,112,235,0.08);\r\n   letter-spacing: 0.5px;\r\n }\r\n .pay-btn:hover {\r\n-  background: linear-gradient(90deg, #FC6421 60%, #ebebeb 100%);\r\n+  background: linear-gradient(90deg, #6d2101 60%, #ebebeb 100%);\r\n   box-shadow: 0 4px 24px rgba(0,112,235,0.13);\r\n }\r\n .pay-btn:disabled {\r\n   background: #aaa;\r\n"
                },
                {
                    "date": 1751985051876,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -280,9 +280,9 @@\n   box-shadow: 0 2px 12px rgba(0,112,235,0.08);\r\n   letter-spacing: 0.5px;\r\n }\r\n .pay-btn:hover {\r\n-  background: linear-gradient(90deg, #6d2101 60%, #ebebeb 100%);\r\n+  background: linear-gradient(90deg, #e74703 60%, #ebebeb 100%);\r\n   box-shadow: 0 4px 24px rgba(0,112,235,0.13);\r\n }\r\n .pay-btn:disabled {\r\n   background: #aaa;\r\n"
                },
                {
                    "date": 1751985067977,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,535 @@\n+<template>\r\n+  <div class=\"checkout-main-layout\">\r\n+    <!-- SOL: Kişisel Bilgiler ve Ödeme Formu (Stepper) -->\r\n+    <div class=\"checkout-left\">\r\n+      <h2>Enter your personal details</h2>\r\n+      <div class=\"secure-checkout\">\r\n+        <i class=\"fas fa-lock\"></i> Checkout is fast and secure\r\n+      </div>\r\n+      <form @submit.prevent=\"handleStep\" class=\"checkout-form\">\r\n+        <template v-if=\"currentStep === 1\">\r\n+          <div class=\"form-group\">\r\n+            <label>Full name <span class=\"required\">*</span></label>\r\n+            <input v-model=\"name\" type=\"text\" required placeholder=\"Full Name\" />\r\n+          </div>\r\n+          <div class=\"form-group\">\r\n+            <label>Email <span class=\"required\">*</span></label>\r\n+            <input v-model=\"email\" type=\"email\" required placeholder=\"you@email.com\" />\r\n+          </div>\r\n+          <div class=\"form-group\">\r\n+            <label>Country <span class=\"required\">*</span></label>\r\n+            <select v-model=\"country\" class=\"country-select-fullwidth\">\r\n+              <option v-for=\"c in countries\" :key=\"c.iso\" :value=\"c.name\">\r\n+                {{ c.name }}\r\n+              </option>\r\n+            </select>\r\n+          </div>\r\n+          <div class=\"form-group phone-row\">\r\n+            <label>Mobile phone number <span class=\"required\">*</span></label>\r\n+            <div class=\"phone-input-group\">\r\n+              <div class=\"country-code-display\">\r\n+                <img :src=\"`https://flagsapi.com/${selectedCountry.iso}/flat/24.png`\" :alt=\"selectedCountry.name\" class=\"flag-option\" />\r\n+                <span>{{ selectedCountry.code }}</span>\r\n+              </div>\r\n+              <input\r\n+                v-model=\"phone\"\r\n+                type=\"tel\"\r\n+                required\r\n+                class=\"phone-input\"\r\n+                :placeholder=\"selectedCountry.iso === 'TR' ? '5xx xxx xx xx' : selectedCountry.iso === 'US' ? 'xxx xxx xxxx' : selectedCountry.iso === 'DE' ? '1xx xxxxxxx' : 'xx xx xx xx'\"\r\n+              />\r\n+            </div>\r\n+          </div>\r\n+          <div class=\"form-note\">We’ll only contact you with essential updates or changes to your booking</div>\r\n+          <button class=\"pay-btn\" type=\"submit\">Go to payment</button>\r\n+        </template>\r\n+        <template v-else>\r\n+          <div class=\"form-group\">\r\n+            <label>Name on Card <span class=\"required\">*</span></label>\r\n+            <input v-model=\"cardName\" type=\"text\" required placeholder=\"Name on Card\" />\r\n+          </div>\r\n+          <div class=\"form-group\">\r\n+            <label>Card Details</label>\r\n+            <div id=\"card-element\" class=\"stripe-card-element\"></div>\r\n+          </div>\r\n+          <button class=\"pay-btn\" :disabled=\"loading\" type=\"submit\">\r\n+            <span v-if=\"loading\">Processing...</span>\r\n+            <span v-else>Pay Now</span>\r\n+          </button>\r\n+          <div v-if=\"success\" class=\"success-message\">\r\n+            <i class=\"fas fa-check-circle\"></i> Payment Successful! Thank you.\r\n+          </div>\r\n+          <div v-if=\"errorMsg\" class=\"error-message\">\r\n+            <i class=\"fas fa-exclamation-circle\"></i> {{ errorMsg }}\r\n+          </div>\r\n+        </template>\r\n+      </form>\r\n+    </div>\r\n+    <!-- SAĞ: Order Summary -->\r\n+    <div class=\"checkout-right\">\r\n+      <div class=\"order-summary-panel\" v-if=\"selectedTourStore.tour\">\r\n+        <div class=\"order-summary-title\">Order summary</div>\r\n+        <div class=\"order-summary-product\">\r\n+          <img class=\"order-summary-img\" :src=\"selectedTourStore.tour.image\" :alt=\"selectedTourStore.tour.title\" />\r\n+          <div class=\"order-summary-product-info\">\r\n+            <div class=\"product-title\">{{ selectedTourStore.tour.title }}</div>\r\n+            <div class=\"product-detail\">{{ selectedTourStore.tour.description }}</div>\r\n+            <div class=\"product-detail\" v-if=\"selectedTourStore.tour.bookingDate\">\r\n+              <i class=\"fas fa-calendar-alt\"></i> {{ selectedTourStore.tour.bookingDate }}\r\n+            </div>\r\n+            <div class=\"product-detail\"><i class=\"fas fa-user\"></i> {{ selectedTourStore.tour.participants }}</div>\r\n+            <div class=\"product-detail\" v-if=\"selectedTourStore.tour.email\"><i class=\"fas fa-envelope\"></i> {{ selectedTourStore.tour.email }}</div>\r\n+          </div>\r\n+        </div>\r\n+        <div class=\"order-summary-total-row\">\r\n+          <span>Total</span>\r\n+          <span class=\"order-summary-total\">{{ selectedTourStore.tour.price }}</span>\r\n+        </div>\r\n+        <div class=\"order-summary-taxes\">All taxes and fees included</div>\r\n+      </div>\r\n+    </div>\r\n+  </div>\r\n+</template>\r\n+\r\n+<script setup>\r\n+import { ref, onMounted, watch, computed } from 'vue'\r\n+import { useSelectedTourStore } from '../stores/selectedTour'\r\n+let stripe, elements, card\r\n+\r\n+const selectedTourStore = useSelectedTourStore()\r\n+\r\n+// Tüm ülkeler ve kodları\r\n+const countries = [\r\n+  { name: 'Turkey', code: '+90', iso: 'TR' },\r\n+  { name: 'United States', code: '+1', iso: 'US' },\r\n+  { name: 'Germany', code: '+49', iso: 'DE' },\r\n+  { name: 'France', code: '+33', iso: 'FR' },\r\n+  { name: 'United Kingdom', code: '+44', iso: 'GB' },\r\n+  { name: 'Italy', code: '+39', iso: 'IT' },\r\n+  { name: 'Spain', code: '+34', iso: 'ES' },\r\n+  { name: 'Netherlands', code: '+31', iso: 'NL' },\r\n+  { name: 'Russia', code: '+7', iso: 'RU' },\r\n+  { name: 'Japan', code: '+81', iso: 'JP' },\r\n+  { name: 'China', code: '+86', iso: 'CN' },\r\n+  { name: 'India', code: '+91', iso: 'IN' },\r\n+  { name: 'Brazil', code: '+55', iso: 'BR' },\r\n+  { name: 'Canada', code: '+1', iso: 'CA' },\r\n+  { name: 'Australia', code: '+61', iso: 'AU' },\r\n+]\r\n+\r\n+const country = ref(countries[0].name)\r\n+const phone = ref('')\r\n+const selectedCountry = computed(() => countries.find(c => c.name === country.value) || countries[0])\r\n+\r\n+const name = ref('')\r\n+const email = ref(selectedTourStore.tour?.email || '')\r\n+const cardName = ref('')\r\n+const loading = ref(false)\r\n+const success = ref(false)\r\n+const errorMsg = ref('')\r\n+const currentStep = ref(1)\r\n+\r\n+onMounted(() => {\r\n+  watch(currentStep, (step) => {\r\n+    if (step === 2) {\r\n+      setTimeout(() => {\r\n+        if (!window.Stripe) {\r\n+          const script = document.createElement('script')\r\n+          script.src = 'https://js.stripe.com/v3/'\r\n+          script.onload = setupStripe\r\n+          document.head.appendChild(script)\r\n+        } else {\r\n+          setupStripe()\r\n+        }\r\n+      }, 0)\r\n+    }\r\n+  }, { immediate: true })\r\n+})\r\n+\r\n+function setupStripe() {\r\n+  if (card) return\r\n+  stripe = window.Stripe('pk_test_51N9...YOUR_PUBLIC_KEY...') // TODO: Replace with your real public key\r\n+  elements = stripe.elements()\r\n+  card = elements.create('card')\r\n+  card.mount('#card-element')\r\n+}\r\n+\r\n+const handleStep = async () => {\r\n+  if (currentStep.value === 1) {\r\n+    if (!name.value || !email.value || !country.value || !phone.value) return\r\n+    currentStep.value = 2\r\n+    return\r\n+  }\r\n+  loading.value = true\r\n+  errorMsg.value = ''\r\n+  success.value = false\r\n+  try {\r\n+    const { paymentMethod, error } = await stripe.createPaymentMethod({\r\n+      type: 'card',\r\n+      card: card,\r\n+      billing_details: {\r\n+        name: cardName.value,\r\n+        email: email.value\r\n+      }\r\n+    })\r\n+    if (error) {\r\n+      errorMsg.value = error.message\r\n+      loading.value = false\r\n+      return\r\n+    }\r\n+    setTimeout(() => {\r\n+      loading.value = false\r\n+      success.value = true\r\n+    }, 1200)\r\n+  } catch (err) {\r\n+    errorMsg.value = err.message || 'Payment failed.'\r\n+    loading.value = false\r\n+  }\r\n+}\r\n+</script>\r\n+\r\n+<style scoped>\r\n+/* CheckoutForm.vue'dan taşınan stiller */\r\n+.checkout-main-layout {\r\n+  display: flex;\r\n+  gap: 64px;\r\n+  align-items: stretch;\r\n+  justify-content: center;\r\n+  background: #f6f8fa;\r\n+  padding: 48px 0;\r\n+  min-height: 100vh;\r\n+}\r\n+.checkout-left, .checkout-right {\r\n+  flex: 1 1 0;\r\n+  min-width: 340px;\r\n+  max-width: 600px;\r\n+  background: #fff;\r\n+  border-radius: 26px;\r\n+  box-shadow: 0 8px 32px rgba(44,62,80,0.10);\r\n+  padding: 36px 44px 24px 44px;\r\n+  font-family: 'Inter', 'Segoe UI', Arial, sans-serif;\r\n+  display: flex;\r\n+  flex-direction: column;\r\n+  justify-content: flex-start;\r\n+  height: 100%;\r\n+}\r\n+.checkout-left h2 {\r\n+  color: #1a2a3a;\r\n+  font-size: 2.3rem;\r\n+  margin-bottom: 18px;\r\n+  font-weight: 900;\r\n+  text-align: left;\r\n+  letter-spacing: -1px;\r\n+}\r\n+.secure-checkout {\r\n+  color: #0a8a4a;\r\n+  font-size: 1.08rem;\r\n+  margin-bottom: 18px;\r\n+  display: flex;\r\n+  align-items: center;\r\n+  gap: 8px;\r\n+  font-weight: 600;\r\n+}\r\n+.checkout-form {\r\n+  display: flex;\r\n+  flex-direction: column;\r\n+  gap: 18px;\r\n+}\r\n+.form-group {\r\n+  display: flex;\r\n+  flex-direction: column;\r\n+  gap: 4px;\r\n+}\r\n+input, select {\r\n+  padding: 12px 16px;\r\n+  border-radius: 10px;\r\n+  border: 2px solid #e0e6ed;\r\n+  font-size: 1.08rem;\r\n+  background: #f7fafd;\r\n+  outline: none;\r\n+  transition: border 0.2s;\r\n+}\r\n+input:focus, select:focus {\r\n+  border-color: #0070eb;\r\n+}\r\n+.stripe-card-element {\r\n+  padding: 12px 16px;\r\n+  border-radius: 10px;\r\n+  border: 2px solid #e0e6ed;\r\n+  background: #f7fafd;\r\n+  margin-top: 4px;\r\n+}\r\n+.form-note {\r\n+  font-size: 0.97rem;\r\n+  color: #888;\r\n+  margin-bottom: 8px;\r\n+}\r\n+.required { color: #d7263d; }\r\n+.pay-btn {\r\n+  width: 100%;\r\n+  background: linear-gradient(90deg, #FC6421 60%, #ff3401 100%);\r\n+  color: #fff;\r\n+  font-size: 1.15rem;\r\n+  font-weight: 800;\r\n+  border: none;\r\n+  border-radius: 32px;\r\n+  padding: 1.05rem 0;\r\n+  margin-top: 8px;\r\n+  cursor: pointer;\r\n+  transition: background 0.2s, box-shadow 0.2s;\r\n+  box-shadow: 0 2px 12px rgba(0,112,235,0.08);\r\n+  letter-spacing: 0.5px;\r\n+}\r\n+.pay-btn:hover {\r\n+  background: linear-gradient(90deg, #ff0000 60%, #ff0000 100%);\r\n+  box-shadow: 0 4px 24px rgba(0,112,235,0.13);\r\n+}\r\n+.pay-btn:disabled {\r\n+  background: #aaa;\r\n+  cursor: not-allowed;\r\n+}\r\n+.success-message {\r\n+  color: #27ae60;\r\n+  text-align: center;\r\n+  margin-top: 16px;\r\n+  font-size: 1.1rem;\r\n+}\r\n+.error-message {\r\n+  color: #d7263d;\r\n+  text-align: center;\r\n+  margin-top: 12px;\r\n+  font-size: 1rem;\r\n+}\r\n+\r\n+.order-summary-panel {\r\n+  display: flex;\r\n+  flex-direction: column;\r\n+  gap: 18px;\r\n+  height: 100%;\r\n+}\r\n+.order-summary-product {\r\n+  display: flex;\r\n+  gap: 22px;\r\n+  margin-bottom: 10px;\r\n+  align-items: flex-start;\r\n+}\r\n+.order-summary-img {\r\n+  width: 88px;\r\n+  height: 88px;\r\n+  border-radius: 14px;\r\n+  object-fit: cover;\r\n+  box-shadow: 0 2px 8px rgba(44,62,80,0.08);\r\n+}\r\n+.order-summary-product-info {\r\n+  flex: 1;\r\n+  display: flex;\r\n+  flex-direction: column;\r\n+  gap: 2px;\r\n+}\r\n+.product-title {\r\n+  font-weight: 900;\r\n+  font-size: 1.18rem;\r\n+  margin-bottom: 2px;\r\n+  color: #1a2a3a;\r\n+}\r\n+.product-detail {\r\n+  font-size: 1.04rem;\r\n+  color: #444;\r\n+  margin-bottom: 2px;\r\n+  display: flex;\r\n+  align-items: center;\r\n+  gap: 6px;\r\n+}\r\n+.order-summary-title {\r\n+  font-size: 1.45rem;\r\n+  font-weight: 900;\r\n+  margin-bottom: 18px;\r\n+  color: #1a2a3a;\r\n+  letter-spacing: -0.5px;\r\n+}\r\n+.order-summary-total-row {\r\n+  display: flex;\r\n+  justify-content: space-between;\r\n+  font-size: 1.22rem;\r\n+  font-weight: 900;\r\n+  margin-top: 10px;\r\n+  letter-spacing: 0.2px;\r\n+}\r\n+.order-summary-total {\r\n+  color: #0070eb;\r\n+  font-size: 1.32rem;\r\n+  font-weight: 900;\r\n+}\r\n+.order-summary-taxes {\r\n+  color: #0a8a4a;\r\n+  font-size: 0.97rem;\r\n+  margin-top: 2px;\r\n+  text-align: right;\r\n+}\r\n+.phone-row {\r\n+  margin-bottom: 0;\r\n+}\r\n+.phone-input-group {\r\n+  display: flex;\r\n+  gap: 10px;\r\n+  align-items: stretch;\r\n+}\r\n+.country-code-display {\r\n+  display: flex;\r\n+  align-items: center;\r\n+  gap: 6px;\r\n+  background: #f7fafd;\r\n+  border: 2px solid #e0e6ed;\r\n+  border-radius: 10px;\r\n+  padding: 12px 16px;\r\n+  font-size: 1.08rem;\r\n+  min-width: 90px;\r\n+  font-weight: 600;\r\n+  height: 48px;\r\n+  box-sizing: border-box;\r\n+}\r\n+.flag-option {\r\n+  width: 22px;\r\n+  height: 16px;\r\n+  margin-right: 7px;\r\n+  vertical-align: middle;\r\n+  border-radius: 3px;\r\n+  box-shadow: 0 1px 3px rgba(0,0,0,0.07);\r\n+}\r\n+.country-select-row {\r\n+  margin-bottom: 0;\r\n+}\r\n+.country-select-flex {\r\n+  display: flex;\r\n+  align-items: center;\r\n+  gap: 8px;\r\n+}\r\n+.country-select-fullwidth {\r\n+  width: 100%;\r\n+  min-width: 0;\r\n+  box-sizing: border-box;\r\n+}\r\n+.phone-input {\r\n+  flex: 1;\r\n+  padding: 12px 16px;\r\n+  border-radius: 10px;\r\n+  border: 2px solid #e0e6ed;\r\n+  font-size: 1.08rem;\r\n+  background: #f7fafd;\r\n+  outline: none;\r\n+  transition: border 0.2s;\r\n+  height: 48px;\r\n+  box-sizing: border-box;\r\n+}\r\n+.phone-input:focus {\r\n+  border-color: #0070eb;\r\n+}\r\n+@media (max-width: 900px) {\r\n+  .checkout-main-layout {\r\n+    flex-direction: column;\r\n+    gap: 0;\r\n+    padding: 0.5rem 0 1rem 0;\r\n+    min-height: 100vh;\r\n+    width: 100vw;\r\n+    background: #fff;\r\n+    box-sizing: border-box;\r\n+  }\r\n+  .checkout-left, .checkout-right, .order-summary-panel {\r\n+    width: 100%;\r\n+    max-width: 100vw;\r\n+    border-radius: 10px;\r\n+    box-shadow: 0 2px 8px rgba(44,62,80,0.06);\r\n+    padding: 0.7rem 0.5rem;\r\n+    margin: 0 0 1rem 0;\r\n+    background: #fff;\r\n+    box-sizing: border-box;\r\n+    min-width: 0;\r\n+  }\r\n+}\r\n+@media (max-width: 600px) {\r\n+  body, html {\r\n+    background: #fff !important;\r\n+    margin: 0 !important;\r\n+    padding: 0 !important;\r\n+    overflow-x: hidden !important;\r\n+  }\r\n+  .checkout-main-layout {\r\n+    flex-direction: column !important;\r\n+    align-items: stretch !important;\r\n+    gap: 0 !important;\r\n+    padding: 0 12px !important;\r\n+    min-height: 100vh !important;\r\n+    width: 100vw !important;\r\n+    max-width: 100vw !important;\r\n+    background: #fff !important;\r\n+    box-sizing: border-box !important;\r\n+  }\r\n+  .checkout-left,\r\n+  .checkout-right,\r\n+  .order-summary-panel {\r\n+    width: 100% !important;\r\n+    max-width: 100vw !important;\r\n+    min-width: 0 !important;\r\n+    border-radius: 10px !important;\r\n+    box-shadow: 0 2px 8px rgba(44,62,80,0.06) !important;\r\n+    padding: 0.7rem 0.5rem !important;\r\n+    margin: 0 auto 1rem auto !important;\r\n+    background: #fff !important;\r\n+    box-sizing: border-box !important;\r\n+  }\r\n+  .checkout-left h2 {\r\n+    font-size: 1.4rem !important;\r\n+    margin-bottom: 14px !important;\r\n+  }\r\n+  .form-group,\r\n+  .country-select-fullwidth,\r\n+  .phone-input,\r\n+  .country-code-display,\r\n+  .pay-btn {\r\n+    width: 100% !important;\r\n+    max-width: 100vw !important;\r\n+    min-width: 0 !important;\r\n+    box-sizing: border-box !important;\r\n+    font-size: 1rem !important;\r\n+    padding-left: 0.2rem !important;\r\n+    padding-right: 0.2rem !important;\r\n+  }\r\n+  .order-summary-img {\r\n+    width: 44px !important;\r\n+    height: 44px !important;\r\n+    min-width: 32px !important;\r\n+    max-width: 44px !important;\r\n+  }\r\n+  .product-title,\r\n+  .order-summary-title {\r\n+    font-size: 1.08rem !important;\r\n+    word-break: break-word !important;\r\n+  }\r\n+  .pay-btn {\r\n+    font-size: 1.08rem !important;\r\n+    padding: 0.7rem 0 !important;\r\n+    margin-top: 0.5rem !important;\r\n+    border-radius: 12px !important;\r\n+  }\r\n+  .form-note {\r\n+    font-size: 0.9rem !important;\r\n+  }\r\n+  /* Scroll edilebilirlik için: */\r\n+  .checkout-modal,\r\n+  .checkout-content {\r\n+    width: 100vw !important;\r\n+    max-width: 100vw !important;\r\n+    height: 100vh !important;\r\n+    max-height: 100vh !important;\r\n+    overflow-y: auto !important;\r\n+    background: #fff !important;\r\n+    border-radius: 0 !important;\r\n+    box-shadow: none !important;\r\n+    padding: 0 !important;\r\n+    margin: 0 !important;\r\n+    display: flex !important;\r\n+    flex-direction: column !important;\r\n+    align-items: stretch !important;\r\n+  }\r\n+}\r\n+</style>\r\n"
                },
                {
                    "date": 1751985121606,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -355,9 +355,9 @@\n   margin-top: 10px;\r\n   letter-spacing: 0.2px;\r\n }\r\n .order-summary-total {\r\n-  color: #0070eb;\r\n+  color: #FC6421;\r\n   font-size: 1.32rem;\r\n   font-weight: 900;\r\n }\r\n .order-summary-taxes {\r\n@@ -532,539 +532,4 @@\n     align-items: stretch !important;\r\n   }\r\n }\r\n </style>\r\n-<template>\r\n-  <div class=\"checkout-main-layout\">\r\n-    <!-- SOL: Kişisel Bilgiler ve Ödeme Formu (Stepper) -->\r\n-    <div class=\"checkout-left\">\r\n-      <h2>Enter your personal details</h2>\r\n-      <div class=\"secure-checkout\">\r\n-        <i class=\"fas fa-lock\"></i> Checkout is fast and secure\r\n-      </div>\r\n-      <form @submit.prevent=\"handleStep\" class=\"checkout-form\">\r\n-        <template v-if=\"currentStep === 1\">\r\n-          <div class=\"form-group\">\r\n-            <label>Full name <span class=\"required\">*</span></label>\r\n-            <input v-model=\"name\" type=\"text\" required placeholder=\"Full Name\" />\r\n-          </div>\r\n-          <div class=\"form-group\">\r\n-            <label>Email <span class=\"required\">*</span></label>\r\n-            <input v-model=\"email\" type=\"email\" required placeholder=\"you@email.com\" />\r\n-          </div>\r\n-          <div class=\"form-group\">\r\n-            <label>Country <span class=\"required\">*</span></label>\r\n-            <select v-model=\"country\" class=\"country-select-fullwidth\">\r\n-              <option v-for=\"c in countries\" :key=\"c.iso\" :value=\"c.name\">\r\n-                {{ c.name }}\r\n-              </option>\r\n-            </select>\r\n-          </div>\r\n-          <div class=\"form-group phone-row\">\r\n-            <label>Mobile phone number <span class=\"required\">*</span></label>\r\n-            <div class=\"phone-input-group\">\r\n-              <div class=\"country-code-display\">\r\n-                <img :src=\"`https://flagsapi.com/${selectedCountry.iso}/flat/24.png`\" :alt=\"selectedCountry.name\" class=\"flag-option\" />\r\n-                <span>{{ selectedCountry.code }}</span>\r\n-              </div>\r\n-              <input\r\n-                v-model=\"phone\"\r\n-                type=\"tel\"\r\n-                required\r\n-                class=\"phone-input\"\r\n-                :placeholder=\"selectedCountry.iso === 'TR' ? '5xx xxx xx xx' : selectedCountry.iso === 'US' ? 'xxx xxx xxxx' : selectedCountry.iso === 'DE' ? '1xx xxxxxxx' : 'xx xx xx xx'\"\r\n-              />\r\n-            </div>\r\n-          </div>\r\n-          <div class=\"form-note\">We’ll only contact you with essential updates or changes to your booking</div>\r\n-          <button class=\"pay-btn\" type=\"submit\">Go to payment</button>\r\n-        </template>\r\n-        <template v-else>\r\n-          <div class=\"form-group\">\r\n-            <label>Name on Card <span class=\"required\">*</span></label>\r\n-            <input v-model=\"cardName\" type=\"text\" required placeholder=\"Name on Card\" />\r\n-          </div>\r\n-          <div class=\"form-group\">\r\n-            <label>Card Details</label>\r\n-            <div id=\"card-element\" class=\"stripe-card-element\"></div>\r\n-          </div>\r\n-          <button class=\"pay-btn\" :disabled=\"loading\" type=\"submit\">\r\n-            <span v-if=\"loading\">Processing...</span>\r\n-            <span v-else>Pay Now</span>\r\n-          </button>\r\n-          <div v-if=\"success\" class=\"success-message\">\r\n-            <i class=\"fas fa-check-circle\"></i> Payment Successful! Thank you.\r\n-          </div>\r\n-          <div v-if=\"errorMsg\" class=\"error-message\">\r\n-            <i class=\"fas fa-exclamation-circle\"></i> {{ errorMsg }}\r\n-          </div>\r\n-        </template>\r\n-      </form>\r\n-    </div>\r\n-    <!-- SAĞ: Order Summary -->\r\n-    <div class=\"checkout-right\">\r\n-      <div class=\"order-summary-panel\" v-if=\"selectedTourStore.tour\">\r\n-        <div class=\"order-summary-title\">Order summary</div>\r\n-        <div class=\"order-summary-product\">\r\n-          <img class=\"order-summary-img\" :src=\"selectedTourStore.tour.image\" :alt=\"selectedTourStore.tour.title\" />\r\n-          <div class=\"order-summary-product-info\">\r\n-            <div class=\"product-title\">{{ selectedTourStore.tour.title }}</div>\r\n-            <div class=\"product-detail\">{{ selectedTourStore.tour.description }}</div>\r\n-            <div class=\"product-detail\" v-if=\"selectedTourStore.tour.bookingDate\">\r\n-              <i class=\"fas fa-calendar-alt\"></i> {{ selectedTourStore.tour.bookingDate }}\r\n-            </div>\r\n-            <div class=\"product-detail\"><i class=\"fas fa-user\"></i> {{ selectedTourStore.tour.participants }}</div>\r\n-            <div class=\"product-detail\" v-if=\"selectedTourStore.tour.email\"><i class=\"fas fa-envelope\"></i> {{ selectedTourStore.tour.email }}</div>\r\n-          </div>\r\n-        </div>\r\n-        <div class=\"order-summary-total-row\">\r\n-          <span>Total</span>\r\n-          <span class=\"order-summary-total\">{{ selectedTourStore.tour.price }}</span>\r\n-        </div>\r\n-        <div class=\"order-summary-taxes\">All taxes and fees included</div>\r\n-      </div>\r\n-    </div>\r\n-  </div>\r\n-</template>\r\n-\r\n-<script setup>\r\n-import { ref, onMounted, watch, computed } from 'vue'\r\n-import { useSelectedTourStore } from '../stores/selectedTour'\r\n-let stripe, elements, card\r\n-\r\n-const selectedTourStore = useSelectedTourStore()\r\n-\r\n-// Tüm ülkeler ve kodları\r\n-const countries = [\r\n-  { name: 'Turkey', code: '+90', iso: 'TR' },\r\n-  { name: 'United States', code: '+1', iso: 'US' },\r\n-  { name: 'Germany', code: '+49', iso: 'DE' },\r\n-  { name: 'France', code: '+33', iso: 'FR' },\r\n-  { name: 'United Kingdom', code: '+44', iso: 'GB' },\r\n-  { name: 'Italy', code: '+39', iso: 'IT' },\r\n-  { name: 'Spain', code: '+34', iso: 'ES' },\r\n-  { name: 'Netherlands', code: '+31', iso: 'NL' },\r\n-  { name: 'Russia', code: '+7', iso: 'RU' },\r\n-  { name: 'Japan', code: '+81', iso: 'JP' },\r\n-  { name: 'China', code: '+86', iso: 'CN' },\r\n-  { name: 'India', code: '+91', iso: 'IN' },\r\n-  { name: 'Brazil', code: '+55', iso: 'BR' },\r\n-  { name: 'Canada', code: '+1', iso: 'CA' },\r\n-  { name: 'Australia', code: '+61', iso: 'AU' },\r\n-]\r\n-\r\n-const country = ref(countries[0].name)\r\n-const phone = ref('')\r\n-const selectedCountry = computed(() => countries.find(c => c.name === country.value) || countries[0])\r\n-\r\n-const name = ref('')\r\n-const email = ref(selectedTourStore.tour?.email || '')\r\n-const cardName = ref('')\r\n-const loading = ref(false)\r\n-const success = ref(false)\r\n-const errorMsg = ref('')\r\n-const currentStep = ref(1)\r\n-\r\n-onMounted(() => {\r\n-  watch(currentStep, (step) => {\r\n-    if (step === 2) {\r\n-      setTimeout(() => {\r\n-        if (!window.Stripe) {\r\n-          const script = document.createElement('script')\r\n-          script.src = 'https://js.stripe.com/v3/'\r\n-          script.onload = setupStripe\r\n-          document.head.appendChild(script)\r\n-        } else {\r\n-          setupStripe()\r\n-        }\r\n-      }, 0)\r\n-    }\r\n-  }, { immediate: true })\r\n-})\r\n-\r\n-function setupStripe() {\r\n-  if (card) return\r\n-  stripe = window.Stripe('pk_test_51N9...YOUR_PUBLIC_KEY...') // TODO: Replace with your real public key\r\n-  elements = stripe.elements()\r\n-  card = elements.create('card')\r\n-  card.mount('#card-element')\r\n-}\r\n-\r\n-const handleStep = async () => {\r\n-  if (currentStep.value === 1) {\r\n-    if (!name.value || !email.value || !country.value || !phone.value) return\r\n-    currentStep.value = 2\r\n-    return\r\n-  }\r\n-  loading.value = true\r\n-  errorMsg.value = ''\r\n-  success.value = false\r\n-  try {\r\n-    const { paymentMethod, error } = await stripe.createPaymentMethod({\r\n-      type: 'card',\r\n-      card: card,\r\n-      billing_details: {\r\n-        name: cardName.value,\r\n-        email: email.value\r\n-      }\r\n-    })\r\n-    if (error) {\r\n-      errorMsg.value = error.message\r\n-      loading.value = false\r\n-      return\r\n-    }\r\n-    setTimeout(() => {\r\n-      loading.value = false\r\n-      success.value = true\r\n-    }, 1200)\r\n-  } catch (err) {\r\n-    errorMsg.value = err.message || 'Payment failed.'\r\n-    loading.value = false\r\n-  }\r\n-}\r\n-</script>\r\n-\r\n-<style scoped>\r\n-/* CheckoutForm.vue'dan taşınan stiller */\r\n-.checkout-main-layout {\r\n-  display: flex;\r\n-  gap: 64px;\r\n-  align-items: stretch;\r\n-  justify-content: center;\r\n-  background: #f6f8fa;\r\n-  padding: 48px 0;\r\n-  min-height: 100vh;\r\n-}\r\n-.checkout-left, .checkout-right {\r\n-  flex: 1 1 0;\r\n-  min-width: 340px;\r\n-  max-width: 600px;\r\n-  background: #fff;\r\n-  border-radius: 26px;\r\n-  box-shadow: 0 8px 32px rgba(44,62,80,0.10);\r\n-  padding: 36px 44px 24px 44px;\r\n-  font-family: 'Inter', 'Segoe UI', Arial, sans-serif;\r\n-  display: flex;\r\n-  flex-direction: column;\r\n-  justify-content: flex-start;\r\n-  height: 100%;\r\n-}\r\n-.checkout-left h2 {\r\n-  color: #1a2a3a;\r\n-  font-size: 2.3rem;\r\n-  margin-bottom: 18px;\r\n-  font-weight: 900;\r\n-  text-align: left;\r\n-  letter-spacing: -1px;\r\n-}\r\n-.secure-checkout {\r\n-  color: #0a8a4a;\r\n-  font-size: 1.08rem;\r\n-  margin-bottom: 18px;\r\n-  display: flex;\r\n-  align-items: center;\r\n-  gap: 8px;\r\n-  font-weight: 600;\r\n-}\r\n-.checkout-form {\r\n-  display: flex;\r\n-  flex-direction: column;\r\n-  gap: 18px;\r\n-}\r\n-.form-group {\r\n-  display: flex;\r\n-  flex-direction: column;\r\n-  gap: 4px;\r\n-}\r\n-input, select {\r\n-  padding: 12px 16px;\r\n-  border-radius: 10px;\r\n-  border: 2px solid #e0e6ed;\r\n-  font-size: 1.08rem;\r\n-  background: #f7fafd;\r\n-  outline: none;\r\n-  transition: border 0.2s;\r\n-}\r\n-input:focus, select:focus {\r\n-  border-color: #0070eb;\r\n-}\r\n-.stripe-card-element {\r\n-  padding: 12px 16px;\r\n-  border-radius: 10px;\r\n-  border: 2px solid #e0e6ed;\r\n-  background: #f7fafd;\r\n-  margin-top: 4px;\r\n-}\r\n-.form-note {\r\n-  font-size: 0.97rem;\r\n-  color: #888;\r\n-  margin-bottom: 8px;\r\n-}\r\n-.required { color: #d7263d; }\r\n-.pay-btn {\r\n-  width: 100%;\r\n-  background: linear-gradient(90deg, #FC6421 60%, #ff3401 100%);\r\n-  color: #fff;\r\n-  font-size: 1.15rem;\r\n-  font-weight: 800;\r\n-  border: none;\r\n-  border-radius: 32px;\r\n-  padding: 1.05rem 0;\r\n-  margin-top: 8px;\r\n-  cursor: pointer;\r\n-  transition: background 0.2s, box-shadow 0.2s;\r\n-  box-shadow: 0 2px 12px rgba(0,112,235,0.08);\r\n-  letter-spacing: 0.5px;\r\n-}\r\n-.pay-btn:hover {\r\n-  background: linear-gradient(90deg, #e74703 60%, #ebebeb 100%);\r\n-  box-shadow: 0 4px 24px rgba(0,112,235,0.13);\r\n-}\r\n-.pay-btn:disabled {\r\n-  background: #aaa;\r\n-  cursor: not-allowed;\r\n-}\r\n-.success-message {\r\n-  color: #27ae60;\r\n-  text-align: center;\r\n-  margin-top: 16px;\r\n-  font-size: 1.1rem;\r\n-}\r\n-.error-message {\r\n-  color: #d7263d;\r\n-  text-align: center;\r\n-  margin-top: 12px;\r\n-  font-size: 1rem;\r\n-}\r\n-\r\n-.order-summary-panel {\r\n-  display: flex;\r\n-  flex-direction: column;\r\n-  gap: 18px;\r\n-  height: 100%;\r\n-}\r\n-.order-summary-product {\r\n-  display: flex;\r\n-  gap: 22px;\r\n-  margin-bottom: 10px;\r\n-  align-items: flex-start;\r\n-}\r\n-.order-summary-img {\r\n-  width: 88px;\r\n-  height: 88px;\r\n-  border-radius: 14px;\r\n-  object-fit: cover;\r\n-  box-shadow: 0 2px 8px rgba(44,62,80,0.08);\r\n-}\r\n-.order-summary-product-info {\r\n-  flex: 1;\r\n-  display: flex;\r\n-  flex-direction: column;\r\n-  gap: 2px;\r\n-}\r\n-.product-title {\r\n-  font-weight: 900;\r\n-  font-size: 1.18rem;\r\n-  margin-bottom: 2px;\r\n-  color: #1a2a3a;\r\n-}\r\n-.product-detail {\r\n-  font-size: 1.04rem;\r\n-  color: #444;\r\n-  margin-bottom: 2px;\r\n-  display: flex;\r\n-  align-items: center;\r\n-  gap: 6px;\r\n-}\r\n-.order-summary-title {\r\n-  font-size: 1.45rem;\r\n-  font-weight: 900;\r\n-  margin-bottom: 18px;\r\n-  color: #1a2a3a;\r\n-  letter-spacing: -0.5px;\r\n-}\r\n-.order-summary-total-row {\r\n-  display: flex;\r\n-  justify-content: space-between;\r\n-  font-size: 1.22rem;\r\n-  font-weight: 900;\r\n-  margin-top: 10px;\r\n-  letter-spacing: 0.2px;\r\n-}\r\n-.order-summary-total {\r\n-  color: #0070eb;\r\n-  font-size: 1.32rem;\r\n-  font-weight: 900;\r\n-}\r\n-.order-summary-taxes {\r\n-  color: #0a8a4a;\r\n-  font-size: 0.97rem;\r\n-  margin-top: 2px;\r\n-  text-align: right;\r\n-}\r\n-.phone-row {\r\n-  margin-bottom: 0;\r\n-}\r\n-.phone-input-group {\r\n-  display: flex;\r\n-  gap: 10px;\r\n-  align-items: stretch;\r\n-}\r\n-.country-code-display {\r\n-  display: flex;\r\n-  align-items: center;\r\n-  gap: 6px;\r\n-  background: #f7fafd;\r\n-  border: 2px solid #e0e6ed;\r\n-  border-radius: 10px;\r\n-  padding: 12px 16px;\r\n-  font-size: 1.08rem;\r\n-  min-width: 90px;\r\n-  font-weight: 600;\r\n-  height: 48px;\r\n-  box-sizing: border-box;\r\n-}\r\n-.flag-option {\r\n-  width: 22px;\r\n-  height: 16px;\r\n-  margin-right: 7px;\r\n-  vertical-align: middle;\r\n-  border-radius: 3px;\r\n-  box-shadow: 0 1px 3px rgba(0,0,0,0.07);\r\n-}\r\n-.country-select-row {\r\n-  margin-bottom: 0;\r\n-}\r\n-.country-select-flex {\r\n-  display: flex;\r\n-  align-items: center;\r\n-  gap: 8px;\r\n-}\r\n-.country-select-fullwidth {\r\n-  width: 100%;\r\n-  min-width: 0;\r\n-  box-sizing: border-box;\r\n-}\r\n-.phone-input {\r\n-  flex: 1;\r\n-  padding: 12px 16px;\r\n-  border-radius: 10px;\r\n-  border: 2px solid #e0e6ed;\r\n-  font-size: 1.08rem;\r\n-  background: #f7fafd;\r\n-  outline: none;\r\n-  transition: border 0.2s;\r\n-  height: 48px;\r\n-  box-sizing: border-box;\r\n-}\r\n-.phone-input:focus {\r\n-  border-color: #0070eb;\r\n-}\r\n-@media (max-width: 900px) {\r\n-  .checkout-main-layout {\r\n-    flex-direction: column;\r\n-    gap: 0;\r\n-    padding: 0.5rem 0 1rem 0;\r\n-    min-height: 100vh;\r\n-    width: 100vw;\r\n-    background: #fff;\r\n-    box-sizing: border-box;\r\n-  }\r\n-  .checkout-left, .checkout-right, .order-summary-panel {\r\n-    width: 100%;\r\n-    max-width: 100vw;\r\n-    border-radius: 10px;\r\n-    box-shadow: 0 2px 8px rgba(44,62,80,0.06);\r\n-    padding: 0.7rem 0.5rem;\r\n-    margin: 0 0 1rem 0;\r\n-    background: #fff;\r\n-    box-sizing: border-box;\r\n-    min-width: 0;\r\n-  }\r\n-}\r\n-@media (max-width: 600px) {\r\n-  body, html {\r\n-    background: #fff !important;\r\n-    margin: 0 !important;\r\n-    padding: 0 !important;\r\n-    overflow-x: hidden !important;\r\n-  }\r\n-  .checkout-main-layout {\r\n-    flex-direction: column !important;\r\n-    align-items: stretch !important;\r\n-    gap: 0 !important;\r\n-    padding: 0 12px !important;\r\n-    min-height: 100vh !important;\r\n-    width: 100vw !important;\r\n-    max-width: 100vw !important;\r\n-    background: #fff !important;\r\n-    box-sizing: border-box !important;\r\n-  }\r\n-  .checkout-left,\r\n-  .checkout-right,\r\n-  .order-summary-panel {\r\n-    width: 100% !important;\r\n-    max-width: 100vw !important;\r\n-    min-width: 0 !important;\r\n-    border-radius: 10px !important;\r\n-    box-shadow: 0 2px 8px rgba(44,62,80,0.06) !important;\r\n-    padding: 0.7rem 0.5rem !important;\r\n-    margin: 0 auto 1rem auto !important;\r\n-    background: #fff !important;\r\n-    box-sizing: border-box !important;\r\n-  }\r\n-  .checkout-left h2 {\r\n-    font-size: 1.4rem !important;\r\n-    margin-bottom: 14px !important;\r\n-  }\r\n-  .form-group,\r\n-  .country-select-fullwidth,\r\n-  .phone-input,\r\n-  .country-code-display,\r\n-  .pay-btn {\r\n-    width: 100% !important;\r\n-    max-width: 100vw !important;\r\n-    min-width: 0 !important;\r\n-    box-sizing: border-box !important;\r\n-    font-size: 1rem !important;\r\n-    padding-left: 0.2rem !important;\r\n-    padding-right: 0.2rem !important;\r\n-  }\r\n-  .order-summary-img {\r\n-    width: 44px !important;\r\n-    height: 44px !important;\r\n-    min-width: 32px !important;\r\n-    max-width: 44px !important;\r\n-  }\r\n-  .product-title,\r\n-  .order-summary-title {\r\n-    font-size: 1.08rem !important;\r\n-    word-break: break-word !important;\r\n-  }\r\n-  .pay-btn {\r\n-    font-size: 1.08rem !important;\r\n-    padding: 0.7rem 0 !important;\r\n-    margin-top: 0.5rem !important;\r\n-    border-radius: 12px !important;\r\n-  }\r\n-  .form-note {\r\n-    font-size: 0.9rem !important;\r\n-  }\r\n-  /* Scroll edilebilirlik için: */\r\n-  .checkout-modal,\r\n-  .checkout-content {\r\n-    width: 100vw !important;\r\n-    max-width: 100vw !important;\r\n-    height: 100vh !important;\r\n-    max-height: 100vh !important;\r\n-    overflow-y: auto !important;\r\n-    background: #fff !important;\r\n-    border-radius: 0 !important;\r\n-    box-shadow: none !important;\r\n-    padding: 0 !important;\r\n-    margin: 0 !important;\r\n-    display: flex !important;\r\n-    flex-direction: column !important;\r\n-    align-items: stretch !important;\r\n-  }\r\n-}\r\n-</style>\r\n"
                },
                {
                    "date": 1751985267130,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -530,6 +530,17 @@\n     display: flex !important;\r\n     flex-direction: column !important;\r\n     align-items: stretch !important;\r\n   }\r\n+  .country-code-display {\r\n+    min-width: 48px !important;\r\n+    padding: 8px 8px !important;\r\n+    font-size: 0.98rem !important;\r\n+  }\r\n+  .phone-input {\r\n+    flex: 2 1 0 !important;\r\n+    width: 100% !important;\r\n+    font-size: 1.08rem !important;\r\n+    padding: 12px 12px !important;\r\n+  }\r\n }\r\n </style>\r\n"
                },
                {
                    "date": 1751985525828,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -530,15 +530,24 @@\n     display: flex !important;\r\n     flex-direction: column !important;\r\n     align-items: stretch !important;\r\n   }\r\n+  .phone-input-group {\r\n+    display: flex !important;\r\n+    flex-direction: row !important;\r\n+    align-items: stretch !important;\r\n+    width: 100% !important;\r\n+    gap: 6px !important;\r\n+  }\r\n   .country-code-display {\r\n+    flex: 0 0 auto !important;\r\n     min-width: 48px !important;\r\n     padding: 8px 8px !important;\r\n     font-size: 0.98rem !important;\r\n   }\r\n   .phone-input {\r\n-    flex: 2 1 0 !important;\r\n+    flex: 1 1 0 !important;\r\n+    min-width: 0 !important;\r\n     width: 100% !important;\r\n     font-size: 1.08rem !important;\r\n     padding: 12px 12px !important;\r\n   }\r\n"
                },
                {
                    "date": 1751985651329,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -539,17 +539,17 @@\n     gap: 6px !important;\r\n   }\r\n   .country-code-display {\r\n     flex: 0 0 auto !important;\r\n-    min-width: 48px !important;\r\n-    padding: 8px 8px !important;\r\n-    font-size: 0.98rem !important;\r\n+    min-width: 36px !important;\r\n+    padding: 6px 6px !important;\r\n+    font-size: 0.92rem !important;\r\n   }\r\n   .phone-input {\r\n     flex: 1 1 0 !important;\r\n     min-width: 0 !important;\r\n     width: 100% !important;\r\n     font-size: 1.08rem !important;\r\n-    padding: 12px 12px !important;\r\n+    padding: 12px 16px !important;\r\n   }\r\n }\r\n </style>\r\n"
                },
                {
                    "date": 1751985880131,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -23,23 +23,21 @@\n                 {{ c.name }}\r\n               </option>\r\n             </select>\r\n           </div>\r\n-          <div class=\"form-group phone-row\">\r\n-            <label>Mobile phone number <span class=\"required\">*</span></label>\r\n-            <div class=\"phone-input-group\">\r\n-              <div class=\"country-code-display\">\r\n-                <img :src=\"`https://flagsapi.com/${selectedCountry.iso}/flat/24.png`\" :alt=\"selectedCountry.name\" class=\"flag-option\" />\r\n-                <span>{{ selectedCountry.code }}</span>\r\n-              </div>\r\n-              <input\r\n-                v-model=\"phone\"\r\n-                type=\"tel\"\r\n-                required\r\n-                class=\"phone-input\"\r\n-                :placeholder=\"selectedCountry.iso === 'TR' ? '5xx xxx xx xx' : selectedCountry.iso === 'US' ? 'xxx xxx xxxx' : selectedCountry.iso === 'DE' ? '1xx xxxxxxx' : 'xx xx xx xx'\"\r\n-              />\r\n+          <!-- Telefon inputu kısmı -->\r\n+          <div class=\"phone-input-group\">\r\n+            <div class=\"country-code-display\">\r\n+              <img :src=\"`https://flagsapi.com/${selectedCountry.iso}/flat/24.png`\" :alt=\"selectedCountry.name\" class=\"flag-option\" />\r\n+              <span>{{ selectedCountry.code }}</span>\r\n             </div>\r\n+            <input\r\n+              v-model=\"phone\"\r\n+              type=\"tel\"\r\n+              required\r\n+              class=\"phone-input\"\r\n+              :placeholder=\"selectedCountry.iso === 'TR' ? '5xx xxx xx xx' : selectedCountry.iso === 'US' ? 'xxx xxx xxxx' : selectedCountry.iso === 'DE' ? '1xx xxxxxxx' : 'xx xx xx xx'\"\r\n+            />\r\n           </div>\r\n           <div class=\"form-note\">We’ll only contact you with essential updates or changes to your booking</div>\r\n           <button class=\"pay-btn\" type=\"submit\">Go to payment</button>\r\n         </template>\r\n"
                },
                {
                    "date": 1751985894415,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -23,21 +23,23 @@\n                 {{ c.name }}\r\n               </option>\r\n             </select>\r\n           </div>\r\n-          <!-- Telefon inputu kısmı -->\r\n-          <div class=\"phone-input-group\">\r\n-            <div class=\"country-code-display\">\r\n-              <img :src=\"`https://flagsapi.com/${selectedCountry.iso}/flat/24.png`\" :alt=\"selectedCountry.name\" class=\"flag-option\" />\r\n-              <span>{{ selectedCountry.code }}</span>\r\n+          <div class=\"form-group phone-row\">\r\n+            <label>Mobile phone number <span class=\"required\">*</span></label>\r\n+            <div class=\"phone-input-group\">\r\n+              <div class=\"country-code-display\">\r\n+                <img :src=\"`https://flagsapi.com/${selectedCountry.iso}/flat/24.png`\" :alt=\"selectedCountry.name\" class=\"flag-option\" />\r\n+                <span>{{ selectedCountry.code }}</span>\r\n+              </div>\r\n+              <input\r\n+                v-model=\"phone\"\r\n+                type=\"tel\"\r\n+                required\r\n+                class=\"phone-input\"\r\n+                :placeholder=\"selectedCountry.iso === 'TR' ? '5xx xxx xx xx' : selectedCountry.iso === 'US' ? 'xxx xxx xxxx' : selectedCountry.iso === 'DE' ? '1xx xxxxxxx' : 'xx xx xx xx'\"\r\n+              />\r\n             </div>\r\n-            <input\r\n-              v-model=\"phone\"\r\n-              type=\"tel\"\r\n-              required\r\n-              class=\"phone-input\"\r\n-              :placeholder=\"selectedCountry.iso === 'TR' ? '5xx xxx xx xx' : selectedCountry.iso === 'US' ? 'xxx xxx xxxx' : selectedCountry.iso === 'DE' ? '1xx xxxxxxx' : 'xx xx xx xx'\"\r\n-            />\r\n           </div>\r\n           <div class=\"form-note\">We’ll only contact you with essential updates or changes to your booking</div>\r\n           <button class=\"pay-btn\" type=\"submit\">Go to payment</button>\r\n         </template>\r\n@@ -528,26 +530,6 @@\n     display: flex !important;\r\n     flex-direction: column !important;\r\n     align-items: stretch !important;\r\n   }\r\n-  .phone-input-group {\r\n-    display: flex !important;\r\n-    flex-direction: row !important;\r\n-    align-items: stretch !important;\r\n-    width: 100% !important;\r\n-    gap: 6px !important;\r\n-  }\r\n-  .country-code-display {\r\n-    flex: 0 0 auto !important;\r\n-    min-width: 36px !important;\r\n-    padding: 6px 6px !important;\r\n-    font-size: 0.92rem !important;\r\n-  }\r\n-  .phone-input {\r\n-    flex: 1 1 0 !important;\r\n-    min-width: 0 !important;\r\n-    width: 100% !important;\r\n-    font-size: 1.08rem !important;\r\n-    padding: 12px 16px !important;\r\n-  }\r\n }\r\n </style>\r\n"
                },
                {
                    "date": 1751985945060,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -485,9 +485,8 @@\n   .country-select-fullwidth,\r\n   .phone-input,\r\n   .country-code-display,\r\n   .pay-btn {\r\n-    width: 100% !important;\r\n     max-width: 100vw !important;\r\n     min-width: 0 !important;\r\n     box-sizing: border-box !important;\r\n     font-size: 1rem !important;\r\n"
                },
                {
                    "date": 1752083265057,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -39,8 +39,26 @@\n                 :placeholder=\"selectedCountry.iso === 'TR' ? '5xx xxx xx xx' : selectedCountry.iso === 'US' ? 'xxx xxx xxxx' : selectedCountry.iso === 'DE' ? '1xx xxxxxxx' : 'xx xx xx xx'\"\r\n               />\r\n             </div>\r\n           </div>\r\n+          <div class=\"form-group\">\r\n+            <label>Hotel Address <span class=\"required\">*</span></label>\r\n+            <input v-model=\"hotelAddress\" type=\"text\" required placeholder=\"Enter your hotel address\" />\r\n+          </div>\r\n+          <div class=\"form-group\">\r\n+            <label>Your Location (optional)</label>\r\n+            <div style=\"display: flex; gap: 8px;\">\r\n+              <input\r\n+                v-model=\"userLocation\"\r\n+                type=\"text\"\r\n+                placeholder=\"Click the button to add your current location\"\r\n+                readonly\r\n+                class=\"input\"\r\n+                style=\"flex: 1;\"\r\n+              />\r\n+              <button type=\"button\" @click=\"getLocation\" class=\"location-btn\" title=\"Use my location\">📍</button>\r\n+            </div>\r\n+          </div>\r\n           <div class=\"form-note\">We’ll only contact you with essential updates or changes to your booking</div>\r\n           <button class=\"pay-btn\" type=\"submit\">Go to payment</button>\r\n         </template>\r\n         <template v-else>\r\n@@ -127,8 +145,10 @@\n const loading = ref(false)\r\n const success = ref(false)\r\n const errorMsg = ref('')\r\n const currentStep = ref(1)\r\n+const hotelAddress = ref(\"\");\r\n+const userLocation = ref(\"\");\r\n \r\n onMounted(() => {\r\n   watch(currentStep, (step) => {\r\n     if (step === 2) {\r\n@@ -153,8 +173,27 @@\n   card = elements.create('card')\r\n   card.mount('#card-element')\r\n }\r\n \r\n+function getLocation() {\r\n+  if (!navigator.geolocation) {\r\n+    alert('Geolocation is not supported by your browser');\r\n+    return;\r\n+  }\r\n+  navigator.geolocation.getCurrentPosition(async (position) => {\r\n+    const { latitude, longitude } = position.coords;\r\n+    try {\r\n+      const response = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${latitude}&lon=${longitude}`);\r\n+      const data = await response.json();\r\n+      userLocation.value = data.display_name || `${latitude}, ${longitude}`;\r\n+    } catch (e) {\r\n+      userLocation.value = `${latitude}, ${longitude}`;\r\n+    }\r\n+  }, (error) => {\r\n+    alert('Could not get your location');\r\n+  });\r\n+}\r\n+\r\n const handleStep = async () => {\r\n   if (currentStep.value === 1) {\r\n     if (!name.value || !email.value || !country.value || !phone.value) return\r\n     currentStep.value = 2\r\n@@ -423,8 +462,20 @@\n }\r\n .phone-input:focus {\r\n   border-color: #0070eb;\r\n }\r\n+.location-btn {\r\n+  background: #f7f7f7;\r\n+  border: 1px solid #ddd;\r\n+  border-radius: 6px;\r\n+  font-size: 1.2rem;\r\n+  padding: 0 12px;\r\n+  cursor: pointer;\r\n+  transition: background 0.2s;\r\n+}\r\n+.location-btn:hover {\r\n+  background: #eee;\r\n+}\r\n @media (max-width: 900px) {\r\n   .checkout-main-layout {\r\n     flex-direction: column;\r\n     gap: 0;\r\n"
                },
                {
                    "date": 1752162078238,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -56,8 +56,18 @@\n                 style=\"flex: 1;\"\r\n               />\r\n               <button type=\"button\" @click=\"getLocation\" class=\"location-btn\" title=\"Use my location\">📍</button>\r\n             </div>\r\n+            <div v-if=\"userLocation\">\r\n+              <a\r\n+                :href=\"getGoogleMapsLink(userLocation)\"\r\n+                target=\"_blank\"\r\n+                rel=\"noopener\"\r\n+                style=\"color: #0070eb; text-decoration: underline; cursor: pointer; font-size:0.97em;\"\r\n+              >\r\n+                View on Google Maps\r\n+              </a>\r\n+            </div>\r\n           </div>\r\n           <div class=\"form-note\">We’ll only contact you with essential updates or changes to your booking</div>\r\n           <button class=\"pay-btn\" type=\"submit\">Go to payment</button>\r\n         </template>\r\n@@ -96,8 +106,19 @@\n               <i class=\"fas fa-calendar-alt\"></i> {{ selectedTourStore.tour.bookingDate }}\r\n             </div>\r\n             <div class=\"product-detail\"><i class=\"fas fa-user\"></i> {{ selectedTourStore.tour.participants }}</div>\r\n             <div class=\"product-detail\" v-if=\"selectedTourStore.tour.email\"><i class=\"fas fa-envelope\"></i> {{ selectedTourStore.tour.email }}</div>\r\n+            <div class=\"product-detail\" v-if=\"selectedTourStore.tour.userLocation\">\r\n+              <i class=\"fas fa-map-marker-alt\"></i>\r\n+              <a\r\n+                :href=\"getGoogleMapsLink(selectedTourStore.tour.userLocation)\"\r\n+                target=\"_blank\"\r\n+                rel=\"noopener\"\r\n+                style=\"color: #0070eb; text-decoration: underline; cursor: pointer;\"\r\n+              >\r\n+                {{ selectedTourStore.tour.userLocation }}\r\n+              </a>\r\n+            </div>\r\n           </div>\r\n         </div>\r\n         <div class=\"order-summary-total-row\">\r\n           <span>Total</span>\r\n@@ -192,8 +213,18 @@\n     alert('Could not get your location');\r\n   });\r\n }\r\n \r\n+function getGoogleMapsLink(location) {\r\n+  // Eğer koordinat ise (ör: \"41.123, 29.456\")\r\n+  if (/^-?\\d+(\\.\\d+)?[, ]+\\s*-?\\d+(\\.\\d+)?$/.test(location)) {\r\n+    const coords = location.split(/[ ,]+/).map(Number);\r\n+    return `https://www.google.com/maps?q=${coords[0]},${coords[1]}`;\r\n+  }\r\n+  // Değilse adres olarak arat\r\n+  return `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(location)}`;\r\n+}\r\n+\r\n const handleStep = async () => {\r\n   if (currentStep.value === 1) {\r\n     if (!name.value || !email.value || !country.value || !phone.value) return\r\n     currentStep.value = 2\r\n"
                },
                {
                    "date": 1752162591472,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -497,10 +497,14 @@\n .location-btn {\r\n   background: #f7f7f7;\r\n   border: 1px solid #ddd;\r\n   border-radius: 6px;\r\n-  font-size: 1.2rem;\r\n-  padding: 0 12px;\r\n+  font-size: 1.08rem;\r\n+  padding: 0 16px;\r\n+  height: 48px;\r\n+  display: flex;\r\n+  align-items: center;\r\n+  justify-content: center;\r\n   cursor: pointer;\r\n   transition: background 0.2s;\r\n }\r\n .location-btn:hover {\r\n"
                },
                {
                    "date": 1752608833011,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -188,11 +188,25 @@\n })\r\n \r\n function setupStripe() {\r\n   if (card) return\r\n+  // Stripe public key - production'da gerçek key kullanılacak\r\n   stripe = window.Stripe('pk_test_51N9...YOUR_PUBLIC_KEY...') // TODO: Replace with your real public key\r\n   elements = stripe.elements()\r\n-  card = elements.create('card')\r\n+  card = elements.create('card', {\r\n+    style: {\r\n+      base: {\r\n+        fontSize: '16px',\r\n+        color: '#424770',\r\n+        '::placeholder': {\r\n+          color: '#aab7c4',\r\n+        },\r\n+      },\r\n+      invalid: {\r\n+        color: '#9e2146',\r\n+      },\r\n+    },\r\n+  })\r\n   card.mount('#card-element')\r\n }\r\n \r\n function getLocation() {\r\n"
                },
                {
                    "date": 1752608843983,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -239,35 +239,97 @@\n }\r\n \r\n const handleStep = async () => {\r\n   if (currentStep.value === 1) {\r\n-    if (!name.value || !email.value || !country.value || !phone.value) return\r\n+    if (!name.value || !email.value || !country.value || !phone.value || !hotelAddress.value) {\r\n+      errorMsg.value = 'Please fill in all required fields.'\r\n+      return\r\n+    }\r\n     currentStep.value = 2\r\n     return\r\n   }\r\n+  \r\n   loading.value = true\r\n   errorMsg.value = ''\r\n   success.value = false\r\n+  \r\n   try {\r\n+    // Stripe Payment Method oluştur\r\n     const { paymentMethod, error } = await stripe.createPaymentMethod({\r\n       type: 'card',\r\n       card: card,\r\n       billing_details: {\r\n         name: cardName.value,\r\n-        email: email.value\r\n+        email: email.value,\r\n+        phone: selectedCountry.value.code + phone.value,\r\n+        address: {\r\n+          country: selectedCountry.value.iso,\r\n+          line1: hotelAddress.value\r\n+        }\r\n       }\r\n     })\r\n+    \r\n     if (error) {\r\n       errorMsg.value = error.message\r\n       loading.value = false\r\n       return\r\n     }\r\n+\r\n+    // Rezervasyon datasını hazırla\r\n+    const bookingData = {\r\n+      customer: {\r\n+        name: name.value,\r\n+        email: email.value,\r\n+        phone: selectedCountry.value.code + phone.value,\r\n+        country: country.value,\r\n+        hotel_address: hotelAddress.value,\r\n+        user_location: userLocation.value\r\n+      },\r\n+      tour: {\r\n+        id: selectedTourStore.tour?.id || null,\r\n+        title: selectedTourStore.tour?.title || '',\r\n+        description: selectedTourStore.tour?.description || '',\r\n+        price: selectedTourStore.tour?.price || '',\r\n+        booking_date: selectedTourStore.tour?.bookingDate || null,\r\n+        participants: selectedTourStore.tour?.participants || 1\r\n+      },\r\n+      payment: {\r\n+        payment_method_id: paymentMethod.id,\r\n+        amount: selectedTourStore.tour?.price || '',\r\n+        currency: 'TRY' // veya dinamik olarak belirlenebilir\r\n+      },\r\n+      stripe_payment_id: paymentMethod.id\r\n+    }\r\n+\r\n+    // Laravel backend'e rezervasyon datasını gönder\r\n+    const response = await fetch('https://searchyourtours.com/api/submit-booking', {\r\n+      method: 'POST',\r\n+      headers: {\r\n+        'Content-Type': 'application/json',\r\n+        'Accept': 'application/json'\r\n+      },\r\n+      body: JSON.stringify(bookingData)\r\n+    })\r\n+\r\n+    const result = await response.json()\r\n+\r\n+    if (!response.ok) {\r\n+      throw new Error(result.message || 'Booking submission failed')\r\n+    }\r\n+\r\n+    // Başarılı ödeme\r\n+    loading.value = false\r\n+    success.value = true\r\n+    \r\n+    // Başarılı ödeme sonrası işlemler (isteğe bağlı)\r\n     setTimeout(() => {\r\n-      loading.value = false\r\n-      success.value = true\r\n-    }, 1200)\r\n+      // Kullanıcıyı başarı sayfasına yönlendir veya modal göster\r\n+      console.log('Payment successful:', result)\r\n+    }, 2000)\r\n+\r\n   } catch (err) {\r\n-    errorMsg.value = err.message || 'Payment failed.'\r\n+    console.error('Payment error:', err)\r\n+    errorMsg.value = err.message || 'Payment failed. Please try again.'\r\n     loading.value = false\r\n   }\r\n }\r\n </script>\r\n"
                },
                {
                    "date": 1752608854820,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -84,9 +84,13 @@\n             <span v-if=\"loading\">Processing...</span>\r\n             <span v-else>Pay Now</span>\r\n           </button>\r\n           <div v-if=\"success\" class=\"success-message\">\r\n-            <i class=\"fas fa-check-circle\"></i> Payment Successful! Thank you.\r\n+            <i class=\"fas fa-check-circle\"></i> \r\n+            <div>\r\n+              <strong>Payment Successful!</strong>\r\n+              <p>Your booking has been confirmed. You will receive a confirmation email shortly.</p>\r\n+            </div>\r\n           </div>\r\n           <div v-if=\"errorMsg\" class=\"error-message\">\r\n             <i class=\"fas fa-exclamation-circle\"></i> {{ errorMsg }}\r\n           </div>\r\n@@ -438,9 +442,37 @@\n   color: #27ae60;\r\n   text-align: center;\r\n   margin-top: 16px;\r\n   font-size: 1.1rem;\r\n+  display: flex;\r\n+  align-items: center;\r\n+  justify-content: center;\r\n+  gap: 12px;\r\n+  padding: 16px;\r\n+  background: #f8fff9;\r\n+  border: 1px solid #27ae60;\r\n+  border-radius: 8px;\r\n }\r\n+\r\n+.success-message i {\r\n+  font-size: 1.5rem;\r\n+  flex-shrink: 0;\r\n+}\r\n+\r\n+.success-message div {\r\n+  text-align: left;\r\n+}\r\n+\r\n+.success-message strong {\r\n+  display: block;\r\n+  margin-bottom: 4px;\r\n+}\r\n+\r\n+.success-message p {\r\n+  margin: 0;\r\n+  font-size: 0.95rem;\r\n+  color: #666;\r\n+}\r\n .error-message {\r\n   color: #d7263d;\r\n   text-align: center;\r\n   margin-top: 12px;\r\n"
                },
                {
                    "date": 1752609026489,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -193,9 +193,9 @@\n \r\n function setupStripe() {\r\n   if (card) return\r\n   // Stripe public key - production'da gerçek key kullanılacak\r\n-  stripe = window.Stripe('pk_test_51N9...YOUR_PUBLIC_KEY...') // TODO: Replace with your real public key\r\n+  stripe = window.Stripe('pk_live_51RM643JpoC0mNwVWeCMfS1WckX9Bh8d25g02RHaIZBk8VTi84YEyFvZLsrC0WR53KMyB3YIcuWVAH7u1PmpDeG4t00ZdNBIgfd') // TODO: Replace with your real public key\r\n   elements = stripe.elements()\r\n   card = elements.create('card', {\r\n     style: {\r\n       base: {\r\n"
                },
                {
                    "date": 1752609365924,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -304,9 +304,9 @@\n       stripe_payment_id: paymentMethod.id\r\n     }\r\n \r\n     // Laravel backend'e rezervasyon datasını gönder\r\n-    const response = await fetch('https://searchyourtours.com/api/submit-booking', {\r\n+    const response = await fetch('https://searchyourtour.com/api/submit-booking', {\r\n       method: 'POST',\r\n       headers: {\r\n         'Content-Type': 'application/json',\r\n         'Accept': 'application/json'\r\n"
                },
                {
                    "date": 1752611430361,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -293,9 +293,10 @@\n         title: selectedTourStore.tour?.title || '',\r\n         description: selectedTourStore.tour?.description || '',\r\n         price: selectedTourStore.tour?.price || '',\r\n         booking_date: selectedTourStore.tour?.bookingDate || null,\r\n-        participants: selectedTourStore.tour?.participants || 1\r\n+        participants: selectedTourStore.tour?.participants || 1,\r\n+        tenant_id: 'ad5257a5-efdd-4314-9e5e-b56aabe321f1'\r\n       },\r\n       payment: {\r\n         payment_method_id: paymentMethod.id,\r\n         amount: selectedTourStore.tour?.price || '',\r\n"
                },
                {
                    "date": 1752611454799,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,730 @@\n+<template>\r\n+  <div class=\"checkout-main-layout\">\r\n+    <!-- SOL: Kişisel Bilgiler ve Ödeme Formu (Stepper) -->\r\n+    <div class=\"checkout-left\">\r\n+      <h2>Enter your personal details</h2>\r\n+      <div class=\"secure-checkout\">\r\n+        <i class=\"fas fa-lock\"></i> Checkout is fast and secure\r\n+      </div>\r\n+      <form @submit.prevent=\"handleStep\" class=\"checkout-form\">\r\n+        <template v-if=\"currentStep === 1\">\r\n+          <div class=\"form-group\">\r\n+            <label>Full name <span class=\"required\">*</span></label>\r\n+            <input v-model=\"name\" type=\"text\" required placeholder=\"Full Name\" />\r\n+          </div>\r\n+          <div class=\"form-group\">\r\n+            <label>Email <span class=\"required\">*</span></label>\r\n+            <input v-model=\"email\" type=\"email\" required placeholder=\"you@email.com\" />\r\n+          </div>\r\n+          <div class=\"form-group\">\r\n+            <label>Country <span class=\"required\">*</span></label>\r\n+            <select v-model=\"country\" class=\"country-select-fullwidth\">\r\n+              <option v-for=\"c in countries\" :key=\"c.iso\" :value=\"c.name\">\r\n+                {{ c.name }}\r\n+              </option>\r\n+            </select>\r\n+          </div>\r\n+          <div class=\"form-group phone-row\">\r\n+            <label>Mobile phone number <span class=\"required\">*</span></label>\r\n+            <div class=\"phone-input-group\">\r\n+              <div class=\"country-code-display\">\r\n+                <img :src=\"`https://flagsapi.com/${selectedCountry.iso}/flat/24.png`\" :alt=\"selectedCountry.name\" class=\"flag-option\" />\r\n+                <span>{{ selectedCountry.code }}</span>\r\n+              </div>\r\n+              <input\r\n+                v-model=\"phone\"\r\n+                type=\"tel\"\r\n+                required\r\n+                class=\"phone-input\"\r\n+                :placeholder=\"selectedCountry.iso === 'TR' ? '5xx xxx xx xx' : selectedCountry.iso === 'US' ? 'xxx xxx xxxx' : selectedCountry.iso === 'DE' ? '1xx xxxxxxx' : 'xx xx xx xx'\"\r\n+              />\r\n+            </div>\r\n+          </div>\r\n+          <div class=\"form-group\">\r\n+            <label>Hotel Address <span class=\"required\">*</span></label>\r\n+            <input v-model=\"hotelAddress\" type=\"text\" required placeholder=\"Enter your hotel address\" />\r\n+          </div>\r\n+          <div class=\"form-group\">\r\n+            <label>Your Location (optional)</label>\r\n+            <div style=\"display: flex; gap: 8px;\">\r\n+              <input\r\n+                v-model=\"userLocation\"\r\n+                type=\"text\"\r\n+                placeholder=\"Click the button to add your current location\"\r\n+                readonly\r\n+                class=\"input\"\r\n+                style=\"flex: 1;\"\r\n+              />\r\n+              <button type=\"button\" @click=\"getLocation\" class=\"location-btn\" title=\"Use my location\">📍</button>\r\n+            </div>\r\n+            <div v-if=\"userLocation\">\r\n+              <a\r\n+                :href=\"getGoogleMapsLink(userLocation)\"\r\n+                target=\"_blank\"\r\n+                rel=\"noopener\"\r\n+                style=\"color: #0070eb; text-decoration: underline; cursor: pointer; font-size:0.97em;\"\r\n+              >\r\n+                View on Google Maps\r\n+              </a>\r\n+            </div>\r\n+          </div>\r\n+          <div class=\"form-note\">We’ll only contact you with essential updates or changes to your booking</div>\r\n+          <button class=\"pay-btn\" type=\"submit\">Go to payment</button>\r\n+        </template>\r\n+        <template v-else>\r\n+          <div class=\"form-group\">\r\n+            <label>Name on Card <span class=\"required\">*</span></label>\r\n+            <input v-model=\"cardName\" type=\"text\" required placeholder=\"Name on Card\" />\r\n+          </div>\r\n+          <div class=\"form-group\">\r\n+            <label>Card Details</label>\r\n+            <div id=\"card-element\" class=\"stripe-card-element\"></div>\r\n+          </div>\r\n+          <button class=\"pay-btn\" :disabled=\"loading\" type=\"submit\">\r\n+            <span v-if=\"loading\">Processing...</span>\r\n+            <span v-else>Pay Now</span>\r\n+          </button>\r\n+          <div v-if=\"success\" class=\"success-message\">\r\n+            <i class=\"fas fa-check-circle\"></i> \r\n+            <div>\r\n+              <strong>Payment Successful!</strong>\r\n+              <p>Your booking has been confirmed. You will receive a confirmation email shortly.</p>\r\n+            </div>\r\n+          </div>\r\n+          <div v-if=\"errorMsg\" class=\"error-message\">\r\n+            <i class=\"fas fa-exclamation-circle\"></i> {{ errorMsg }}\r\n+          </div>\r\n+        </template>\r\n+      </form>\r\n+    </div>\r\n+    <!-- SAĞ: Order Summary -->\r\n+    <div class=\"checkout-right\">\r\n+      <div class=\"order-summary-panel\" v-if=\"selectedTourStore.tour\">\r\n+        <div class=\"order-summary-title\">Order summary</div>\r\n+        <div class=\"order-summary-product\">\r\n+          <img class=\"order-summary-img\" :src=\"selectedTourStore.tour.image\" :alt=\"selectedTourStore.tour.title\" />\r\n+          <div class=\"order-summary-product-info\">\r\n+            <div class=\"product-title\">{{ selectedTourStore.tour.title }}</div>\r\n+            <div class=\"product-detail\">{{ selectedTourStore.tour.description }}</div>\r\n+            <div class=\"product-detail\" v-if=\"selectedTourStore.tour.bookingDate\">\r\n+              <i class=\"fas fa-calendar-alt\"></i> {{ selectedTourStore.tour.bookingDate }}\r\n+            </div>\r\n+            <div class=\"product-detail\"><i class=\"fas fa-user\"></i> {{ selectedTourStore.tour.participants }}</div>\r\n+            <div class=\"product-detail\" v-if=\"selectedTourStore.tour.email\"><i class=\"fas fa-envelope\"></i> {{ selectedTourStore.tour.email }}</div>\r\n+            <div class=\"product-detail\" v-if=\"selectedTourStore.tour.userLocation\">\r\n+              <i class=\"fas fa-map-marker-alt\"></i>\r\n+              <a\r\n+                :href=\"getGoogleMapsLink(selectedTourStore.tour.userLocation)\"\r\n+                target=\"_blank\"\r\n+                rel=\"noopener\"\r\n+                style=\"color: #0070eb; text-decoration: underline; cursor: pointer;\"\r\n+              >\r\n+                {{ selectedTourStore.tour.userLocation }}\r\n+              </a>\r\n+            </div>\r\n+          </div>\r\n+        </div>\r\n+        <div class=\"order-summary-total-row\">\r\n+          <span>Total</span>\r\n+          <span class=\"order-summary-total\">{{ selectedTourStore.tour.price }}</span>\r\n+        </div>\r\n+        <div class=\"order-summary-taxes\">All taxes and fees included</div>\r\n+      </div>\r\n+    </div>\r\n+  </div>\r\n+</template>\r\n+\r\n+<script setup>\r\n+import { ref, onMounted, watch, computed } from 'vue'\r\n+import { useSelectedTourStore } from '../stores/selectedTour'\r\n+let stripe, elements, card\r\n+\r\n+const selectedTourStore = useSelectedTourStore()\r\n+\r\n+// Tüm ülkeler ve kodları\r\n+const countries = [\r\n+  { name: 'Turkey', code: '+90', iso: 'TR' },\r\n+  { name: 'United States', code: '+1', iso: 'US' },\r\n+  { name: 'Germany', code: '+49', iso: 'DE' },\r\n+  { name: 'France', code: '+33', iso: 'FR' },\r\n+  { name: 'United Kingdom', code: '+44', iso: 'GB' },\r\n+  { name: 'Italy', code: '+39', iso: 'IT' },\r\n+  { name: 'Spain', code: '+34', iso: 'ES' },\r\n+  { name: 'Netherlands', code: '+31', iso: 'NL' },\r\n+  { name: 'Russia', code: '+7', iso: 'RU' },\r\n+  { name: 'Japan', code: '+81', iso: 'JP' },\r\n+  { name: 'China', code: '+86', iso: 'CN' },\r\n+  { name: 'India', code: '+91', iso: 'IN' },\r\n+  { name: 'Brazil', code: '+55', iso: 'BR' },\r\n+  { name: 'Canada', code: '+1', iso: 'CA' },\r\n+  { name: 'Australia', code: '+61', iso: 'AU' },\r\n+]\r\n+\r\n+const country = ref(countries[0].name)\r\n+const phone = ref('')\r\n+const selectedCountry = computed(() => countries.find(c => c.name === country.value) || countries[0])\r\n+\r\n+const name = ref('')\r\n+const email = ref(selectedTourStore.tour?.email || '')\r\n+const cardName = ref('')\r\n+const loading = ref(false)\r\n+const success = ref(false)\r\n+const errorMsg = ref('')\r\n+const currentStep = ref(1)\r\n+const hotelAddress = ref(\"\");\r\n+const userLocation = ref(\"\");\r\n+\r\n+onMounted(() => {\r\n+  watch(currentStep, (step) => {\r\n+    if (step === 2) {\r\n+      setTimeout(() => {\r\n+        if (!window.Stripe) {\r\n+          const script = document.createElement('script')\r\n+          script.src = 'https://js.stripe.com/v3/'\r\n+          script.onload = setupStripe\r\n+          document.head.appendChild(script)\r\n+        } else {\r\n+          setupStripe()\r\n+        }\r\n+      }, 0)\r\n+    }\r\n+  }, { immediate: true })\r\n+})\r\n+\r\n+function setupStripe() {\r\n+  if (card) return\r\n+  // Stripe public key - production'da gerçek key kullanılacak\r\n+  stripe = window.Stripe('pk_live_51RM643JpoC0mNwVWeCMfS1WckX9Bh8d25g02RHaIZBk8VTi84YEyFvZLsrC0WR53KMyB3YIcuWVAH7u1PmpDeG4t00ZdNBIgfd') // TODO: Replace with your real public key\r\n+  elements = stripe.elements()\r\n+  card = elements.create('card', {\r\n+    style: {\r\n+      base: {\r\n+        fontSize: '16px',\r\n+        color: '#424770',\r\n+        '::placeholder': {\r\n+          color: '#aab7c4',\r\n+        },\r\n+      },\r\n+      invalid: {\r\n+        color: '#9e2146',\r\n+      },\r\n+    },\r\n+  })\r\n+  card.mount('#card-element')\r\n+}\r\n+\r\n+function getLocation() {\r\n+  if (!navigator.geolocation) {\r\n+    alert('Geolocation is not supported by your browser');\r\n+    return;\r\n+  }\r\n+  navigator.geolocation.getCurrentPosition(async (position) => {\r\n+    const { latitude, longitude } = position.coords;\r\n+    try {\r\n+      const response = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${latitude}&lon=${longitude}`);\r\n+      const data = await response.json();\r\n+      userLocation.value = data.display_name || `${latitude}, ${longitude}`;\r\n+    } catch (e) {\r\n+      userLocation.value = `${latitude}, ${longitude}`;\r\n+    }\r\n+  }, (error) => {\r\n+    alert('Could not get your location');\r\n+  });\r\n+}\r\n+\r\n+function getGoogleMapsLink(location) {\r\n+  // Eğer koordinat ise (ör: \"41.123, 29.456\")\r\n+  if (/^-?\\d+(\\.\\d+)?[, ]+\\s*-?\\d+(\\.\\d+)?$/.test(location)) {\r\n+    const coords = location.split(/[ ,]+/).map(Number);\r\n+    return `https://www.google.com/maps?q=${coords[0]},${coords[1]}`;\r\n+  }\r\n+  // Değilse adres olarak arat\r\n+  return `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(location)}`;\r\n+}\r\n+\r\n+const handleStep = async () => {\r\n+  if (currentStep.value === 1) {\r\n+    if (!name.value || !email.value || !country.value || !phone.value || !hotelAddress.value) {\r\n+      errorMsg.value = 'Please fill in all required fields.'\r\n+      return\r\n+    }\r\n+    currentStep.value = 2\r\n+    return\r\n+  }\r\n+  \r\n+  loading.value = true\r\n+  errorMsg.value = ''\r\n+  success.value = false\r\n+  \r\n+  try {\r\n+    // Stripe Payment Method oluştur\r\n+    const { paymentMethod, error } = await stripe.createPaymentMethod({\r\n+      type: 'card',\r\n+      card: card,\r\n+      billing_details: {\r\n+        name: cardName.value,\r\n+        email: email.value,\r\n+        phone: selectedCountry.value.code + phone.value,\r\n+        address: {\r\n+          country: selectedCountry.value.iso,\r\n+          line1: hotelAddress.value\r\n+        }\r\n+      }\r\n+    })\r\n+    \r\n+    if (error) {\r\n+      errorMsg.value = error.message\r\n+      loading.value = false\r\n+      return\r\n+    }\r\n+\r\n+    // Rezervasyon datasını hazırla\r\n+    const bookingData = {\r\n+      customer: {\r\n+        name: name.value,\r\n+        email: email.value,\r\n+        phone: selectedCountry.value.code + phone.value,\r\n+        country: country.value,\r\n+        hotel_address: hotelAddress.value,\r\n+        user_location: userLocation.value\r\n+      },\r\n+      tour: {\r\n+        id: selectedTourStore.tour?.id || null,\r\n+        title: selectedTourStore.tour?.title || '',\r\n+        description: selectedTourStore.tour?.description || '',\r\n+        price: selectedTourStore.tour?.price || '',\r\n+        booking_date: selectedTourStore.tour?.bookingDate || null,\r\n+        participants: selectedTourStore.tour?.participants || 1,\r\n+        tenant_id: 'ad5257a5-efdd-4314-9e5e-b56aabe321f1',\r\n+        currency_id:1\r\n+      },\r\n+      payment: {\r\n+        payment_method_id: paymentMethod.id,\r\n+        amount: selectedTourStore.tour?.price || '',\r\n+        currency: 'TRY' // veya dinamik olarak belirlenebilir\r\n+      },\r\n+      stripe_payment_id: paymentMethod.id\r\n+    }\r\n+\r\n+    // Laravel backend'e rezervasyon datasını gönder\r\n+    const response = await fetch('https://searchyourtour.com/api/submit-booking', {\r\n+      method: 'POST',\r\n+      headers: {\r\n+        'Content-Type': 'application/json',\r\n+        'Accept': 'application/json'\r\n+      },\r\n+      body: JSON.stringify(bookingData)\r\n+    })\r\n+\r\n+    const result = await response.json()\r\n+\r\n+    if (!response.ok) {\r\n+      throw new Error(result.message || 'Booking submission failed')\r\n+    }\r\n+\r\n+    // Başarılı ödeme\r\n+    loading.value = false\r\n+    success.value = true\r\n+    \r\n+    // Başarılı ödeme sonrası işlemler (isteğe bağlı)\r\n+    setTimeout(() => {\r\n+      // Kullanıcıyı başarı sayfasına yönlendir veya modal göster\r\n+      console.log('Payment successful:', result)\r\n+    }, 2000)\r\n+\r\n+  } catch (err) {\r\n+    console.error('Payment error:', err)\r\n+    errorMsg.value = err.message || 'Payment failed. Please try again.'\r\n+    loading.value = false\r\n+  }\r\n+}\r\n+</script>\r\n+\r\n+<style scoped>\r\n+/* CheckoutForm.vue'dan taşınan stiller */\r\n+.checkout-main-layout {\r\n+  display: flex;\r\n+  gap: 64px;\r\n+  align-items: stretch;\r\n+  justify-content: center;\r\n+  background: #f6f8fa;\r\n+  padding: 48px 0;\r\n+  min-height: 100vh;\r\n+}\r\n+.checkout-left, .checkout-right {\r\n+  flex: 1 1 0;\r\n+  min-width: 340px;\r\n+  max-width: 600px;\r\n+  background: #fff;\r\n+  border-radius: 26px;\r\n+  box-shadow: 0 8px 32px rgba(44,62,80,0.10);\r\n+  padding: 36px 44px 24px 44px;\r\n+  font-family: 'Inter', 'Segoe UI', Arial, sans-serif;\r\n+  display: flex;\r\n+  flex-direction: column;\r\n+  justify-content: flex-start;\r\n+  height: 100%;\r\n+}\r\n+.checkout-left h2 {\r\n+  color: #1a2a3a;\r\n+  font-size: 2.3rem;\r\n+  margin-bottom: 18px;\r\n+  font-weight: 900;\r\n+  text-align: left;\r\n+  letter-spacing: -1px;\r\n+}\r\n+.secure-checkout {\r\n+  color: #0a8a4a;\r\n+  font-size: 1.08rem;\r\n+  margin-bottom: 18px;\r\n+  display: flex;\r\n+  align-items: center;\r\n+  gap: 8px;\r\n+  font-weight: 600;\r\n+}\r\n+.checkout-form {\r\n+  display: flex;\r\n+  flex-direction: column;\r\n+  gap: 18px;\r\n+}\r\n+.form-group {\r\n+  display: flex;\r\n+  flex-direction: column;\r\n+  gap: 4px;\r\n+}\r\n+input, select {\r\n+  padding: 12px 16px;\r\n+  border-radius: 10px;\r\n+  border: 2px solid #e0e6ed;\r\n+  font-size: 1.08rem;\r\n+  background: #f7fafd;\r\n+  outline: none;\r\n+  transition: border 0.2s;\r\n+}\r\n+input:focus, select:focus {\r\n+  border-color: #0070eb;\r\n+}\r\n+.stripe-card-element {\r\n+  padding: 12px 16px;\r\n+  border-radius: 10px;\r\n+  border: 2px solid #e0e6ed;\r\n+  background: #f7fafd;\r\n+  margin-top: 4px;\r\n+}\r\n+.form-note {\r\n+  font-size: 0.97rem;\r\n+  color: #888;\r\n+  margin-bottom: 8px;\r\n+}\r\n+.required { color: #d7263d; }\r\n+.pay-btn {\r\n+  width: 100%;\r\n+  background: linear-gradient(90deg, #FC6421 60%, #ff3401 100%);\r\n+  color: #fff;\r\n+  font-size: 1.15rem;\r\n+  font-weight: 800;\r\n+  border: none;\r\n+  border-radius: 32px;\r\n+  padding: 1.05rem 0;\r\n+  margin-top: 8px;\r\n+  cursor: pointer;\r\n+  transition: background 0.2s, box-shadow 0.2s;\r\n+  box-shadow: 0 2px 12px rgba(0,112,235,0.08);\r\n+  letter-spacing: 0.5px;\r\n+}\r\n+.pay-btn:hover {\r\n+  background: linear-gradient(90deg, #ff0000 60%, #ff0000 100%);\r\n+  box-shadow: 0 4px 24px rgba(0,112,235,0.13);\r\n+}\r\n+.pay-btn:disabled {\r\n+  background: #aaa;\r\n+  cursor: not-allowed;\r\n+}\r\n+.success-message {\r\n+  color: #27ae60;\r\n+  text-align: center;\r\n+  margin-top: 16px;\r\n+  font-size: 1.1rem;\r\n+  display: flex;\r\n+  align-items: center;\r\n+  justify-content: center;\r\n+  gap: 12px;\r\n+  padding: 16px;\r\n+  background: #f8fff9;\r\n+  border: 1px solid #27ae60;\r\n+  border-radius: 8px;\r\n+}\r\n+\r\n+.success-message i {\r\n+  font-size: 1.5rem;\r\n+  flex-shrink: 0;\r\n+}\r\n+\r\n+.success-message div {\r\n+  text-align: left;\r\n+}\r\n+\r\n+.success-message strong {\r\n+  display: block;\r\n+  margin-bottom: 4px;\r\n+}\r\n+\r\n+.success-message p {\r\n+  margin: 0;\r\n+  font-size: 0.95rem;\r\n+  color: #666;\r\n+}\r\n+.error-message {\r\n+  color: #d7263d;\r\n+  text-align: center;\r\n+  margin-top: 12px;\r\n+  font-size: 1rem;\r\n+}\r\n+\r\n+.order-summary-panel {\r\n+  display: flex;\r\n+  flex-direction: column;\r\n+  gap: 18px;\r\n+  height: 100%;\r\n+}\r\n+.order-summary-product {\r\n+  display: flex;\r\n+  gap: 22px;\r\n+  margin-bottom: 10px;\r\n+  align-items: flex-start;\r\n+}\r\n+.order-summary-img {\r\n+  width: 88px;\r\n+  height: 88px;\r\n+  border-radius: 14px;\r\n+  object-fit: cover;\r\n+  box-shadow: 0 2px 8px rgba(44,62,80,0.08);\r\n+}\r\n+.order-summary-product-info {\r\n+  flex: 1;\r\n+  display: flex;\r\n+  flex-direction: column;\r\n+  gap: 2px;\r\n+}\r\n+.product-title {\r\n+  font-weight: 900;\r\n+  font-size: 1.18rem;\r\n+  margin-bottom: 2px;\r\n+  color: #1a2a3a;\r\n+}\r\n+.product-detail {\r\n+  font-size: 1.04rem;\r\n+  color: #444;\r\n+  margin-bottom: 2px;\r\n+  display: flex;\r\n+  align-items: center;\r\n+  gap: 6px;\r\n+}\r\n+.order-summary-title {\r\n+  font-size: 1.45rem;\r\n+  font-weight: 900;\r\n+  margin-bottom: 18px;\r\n+  color: #1a2a3a;\r\n+  letter-spacing: -0.5px;\r\n+}\r\n+.order-summary-total-row {\r\n+  display: flex;\r\n+  justify-content: space-between;\r\n+  font-size: 1.22rem;\r\n+  font-weight: 900;\r\n+  margin-top: 10px;\r\n+  letter-spacing: 0.2px;\r\n+}\r\n+.order-summary-total {\r\n+  color: #FC6421;\r\n+  font-size: 1.32rem;\r\n+  font-weight: 900;\r\n+}\r\n+.order-summary-taxes {\r\n+  color: #0a8a4a;\r\n+  font-size: 0.97rem;\r\n+  margin-top: 2px;\r\n+  text-align: right;\r\n+}\r\n+.phone-row {\r\n+  margin-bottom: 0;\r\n+}\r\n+.phone-input-group {\r\n+  display: flex;\r\n+  gap: 10px;\r\n+  align-items: stretch;\r\n+}\r\n+.country-code-display {\r\n+  display: flex;\r\n+  align-items: center;\r\n+  gap: 6px;\r\n+  background: #f7fafd;\r\n+  border: 2px solid #e0e6ed;\r\n+  border-radius: 10px;\r\n+  padding: 12px 16px;\r\n+  font-size: 1.08rem;\r\n+  min-width: 90px;\r\n+  font-weight: 600;\r\n+  height: 48px;\r\n+  box-sizing: border-box;\r\n+}\r\n+.flag-option {\r\n+  width: 22px;\r\n+  height: 16px;\r\n+  margin-right: 7px;\r\n+  vertical-align: middle;\r\n+  border-radius: 3px;\r\n+  box-shadow: 0 1px 3px rgba(0,0,0,0.07);\r\n+}\r\n+.country-select-row {\r\n+  margin-bottom: 0;\r\n+}\r\n+.country-select-flex {\r\n+  display: flex;\r\n+  align-items: center;\r\n+  gap: 8px;\r\n+}\r\n+.country-select-fullwidth {\r\n+  width: 100%;\r\n+  min-width: 0;\r\n+  box-sizing: border-box;\r\n+}\r\n+.phone-input {\r\n+  flex: 1;\r\n+  padding: 12px 16px;\r\n+  border-radius: 10px;\r\n+  border: 2px solid #e0e6ed;\r\n+  font-size: 1.08rem;\r\n+  background: #f7fafd;\r\n+  outline: none;\r\n+  transition: border 0.2s;\r\n+  height: 48px;\r\n+  box-sizing: border-box;\r\n+}\r\n+.phone-input:focus {\r\n+  border-color: #0070eb;\r\n+}\r\n+.location-btn {\r\n+  background: #f7f7f7;\r\n+  border: 1px solid #ddd;\r\n+  border-radius: 6px;\r\n+  font-size: 1.08rem;\r\n+  padding: 0 16px;\r\n+  height: 48px;\r\n+  display: flex;\r\n+  align-items: center;\r\n+  justify-content: center;\r\n+  cursor: pointer;\r\n+  transition: background 0.2s;\r\n+}\r\n+.location-btn:hover {\r\n+  background: #eee;\r\n+}\r\n+@media (max-width: 900px) {\r\n+  .checkout-main-layout {\r\n+    flex-direction: column;\r\n+    gap: 0;\r\n+    padding: 0.5rem 0 1rem 0;\r\n+    min-height: 100vh;\r\n+    width: 100vw;\r\n+    background: #fff;\r\n+    box-sizing: border-box;\r\n+  }\r\n+  .checkout-left, .checkout-right, .order-summary-panel {\r\n+    width: 100%;\r\n+    max-width: 100vw;\r\n+    border-radius: 10px;\r\n+    box-shadow: 0 2px 8px rgba(44,62,80,0.06);\r\n+    padding: 0.7rem 0.5rem;\r\n+    margin: 0 0 1rem 0;\r\n+    background: #fff;\r\n+    box-sizing: border-box;\r\n+    min-width: 0;\r\n+  }\r\n+}\r\n+@media (max-width: 600px) {\r\n+  body, html {\r\n+    background: #fff !important;\r\n+    margin: 0 !important;\r\n+    padding: 0 !important;\r\n+    overflow-x: hidden !important;\r\n+  }\r\n+  .checkout-main-layout {\r\n+    flex-direction: column !important;\r\n+    align-items: stretch !important;\r\n+    gap: 0 !important;\r\n+    padding: 0 12px !important;\r\n+    min-height: 100vh !important;\r\n+    width: 100vw !important;\r\n+    max-width: 100vw !important;\r\n+    background: #fff !important;\r\n+    box-sizing: border-box !important;\r\n+  }\r\n+  .checkout-left,\r\n+  .checkout-right,\r\n+  .order-summary-panel {\r\n+    width: 100% !important;\r\n+    max-width: 100vw !important;\r\n+    min-width: 0 !important;\r\n+    border-radius: 10px !important;\r\n+    box-shadow: 0 2px 8px rgba(44,62,80,0.06) !important;\r\n+    padding: 0.7rem 0.5rem !important;\r\n+    margin: 0 auto 1rem auto !important;\r\n+    background: #fff !important;\r\n+    box-sizing: border-box !important;\r\n+  }\r\n+  .checkout-left h2 {\r\n+    font-size: 1.4rem !important;\r\n+    margin-bottom: 14px !important;\r\n+  }\r\n+  .form-group,\r\n+  .country-select-fullwidth,\r\n+  .phone-input,\r\n+  .country-code-display,\r\n+  .pay-btn {\r\n+    max-width: 100vw !important;\r\n+    min-width: 0 !important;\r\n+    box-sizing: border-box !important;\r\n+    font-size: 1rem !important;\r\n+    padding-left: 0.2rem !important;\r\n+    padding-right: 0.2rem !important;\r\n+  }\r\n+  .order-summary-img {\r\n+    width: 44px !important;\r\n+    height: 44px !important;\r\n+    min-width: 32px !important;\r\n+    max-width: 44px !important;\r\n+  }\r\n+  .product-title,\r\n+  .order-summary-title {\r\n+    font-size: 1.08rem !important;\r\n+    word-break: break-word !important;\r\n+  }\r\n+  .pay-btn {\r\n+    font-size: 1.08rem !important;\r\n+    padding: 0.7rem 0 !important;\r\n+    margin-top: 0.5rem !important;\r\n+    border-radius: 12px !important;\r\n+  }\r\n+  .form-note {\r\n+    font-size: 0.9rem !important;\r\n+  }\r\n+  /* Scroll edilebilirlik için: */\r\n+  .checkout-modal,\r\n+  .checkout-content {\r\n+    width: 100vw !important;\r\n+    max-width: 100vw !important;\r\n+    height: 100vh !important;\r\n+    max-height: 100vh !important;\r\n+    overflow-y: auto !important;\r\n+    background: #fff !important;\r\n+    border-radius: 0 !important;\r\n+    box-shadow: none !important;\r\n+    padding: 0 !important;\r\n+    margin: 0 !important;\r\n+    display: flex !important;\r\n+    flex-direction: column !important;\r\n+    align-items: stretch !important;\r\n+  }\r\n+}\r\n+</style>\r\n"
                },
                {
                    "date": 1752611465986,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -295,9 +295,10 @@\n         price: selectedTourStore.tour?.price || '',\r\n         booking_date: selectedTourStore.tour?.bookingDate || null,\r\n         participants: selectedTourStore.tour?.participants || 1,\r\n         tenant_id: 'ad5257a5-efdd-4314-9e5e-b56aabe321f1',\r\n-        currency_id:1\r\n+        currency_id:1,\r\n+        language_id:1,\r\n       },\r\n       payment: {\r\n         payment_method_id: paymentMethod.id,\r\n         amount: selectedTourStore.tour?.price || '',\r\n@@ -727,733 +728,4 @@\n     align-items: stretch !important;\r\n   }\r\n }\r\n </style>\r\n-<template>\r\n-  <div class=\"checkout-main-layout\">\r\n-    <!-- SOL: Kişisel Bilgiler ve Ödeme Formu (Stepper) -->\r\n-    <div class=\"checkout-left\">\r\n-      <h2>Enter your personal details</h2>\r\n-      <div class=\"secure-checkout\">\r\n-        <i class=\"fas fa-lock\"></i> Checkout is fast and secure\r\n-      </div>\r\n-      <form @submit.prevent=\"handleStep\" class=\"checkout-form\">\r\n-        <template v-if=\"currentStep === 1\">\r\n-          <div class=\"form-group\">\r\n-            <label>Full name <span class=\"required\">*</span></label>\r\n-            <input v-model=\"name\" type=\"text\" required placeholder=\"Full Name\" />\r\n-          </div>\r\n-          <div class=\"form-group\">\r\n-            <label>Email <span class=\"required\">*</span></label>\r\n-            <input v-model=\"email\" type=\"email\" required placeholder=\"you@email.com\" />\r\n-          </div>\r\n-          <div class=\"form-group\">\r\n-            <label>Country <span class=\"required\">*</span></label>\r\n-            <select v-model=\"country\" class=\"country-select-fullwidth\">\r\n-              <option v-for=\"c in countries\" :key=\"c.iso\" :value=\"c.name\">\r\n-                {{ c.name }}\r\n-              </option>\r\n-            </select>\r\n-          </div>\r\n-          <div class=\"form-group phone-row\">\r\n-            <label>Mobile phone number <span class=\"required\">*</span></label>\r\n-            <div class=\"phone-input-group\">\r\n-              <div class=\"country-code-display\">\r\n-                <img :src=\"`https://flagsapi.com/${selectedCountry.iso}/flat/24.png`\" :alt=\"selectedCountry.name\" class=\"flag-option\" />\r\n-                <span>{{ selectedCountry.code }}</span>\r\n-              </div>\r\n-              <input\r\n-                v-model=\"phone\"\r\n-                type=\"tel\"\r\n-                required\r\n-                class=\"phone-input\"\r\n-                :placeholder=\"selectedCountry.iso === 'TR' ? '5xx xxx xx xx' : selectedCountry.iso === 'US' ? 'xxx xxx xxxx' : selectedCountry.iso === 'DE' ? '1xx xxxxxxx' : 'xx xx xx xx'\"\r\n-              />\r\n-            </div>\r\n-          </div>\r\n-          <div class=\"form-group\">\r\n-            <label>Hotel Address <span class=\"required\">*</span></label>\r\n-            <input v-model=\"hotelAddress\" type=\"text\" required placeholder=\"Enter your hotel address\" />\r\n-          </div>\r\n-          <div class=\"form-group\">\r\n-            <label>Your Location (optional)</label>\r\n-            <div style=\"display: flex; gap: 8px;\">\r\n-              <input\r\n-                v-model=\"userLocation\"\r\n-                type=\"text\"\r\n-                placeholder=\"Click the button to add your current location\"\r\n-                readonly\r\n-                class=\"input\"\r\n-                style=\"flex: 1;\"\r\n-              />\r\n-              <button type=\"button\" @click=\"getLocation\" class=\"location-btn\" title=\"Use my location\">📍</button>\r\n-            </div>\r\n-            <div v-if=\"userLocation\">\r\n-              <a\r\n-                :href=\"getGoogleMapsLink(userLocation)\"\r\n-                target=\"_blank\"\r\n-                rel=\"noopener\"\r\n-                style=\"color: #0070eb; text-decoration: underline; cursor: pointer; font-size:0.97em;\"\r\n-              >\r\n-                View on Google Maps\r\n-              </a>\r\n-            </div>\r\n-          </div>\r\n-          <div class=\"form-note\">We’ll only contact you with essential updates or changes to your booking</div>\r\n-          <button class=\"pay-btn\" type=\"submit\">Go to payment</button>\r\n-        </template>\r\n-        <template v-else>\r\n-          <div class=\"form-group\">\r\n-            <label>Name on Card <span class=\"required\">*</span></label>\r\n-            <input v-model=\"cardName\" type=\"text\" required placeholder=\"Name on Card\" />\r\n-          </div>\r\n-          <div class=\"form-group\">\r\n-            <label>Card Details</label>\r\n-            <div id=\"card-element\" class=\"stripe-card-element\"></div>\r\n-          </div>\r\n-          <button class=\"pay-btn\" :disabled=\"loading\" type=\"submit\">\r\n-            <span v-if=\"loading\">Processing...</span>\r\n-            <span v-else>Pay Now</span>\r\n-          </button>\r\n-          <div v-if=\"success\" class=\"success-message\">\r\n-            <i class=\"fas fa-check-circle\"></i> \r\n-            <div>\r\n-              <strong>Payment Successful!</strong>\r\n-              <p>Your booking has been confirmed. You will receive a confirmation email shortly.</p>\r\n-            </div>\r\n-          </div>\r\n-          <div v-if=\"errorMsg\" class=\"error-message\">\r\n-            <i class=\"fas fa-exclamation-circle\"></i> {{ errorMsg }}\r\n-          </div>\r\n-        </template>\r\n-      </form>\r\n-    </div>\r\n-    <!-- SAĞ: Order Summary -->\r\n-    <div class=\"checkout-right\">\r\n-      <div class=\"order-summary-panel\" v-if=\"selectedTourStore.tour\">\r\n-        <div class=\"order-summary-title\">Order summary</div>\r\n-        <div class=\"order-summary-product\">\r\n-          <img class=\"order-summary-img\" :src=\"selectedTourStore.tour.image\" :alt=\"selectedTourStore.tour.title\" />\r\n-          <div class=\"order-summary-product-info\">\r\n-            <div class=\"product-title\">{{ selectedTourStore.tour.title }}</div>\r\n-            <div class=\"product-detail\">{{ selectedTourStore.tour.description }}</div>\r\n-            <div class=\"product-detail\" v-if=\"selectedTourStore.tour.bookingDate\">\r\n-              <i class=\"fas fa-calendar-alt\"></i> {{ selectedTourStore.tour.bookingDate }}\r\n-            </div>\r\n-            <div class=\"product-detail\"><i class=\"fas fa-user\"></i> {{ selectedTourStore.tour.participants }}</div>\r\n-            <div class=\"product-detail\" v-if=\"selectedTourStore.tour.email\"><i class=\"fas fa-envelope\"></i> {{ selectedTourStore.tour.email }}</div>\r\n-            <div class=\"product-detail\" v-if=\"selectedTourStore.tour.userLocation\">\r\n-              <i class=\"fas fa-map-marker-alt\"></i>\r\n-              <a\r\n-                :href=\"getGoogleMapsLink(selectedTourStore.tour.userLocation)\"\r\n-                target=\"_blank\"\r\n-                rel=\"noopener\"\r\n-                style=\"color: #0070eb; text-decoration: underline; cursor: pointer;\"\r\n-              >\r\n-                {{ selectedTourStore.tour.userLocation }}\r\n-              </a>\r\n-            </div>\r\n-          </div>\r\n-        </div>\r\n-        <div class=\"order-summary-total-row\">\r\n-          <span>Total</span>\r\n-          <span class=\"order-summary-total\">{{ selectedTourStore.tour.price }}</span>\r\n-        </div>\r\n-        <div class=\"order-summary-taxes\">All taxes and fees included</div>\r\n-      </div>\r\n-    </div>\r\n-  </div>\r\n-</template>\r\n-\r\n-<script setup>\r\n-import { ref, onMounted, watch, computed } from 'vue'\r\n-import { useSelectedTourStore } from '../stores/selectedTour'\r\n-let stripe, elements, card\r\n-\r\n-const selectedTourStore = useSelectedTourStore()\r\n-\r\n-// Tüm ülkeler ve kodları\r\n-const countries = [\r\n-  { name: 'Turkey', code: '+90', iso: 'TR' },\r\n-  { name: 'United States', code: '+1', iso: 'US' },\r\n-  { name: 'Germany', code: '+49', iso: 'DE' },\r\n-  { name: 'France', code: '+33', iso: 'FR' },\r\n-  { name: 'United Kingdom', code: '+44', iso: 'GB' },\r\n-  { name: 'Italy', code: '+39', iso: 'IT' },\r\n-  { name: 'Spain', code: '+34', iso: 'ES' },\r\n-  { name: 'Netherlands', code: '+31', iso: 'NL' },\r\n-  { name: 'Russia', code: '+7', iso: 'RU' },\r\n-  { name: 'Japan', code: '+81', iso: 'JP' },\r\n-  { name: 'China', code: '+86', iso: 'CN' },\r\n-  { name: 'India', code: '+91', iso: 'IN' },\r\n-  { name: 'Brazil', code: '+55', iso: 'BR' },\r\n-  { name: 'Canada', code: '+1', iso: 'CA' },\r\n-  { name: 'Australia', code: '+61', iso: 'AU' },\r\n-]\r\n-\r\n-const country = ref(countries[0].name)\r\n-const phone = ref('')\r\n-const selectedCountry = computed(() => countries.find(c => c.name === country.value) || countries[0])\r\n-\r\n-const name = ref('')\r\n-const email = ref(selectedTourStore.tour?.email || '')\r\n-const cardName = ref('')\r\n-const loading = ref(false)\r\n-const success = ref(false)\r\n-const errorMsg = ref('')\r\n-const currentStep = ref(1)\r\n-const hotelAddress = ref(\"\");\r\n-const userLocation = ref(\"\");\r\n-\r\n-onMounted(() => {\r\n-  watch(currentStep, (step) => {\r\n-    if (step === 2) {\r\n-      setTimeout(() => {\r\n-        if (!window.Stripe) {\r\n-          const script = document.createElement('script')\r\n-          script.src = 'https://js.stripe.com/v3/'\r\n-          script.onload = setupStripe\r\n-          document.head.appendChild(script)\r\n-        } else {\r\n-          setupStripe()\r\n-        }\r\n-      }, 0)\r\n-    }\r\n-  }, { immediate: true })\r\n-})\r\n-\r\n-function setupStripe() {\r\n-  if (card) return\r\n-  // Stripe public key - production'da gerçek key kullanılacak\r\n-  stripe = window.Stripe('pk_live_51RM643JpoC0mNwVWeCMfS1WckX9Bh8d25g02RHaIZBk8VTi84YEyFvZLsrC0WR53KMyB3YIcuWVAH7u1PmpDeG4t00ZdNBIgfd') // TODO: Replace with your real public key\r\n-  elements = stripe.elements()\r\n-  card = elements.create('card', {\r\n-    style: {\r\n-      base: {\r\n-        fontSize: '16px',\r\n-        color: '#424770',\r\n-        '::placeholder': {\r\n-          color: '#aab7c4',\r\n-        },\r\n-      },\r\n-      invalid: {\r\n-        color: '#9e2146',\r\n-      },\r\n-    },\r\n-  })\r\n-  card.mount('#card-element')\r\n-}\r\n-\r\n-function getLocation() {\r\n-  if (!navigator.geolocation) {\r\n-    alert('Geolocation is not supported by your browser');\r\n-    return;\r\n-  }\r\n-  navigator.geolocation.getCurrentPosition(async (position) => {\r\n-    const { latitude, longitude } = position.coords;\r\n-    try {\r\n-      const response = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${latitude}&lon=${longitude}`);\r\n-      const data = await response.json();\r\n-      userLocation.value = data.display_name || `${latitude}, ${longitude}`;\r\n-    } catch (e) {\r\n-      userLocation.value = `${latitude}, ${longitude}`;\r\n-    }\r\n-  }, (error) => {\r\n-    alert('Could not get your location');\r\n-  });\r\n-}\r\n-\r\n-function getGoogleMapsLink(location) {\r\n-  // Eğer koordinat ise (ör: \"41.123, 29.456\")\r\n-  if (/^-?\\d+(\\.\\d+)?[, ]+\\s*-?\\d+(\\.\\d+)?$/.test(location)) {\r\n-    const coords = location.split(/[ ,]+/).map(Number);\r\n-    return `https://www.google.com/maps?q=${coords[0]},${coords[1]}`;\r\n-  }\r\n-  // Değilse adres olarak arat\r\n-  return `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(location)}`;\r\n-}\r\n-\r\n-const handleStep = async () => {\r\n-  if (currentStep.value === 1) {\r\n-    if (!name.value || !email.value || !country.value || !phone.value || !hotelAddress.value) {\r\n-      errorMsg.value = 'Please fill in all required fields.'\r\n-      return\r\n-    }\r\n-    currentStep.value = 2\r\n-    return\r\n-  }\r\n-  \r\n-  loading.value = true\r\n-  errorMsg.value = ''\r\n-  success.value = false\r\n-  \r\n-  try {\r\n-    // Stripe Payment Method oluştur\r\n-    const { paymentMethod, error } = await stripe.createPaymentMethod({\r\n-      type: 'card',\r\n-      card: card,\r\n-      billing_details: {\r\n-        name: cardName.value,\r\n-        email: email.value,\r\n-        phone: selectedCountry.value.code + phone.value,\r\n-        address: {\r\n-          country: selectedCountry.value.iso,\r\n-          line1: hotelAddress.value\r\n-        }\r\n-      }\r\n-    })\r\n-    \r\n-    if (error) {\r\n-      errorMsg.value = error.message\r\n-      loading.value = false\r\n-      return\r\n-    }\r\n-\r\n-    // Rezervasyon datasını hazırla\r\n-    const bookingData = {\r\n-      customer: {\r\n-        name: name.value,\r\n-        email: email.value,\r\n-        phone: selectedCountry.value.code + phone.value,\r\n-        country: country.value,\r\n-        hotel_address: hotelAddress.value,\r\n-        user_location: userLocation.value\r\n-      },\r\n-      tour: {\r\n-        id: selectedTourStore.tour?.id || null,\r\n-        title: selectedTourStore.tour?.title || '',\r\n-        description: selectedTourStore.tour?.description || '',\r\n-        price: selectedTourStore.tour?.price || '',\r\n-        booking_date: selectedTourStore.tour?.bookingDate || null,\r\n-        participants: selectedTourStore.tour?.participants || 1,\r\n-        tenant_id: 'ad5257a5-efdd-4314-9e5e-b56aabe321f1'\r\n-      },\r\n-      payment: {\r\n-        payment_method_id: paymentMethod.id,\r\n-        amount: selectedTourStore.tour?.price || '',\r\n-        currency: 'TRY' // veya dinamik olarak belirlenebilir\r\n-      },\r\n-      stripe_payment_id: paymentMethod.id\r\n-    }\r\n-\r\n-    // Laravel backend'e rezervasyon datasını gönder\r\n-    const response = await fetch('https://searchyourtour.com/api/submit-booking', {\r\n-      method: 'POST',\r\n-      headers: {\r\n-        'Content-Type': 'application/json',\r\n-        'Accept': 'application/json'\r\n-      },\r\n-      body: JSON.stringify(bookingData)\r\n-    })\r\n-\r\n-    const result = await response.json()\r\n-\r\n-    if (!response.ok) {\r\n-      throw new Error(result.message || 'Booking submission failed')\r\n-    }\r\n-\r\n-    // Başarılı ödeme\r\n-    loading.value = false\r\n-    success.value = true\r\n-    \r\n-    // Başarılı ödeme sonrası işlemler (isteğe bağlı)\r\n-    setTimeout(() => {\r\n-      // Kullanıcıyı başarı sayfasına yönlendir veya modal göster\r\n-      console.log('Payment successful:', result)\r\n-    }, 2000)\r\n-\r\n-  } catch (err) {\r\n-    console.error('Payment error:', err)\r\n-    errorMsg.value = err.message || 'Payment failed. Please try again.'\r\n-    loading.value = false\r\n-  }\r\n-}\r\n-</script>\r\n-\r\n-<style scoped>\r\n-/* CheckoutForm.vue'dan taşınan stiller */\r\n-.checkout-main-layout {\r\n-  display: flex;\r\n-  gap: 64px;\r\n-  align-items: stretch;\r\n-  justify-content: center;\r\n-  background: #f6f8fa;\r\n-  padding: 48px 0;\r\n-  min-height: 100vh;\r\n-}\r\n-.checkout-left, .checkout-right {\r\n-  flex: 1 1 0;\r\n-  min-width: 340px;\r\n-  max-width: 600px;\r\n-  background: #fff;\r\n-  border-radius: 26px;\r\n-  box-shadow: 0 8px 32px rgba(44,62,80,0.10);\r\n-  padding: 36px 44px 24px 44px;\r\n-  font-family: 'Inter', 'Segoe UI', Arial, sans-serif;\r\n-  display: flex;\r\n-  flex-direction: column;\r\n-  justify-content: flex-start;\r\n-  height: 100%;\r\n-}\r\n-.checkout-left h2 {\r\n-  color: #1a2a3a;\r\n-  font-size: 2.3rem;\r\n-  margin-bottom: 18px;\r\n-  font-weight: 900;\r\n-  text-align: left;\r\n-  letter-spacing: -1px;\r\n-}\r\n-.secure-checkout {\r\n-  color: #0a8a4a;\r\n-  font-size: 1.08rem;\r\n-  margin-bottom: 18px;\r\n-  display: flex;\r\n-  align-items: center;\r\n-  gap: 8px;\r\n-  font-weight: 600;\r\n-}\r\n-.checkout-form {\r\n-  display: flex;\r\n-  flex-direction: column;\r\n-  gap: 18px;\r\n-}\r\n-.form-group {\r\n-  display: flex;\r\n-  flex-direction: column;\r\n-  gap: 4px;\r\n-}\r\n-input, select {\r\n-  padding: 12px 16px;\r\n-  border-radius: 10px;\r\n-  border: 2px solid #e0e6ed;\r\n-  font-size: 1.08rem;\r\n-  background: #f7fafd;\r\n-  outline: none;\r\n-  transition: border 0.2s;\r\n-}\r\n-input:focus, select:focus {\r\n-  border-color: #0070eb;\r\n-}\r\n-.stripe-card-element {\r\n-  padding: 12px 16px;\r\n-  border-radius: 10px;\r\n-  border: 2px solid #e0e6ed;\r\n-  background: #f7fafd;\r\n-  margin-top: 4px;\r\n-}\r\n-.form-note {\r\n-  font-size: 0.97rem;\r\n-  color: #888;\r\n-  margin-bottom: 8px;\r\n-}\r\n-.required { color: #d7263d; }\r\n-.pay-btn {\r\n-  width: 100%;\r\n-  background: linear-gradient(90deg, #FC6421 60%, #ff3401 100%);\r\n-  color: #fff;\r\n-  font-size: 1.15rem;\r\n-  font-weight: 800;\r\n-  border: none;\r\n-  border-radius: 32px;\r\n-  padding: 1.05rem 0;\r\n-  margin-top: 8px;\r\n-  cursor: pointer;\r\n-  transition: background 0.2s, box-shadow 0.2s;\r\n-  box-shadow: 0 2px 12px rgba(0,112,235,0.08);\r\n-  letter-spacing: 0.5px;\r\n-}\r\n-.pay-btn:hover {\r\n-  background: linear-gradient(90deg, #ff0000 60%, #ff0000 100%);\r\n-  box-shadow: 0 4px 24px rgba(0,112,235,0.13);\r\n-}\r\n-.pay-btn:disabled {\r\n-  background: #aaa;\r\n-  cursor: not-allowed;\r\n-}\r\n-.success-message {\r\n-  color: #27ae60;\r\n-  text-align: center;\r\n-  margin-top: 16px;\r\n-  font-size: 1.1rem;\r\n-  display: flex;\r\n-  align-items: center;\r\n-  justify-content: center;\r\n-  gap: 12px;\r\n-  padding: 16px;\r\n-  background: #f8fff9;\r\n-  border: 1px solid #27ae60;\r\n-  border-radius: 8px;\r\n-}\r\n-\r\n-.success-message i {\r\n-  font-size: 1.5rem;\r\n-  flex-shrink: 0;\r\n-}\r\n-\r\n-.success-message div {\r\n-  text-align: left;\r\n-}\r\n-\r\n-.success-message strong {\r\n-  display: block;\r\n-  margin-bottom: 4px;\r\n-}\r\n-\r\n-.success-message p {\r\n-  margin: 0;\r\n-  font-size: 0.95rem;\r\n-  color: #666;\r\n-}\r\n-.error-message {\r\n-  color: #d7263d;\r\n-  text-align: center;\r\n-  margin-top: 12px;\r\n-  font-size: 1rem;\r\n-}\r\n-\r\n-.order-summary-panel {\r\n-  display: flex;\r\n-  flex-direction: column;\r\n-  gap: 18px;\r\n-  height: 100%;\r\n-}\r\n-.order-summary-product {\r\n-  display: flex;\r\n-  gap: 22px;\r\n-  margin-bottom: 10px;\r\n-  align-items: flex-start;\r\n-}\r\n-.order-summary-img {\r\n-  width: 88px;\r\n-  height: 88px;\r\n-  border-radius: 14px;\r\n-  object-fit: cover;\r\n-  box-shadow: 0 2px 8px rgba(44,62,80,0.08);\r\n-}\r\n-.order-summary-product-info {\r\n-  flex: 1;\r\n-  display: flex;\r\n-  flex-direction: column;\r\n-  gap: 2px;\r\n-}\r\n-.product-title {\r\n-  font-weight: 900;\r\n-  font-size: 1.18rem;\r\n-  margin-bottom: 2px;\r\n-  color: #1a2a3a;\r\n-}\r\n-.product-detail {\r\n-  font-size: 1.04rem;\r\n-  color: #444;\r\n-  margin-bottom: 2px;\r\n-  display: flex;\r\n-  align-items: center;\r\n-  gap: 6px;\r\n-}\r\n-.order-summary-title {\r\n-  font-size: 1.45rem;\r\n-  font-weight: 900;\r\n-  margin-bottom: 18px;\r\n-  color: #1a2a3a;\r\n-  letter-spacing: -0.5px;\r\n-}\r\n-.order-summary-total-row {\r\n-  display: flex;\r\n-  justify-content: space-between;\r\n-  font-size: 1.22rem;\r\n-  font-weight: 900;\r\n-  margin-top: 10px;\r\n-  letter-spacing: 0.2px;\r\n-}\r\n-.order-summary-total {\r\n-  color: #FC6421;\r\n-  font-size: 1.32rem;\r\n-  font-weight: 900;\r\n-}\r\n-.order-summary-taxes {\r\n-  color: #0a8a4a;\r\n-  font-size: 0.97rem;\r\n-  margin-top: 2px;\r\n-  text-align: right;\r\n-}\r\n-.phone-row {\r\n-  margin-bottom: 0;\r\n-}\r\n-.phone-input-group {\r\n-  display: flex;\r\n-  gap: 10px;\r\n-  align-items: stretch;\r\n-}\r\n-.country-code-display {\r\n-  display: flex;\r\n-  align-items: center;\r\n-  gap: 6px;\r\n-  background: #f7fafd;\r\n-  border: 2px solid #e0e6ed;\r\n-  border-radius: 10px;\r\n-  padding: 12px 16px;\r\n-  font-size: 1.08rem;\r\n-  min-width: 90px;\r\n-  font-weight: 600;\r\n-  height: 48px;\r\n-  box-sizing: border-box;\r\n-}\r\n-.flag-option {\r\n-  width: 22px;\r\n-  height: 16px;\r\n-  margin-right: 7px;\r\n-  vertical-align: middle;\r\n-  border-radius: 3px;\r\n-  box-shadow: 0 1px 3px rgba(0,0,0,0.07);\r\n-}\r\n-.country-select-row {\r\n-  margin-bottom: 0;\r\n-}\r\n-.country-select-flex {\r\n-  display: flex;\r\n-  align-items: center;\r\n-  gap: 8px;\r\n-}\r\n-.country-select-fullwidth {\r\n-  width: 100%;\r\n-  min-width: 0;\r\n-  box-sizing: border-box;\r\n-}\r\n-.phone-input {\r\n-  flex: 1;\r\n-  padding: 12px 16px;\r\n-  border-radius: 10px;\r\n-  border: 2px solid #e0e6ed;\r\n-  font-size: 1.08rem;\r\n-  background: #f7fafd;\r\n-  outline: none;\r\n-  transition: border 0.2s;\r\n-  height: 48px;\r\n-  box-sizing: border-box;\r\n-}\r\n-.phone-input:focus {\r\n-  border-color: #0070eb;\r\n-}\r\n-.location-btn {\r\n-  background: #f7f7f7;\r\n-  border: 1px solid #ddd;\r\n-  border-radius: 6px;\r\n-  font-size: 1.08rem;\r\n-  padding: 0 16px;\r\n-  height: 48px;\r\n-  display: flex;\r\n-  align-items: center;\r\n-  justify-content: center;\r\n-  cursor: pointer;\r\n-  transition: background 0.2s;\r\n-}\r\n-.location-btn:hover {\r\n-  background: #eee;\r\n-}\r\n-@media (max-width: 900px) {\r\n-  .checkout-main-layout {\r\n-    flex-direction: column;\r\n-    gap: 0;\r\n-    padding: 0.5rem 0 1rem 0;\r\n-    min-height: 100vh;\r\n-    width: 100vw;\r\n-    background: #fff;\r\n-    box-sizing: border-box;\r\n-  }\r\n-  .checkout-left, .checkout-right, .order-summary-panel {\r\n-    width: 100%;\r\n-    max-width: 100vw;\r\n-    border-radius: 10px;\r\n-    box-shadow: 0 2px 8px rgba(44,62,80,0.06);\r\n-    padding: 0.7rem 0.5rem;\r\n-    margin: 0 0 1rem 0;\r\n-    background: #fff;\r\n-    box-sizing: border-box;\r\n-    min-width: 0;\r\n-  }\r\n-}\r\n-@media (max-width: 600px) {\r\n-  body, html {\r\n-    background: #fff !important;\r\n-    margin: 0 !important;\r\n-    padding: 0 !important;\r\n-    overflow-x: hidden !important;\r\n-  }\r\n-  .checkout-main-layout {\r\n-    flex-direction: column !important;\r\n-    align-items: stretch !important;\r\n-    gap: 0 !important;\r\n-    padding: 0 12px !important;\r\n-    min-height: 100vh !important;\r\n-    width: 100vw !important;\r\n-    max-width: 100vw !important;\r\n-    background: #fff !important;\r\n-    box-sizing: border-box !important;\r\n-  }\r\n-  .checkout-left,\r\n-  .checkout-right,\r\n-  .order-summary-panel {\r\n-    width: 100% !important;\r\n-    max-width: 100vw !important;\r\n-    min-width: 0 !important;\r\n-    border-radius: 10px !important;\r\n-    box-shadow: 0 2px 8px rgba(44,62,80,0.06) !important;\r\n-    padding: 0.7rem 0.5rem !important;\r\n-    margin: 0 auto 1rem auto !important;\r\n-    background: #fff !important;\r\n-    box-sizing: border-box !important;\r\n-  }\r\n-  .checkout-left h2 {\r\n-    font-size: 1.4rem !important;\r\n-    margin-bottom: 14px !important;\r\n-  }\r\n-  .form-group,\r\n-  .country-select-fullwidth,\r\n-  .phone-input,\r\n-  .country-code-display,\r\n-  .pay-btn {\r\n-    max-width: 100vw !important;\r\n-    min-width: 0 !important;\r\n-    box-sizing: border-box !important;\r\n-    font-size: 1rem !important;\r\n-    padding-left: 0.2rem !important;\r\n-    padding-right: 0.2rem !important;\r\n-  }\r\n-  .order-summary-img {\r\n-    width: 44px !important;\r\n-    height: 44px !important;\r\n-    min-width: 32px !important;\r\n-    max-width: 44px !important;\r\n-  }\r\n-  .product-title,\r\n-  .order-summary-title {\r\n-    font-size: 1.08rem !important;\r\n-    word-break: break-word !important;\r\n-  }\r\n-  .pay-btn {\r\n-    font-size: 1.08rem !important;\r\n-    padding: 0.7rem 0 !important;\r\n-    margin-top: 0.5rem !important;\r\n-    border-radius: 12px !important;\r\n-  }\r\n-  .form-note {\r\n-    font-size: 0.9rem !important;\r\n-  }\r\n-  /* Scroll edilebilirlik için: */\r\n-  .checkout-modal,\r\n-  .checkout-content {\r\n-    width: 100vw !important;\r\n-    max-width: 100vw !important;\r\n-    height: 100vh !important;\r\n-    max-height: 100vh !important;\r\n-    overflow-y: auto !important;\r\n-    background: #fff !important;\r\n-    border-radius: 0 !important;\r\n-    box-shadow: none !important;\r\n-    padding: 0 !important;\r\n-    margin: 0 !important;\r\n-    display: flex !important;\r\n-    flex-direction: column !important;\r\n-    align-items: stretch !important;\r\n-  }\r\n-}\r\n-</style>\r\n"
                },
                {
                    "date": 1752611494592,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -297,8 +297,9 @@\n         participants: selectedTourStore.tour?.participants || 1,\r\n         tenant_id: 'ad5257a5-efdd-4314-9e5e-b56aabe321f1',\r\n         currency_id:1,\r\n         language_id:1,\r\n+        buggy:0\r\n       },\r\n       payment: {\r\n         payment_method_id: paymentMethod.id,\r\n         amount: selectedTourStore.tour?.price || '',\r\n"
                },
                {
                    "date": 1752611585509,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -297,9 +297,12 @@\n         participants: selectedTourStore.tour?.participants || 1,\r\n         tenant_id: 'ad5257a5-efdd-4314-9e5e-b56aabe321f1',\r\n         currency_id:1,\r\n         language_id:1,\r\n-        buggy:0\r\n+        buggy:0,\r\n+        adult:1,\r\n+        child:0,\r\n+        infant:0,\r\n       },\r\n       payment: {\r\n         payment_method_id: paymentMethod.id,\r\n         amount: selectedTourStore.tour?.price || '',\r\n"
                },
                {
                    "date": 1752611633931,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -301,8 +301,9 @@\n         buggy:0,\r\n         adult:1,\r\n         child:0,\r\n         infant:0,\r\n+        roomNumber:0\r\n       },\r\n       payment: {\r\n         payment_method_id: paymentMethod.id,\r\n         amount: selectedTourStore.tour?.price || '',\r\n"
                },
                {
                    "date": 1752660856804,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -241,8 +241,20 @@\n   // Değilse adres olarak arat\r\n   return `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(location)}`;\r\n }\r\n \r\n+// Price string'ini kuruş cinsinden integer'a çevir\r\n+function convertPriceToCents(priceString) {\r\n+  if (!priceString) return 0;\r\n+  \r\n+  // \"€10.00\" formatından sayısal değeri çıkar\r\n+  const numericValue = priceString.replace(/[^\\d.,]/g, '').replace(',', '.');\r\n+  const amount = parseFloat(numericValue);\r\n+  \r\n+  // Kuruş cinsinden döndür (1000 = 10.00 TL)\r\n+  return Math.round(amount * 100);\r\n+}\r\n+\r\n const handleStep = async () => {\r\n   if (currentStep.value === 1) {\r\n     if (!name.value || !email.value || !country.value || !phone.value || !hotelAddress.value) {\r\n       errorMsg.value = 'Please fill in all required fields.'\r\n"
                },
                {
                    "date": 1752660862626,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -317,9 +317,9 @@\n         roomNumber:0\r\n       },\r\n       payment: {\r\n         payment_method_id: paymentMethod.id,\r\n-        amount: selectedTourStore.tour?.price || '',\r\n+        amount: convertPriceToCents(selectedTourStore.tour?.price || ''),\r\n         currency: 'TRY' // veya dinamik olarak belirlenebilir\r\n       },\r\n       stripe_payment_id: paymentMethod.id\r\n     }\r\n"
                },
                {
                    "date": 1752667339278,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -305,16 +305,16 @@\n         title: selectedTourStore.tour?.title || '',\r\n         description: selectedTourStore.tour?.description || '',\r\n         price: selectedTourStore.tour?.price || '',\r\n         booking_date: selectedTourStore.tour?.bookingDate || null,\r\n-        participants: selectedTourStore.tour?.participants || 1,\r\n+        participants: selectedTourStore.tour?.participants || '',\r\n         tenant_id: 'ad5257a5-efdd-4314-9e5e-b56aabe321f1',\r\n         currency_id:1,\r\n         language_id:1,\r\n         buggy:0,\r\n-        adult:1,\r\n-        child:0,\r\n-        infant:0,\r\n+        adult: selectedTourStore.tour?.adult || 1,\r\n+        child: selectedTourStore.tour?.child || 0,\r\n+        infant: selectedTourStore.tour?.infant || 0,\r\n         roomNumber:0\r\n       },\r\n       payment: {\r\n         payment_method_id: paymentMethod.id,\r\n"
                },
                {
                    "date": 1752667430149,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -305,9 +305,8 @@\n         title: selectedTourStore.tour?.title || '',\r\n         description: selectedTourStore.tour?.description || '',\r\n         price: selectedTourStore.tour?.price || '',\r\n         booking_date: selectedTourStore.tour?.bookingDate || null,\r\n-        participants: selectedTourStore.tour?.participants || '',\r\n         tenant_id: 'ad5257a5-efdd-4314-9e5e-b56aabe321f1',\r\n         currency_id:1,\r\n         language_id:1,\r\n         buggy:0,\r\n"
                },
                {
                    "date": 1752738624382,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -304,9 +304,9 @@\n         id: selectedTourStore.tour?.id || null,\r\n         title: selectedTourStore.tour?.title || '',\r\n         description: selectedTourStore.tour?.description || '',\r\n         price: selectedTourStore.tour?.price || '',\r\n-        booking_date: selectedTourStore.tour?.bookingDate || null,\r\n+        booking_date: selectedTourStore.tour?.bookingDate || new Date().toISOString().split('T')[0],\r\n         tenant_id: 'ad5257a5-efdd-4314-9e5e-b56aabe321f1',\r\n         currency_id:1,\r\n         language_id:1,\r\n         buggy:0,\r\n"
                },
                {
                    "date": 1752738644978,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -304,9 +304,9 @@\n         id: selectedTourStore.tour?.id || null,\r\n         title: selectedTourStore.tour?.title || '',\r\n         description: selectedTourStore.tour?.description || '',\r\n         price: selectedTourStore.tour?.price || '',\r\n-        booking_date: selectedTourStore.tour?.bookingDate || new Date().toISOString().split('T')[0],\r\n+        booking_date: selectedTourStore.tour?.bookingDate || null,\r\n         tenant_id: 'ad5257a5-efdd-4314-9e5e-b56aabe321f1',\r\n         currency_id:1,\r\n         language_id:1,\r\n         buggy:0,\r\n"
                },
                {
                    "date": 1752738681420,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -304,9 +304,9 @@\n         id: selectedTourStore.tour?.id || null,\r\n         title: selectedTourStore.tour?.title || '',\r\n         description: selectedTourStore.tour?.description || '',\r\n         price: selectedTourStore.tour?.price || '',\r\n-        booking_date: selectedTourStore.tour?.bookingDate || null,\r\n+        booking_date: selectedTourStore.tour?.bookingDate || new Date().toISOString().split('T')[0],\r\n         tenant_id: 'ad5257a5-efdd-4314-9e5e-b56aabe321f1',\r\n         currency_id:1,\r\n         language_id:1,\r\n         buggy:0,\r\n"
                },
                {
                    "date": 1752745720137,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -140,8 +140,37 @@\n let stripe, elements, card\r\n \r\n const selectedTourStore = useSelectedTourStore()\r\n \r\n+// Helper function to get language ID from language code\r\n+const getLanguageId = (langCode) => {\r\n+  const languageMap = {\r\n+    'tr': 2,    // Türkçe\r\n+    'de': 6,    // Deutsch\r\n+    'en': 1,    // English\r\n+    'ar': 3,    // العربية\r\n+    'es': 4,    // Español\r\n+    'fr': 5,    // Français\r\n+    'it': 7,    // Italiano\r\n+    'pt': 8,    // Português\r\n+    'zh': 10,   // 中文\r\n+    'ja': 11,   // 日本語\r\n+    'ru': 9     // Русский\r\n+  }\r\n+  return languageMap[langCode] || 1\r\n+}\r\n+\r\n+// Helper function to get currency ID from currency code\r\n+const getCurrencyId = (currencyCode) => {\r\n+  const currencyMap = {\r\n+    'EUR': 4,\r\n+    'USD': 5,\r\n+    'GBP': 6,\r\n+    'TRY': 7\r\n+  }\r\n+  return currencyMap[currencyCode] || 4\r\n+}\r\n+\r\n // Tüm ülkeler ve kodları\r\n const countries = [\r\n   { name: 'Turkey', code: '+90', iso: 'TR' },\r\n   { name: 'United States', code: '+1', iso: 'US' },\r\n"
                },
                {
                    "date": 1752745735991,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -335,10 +335,10 @@\n         description: selectedTourStore.tour?.description || '',\r\n         price: selectedTourStore.tour?.price || '',\r\n         booking_date: selectedTourStore.tour?.bookingDate || new Date().toISOString().split('T')[0],\r\n         tenant_id: 'ad5257a5-efdd-4314-9e5e-b56aabe321f1',\r\n-        currency_id:1,\r\n-        language_id:1,\r\n+        currency_id: getCurrencyId(localStorage.getItem('selectedCurrency') || 'EUR'),\r\n+        language_id: getLanguageId(localStorage.getItem('selectedLanguage') || 'en'),\r\n         buggy:0,\r\n         adult: selectedTourStore.tour?.adult || 1,\r\n         child: selectedTourStore.tour?.child || 0,\r\n         infant: selectedTourStore.tour?.infant || 0,\r\n"
                },
                {
                    "date": 1752745745169,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -346,9 +346,9 @@\n       },\r\n       payment: {\r\n         payment_method_id: paymentMethod.id,\r\n         amount: convertPriceToCents(selectedTourStore.tour?.price || ''),\r\n-        currency: 'TRY' // veya dinamik olarak belirlenebilir\r\n+        currency: localStorage.getItem('selectedCurrency') || 'EUR'\r\n       },\r\n       stripe_payment_id: paymentMethod.id\r\n     }\r\n \r\n"
                },
                {
                    "date": 1752745753205,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -318,8 +318,21 @@\n       loading.value = false\r\n       return\r\n     }\r\n \r\n+    // Get current language and currency from localStorage\r\n+    const currentLanguage = localStorage.getItem('selectedLanguage') || 'en'\r\n+    const currentCurrency = localStorage.getItem('selectedCurrency') || 'EUR'\r\n+    const languageId = getLanguageId(currentLanguage)\r\n+    const currencyId = getCurrencyId(currentCurrency)\r\n+    \r\n+    console.log('Checkout language/currency:', {\r\n+      currentLanguage,\r\n+      currentCurrency,\r\n+      languageId,\r\n+      currencyId\r\n+    })\r\n+    \r\n     // Rezervasyon datasını hazırla\r\n     const bookingData = {\r\n       customer: {\r\n         name: name.value,\r\n"
                },
                {
                    "date": 1752745758512,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -348,10 +348,10 @@\n         description: selectedTourStore.tour?.description || '',\r\n         price: selectedTourStore.tour?.price || '',\r\n         booking_date: selectedTourStore.tour?.bookingDate || new Date().toISOString().split('T')[0],\r\n         tenant_id: 'ad5257a5-efdd-4314-9e5e-b56aabe321f1',\r\n-        currency_id: getCurrencyId(localStorage.getItem('selectedCurrency') || 'EUR'),\r\n-        language_id: getLanguageId(localStorage.getItem('selectedLanguage') || 'en'),\r\n+        currency_id: currencyId,\r\n+        language_id: languageId,\r\n         buggy:0,\r\n         adult: selectedTourStore.tour?.adult || 1,\r\n         child: selectedTourStore.tour?.child || 0,\r\n         infant: selectedTourStore.tour?.infant || 0,\r\n"
                },
                {
                    "date": 1752750421426,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -279,8 +279,9 @@\n   const numericValue = priceString.replace(/[^\\d.,]/g, '').replace(',', '.');\r\n   const amount = parseFloat(numericValue);\r\n   \r\n   // Kuruş cinsinden döndür (1000 = 10.00 TL)\r\n+  // Tam hassasiyet için Math.round kullanmıyoruz\r\n   return Math.round(amount * 100);\r\n }\r\n \r\n const handleStep = async () => {\r\n@@ -359,9 +360,9 @@\n       },\r\n       payment: {\r\n         payment_method_id: paymentMethod.id,\r\n         amount: convertPriceToCents(selectedTourStore.tour?.price || ''),\r\n-        currency: localStorage.getItem('selectedCurrency') || 'EUR'\r\n+        currency: currentCurrency\r\n       },\r\n       stripe_payment_id: paymentMethod.id\r\n     }\r\n \r\n"
                },
                {
                    "date": 1752768019589,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -355,9 +355,10 @@\n         buggy:0,\r\n         adult: selectedTourStore.tour?.adult || 1,\r\n         child: selectedTourStore.tour?.child || 0,\r\n         infant: selectedTourStore.tour?.infant || 0,\r\n-        roomNumber:0\r\n+        roomNumber:0,\r\n+        randomCode:Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15)\r\n       },\r\n       payment: {\r\n         payment_method_id: paymentMethod.id,\r\n         amount: convertPriceToCents(selectedTourStore.tour?.price || ''),\r\n"
                },
                {
                    "date": 1752784245872,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -376,12 +376,25 @@\n       },\r\n       body: JSON.stringify(bookingData)\r\n     })\r\n \r\n-    const result = await response.json()\r\n+    // API yanıtını güvenli bir şekilde işle\r\n+    let result\r\n+    const responseText = await response.text()\r\n+    \r\n+    console.log('API Response Status:', response.status)\r\n+    console.log('API Response Text:', responseText)\r\n+    \r\n+    try {\r\n+      result = responseText ? JSON.parse(responseText) : {}\r\n+    } catch (parseError) {\r\n+      console.error('JSON Parse Error:', parseError)\r\n+      console.error('Response Text:', responseText)\r\n+      throw new Error('Invalid response from server')\r\n+    }\r\n \r\n     if (!response.ok) {\r\n-      throw new Error(result.message || 'Booking submission failed')\r\n+      throw new Error(result.message || `Booking submission failed (${response.status})`)\r\n     }\r\n \r\n     // Başarılı ödeme\r\n     loading.value = false\r\n"
                },
                {
                    "date": 1752784258563,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -367,13 +367,29 @@\n       stripe_payment_id: paymentMethod.id\r\n     }\r\n \r\n     // Laravel backend'e rezervasyon datasını gönder\r\n+    console.log('Sending booking data:', bookingData)\r\n+    \r\n+    // Test için önce basit bir API çağrısı yapalım\r\n+    try {\r\n+      const testResponse = await fetch('https://searchyourtour.com/api/health', {\r\n+        method: 'GET',\r\n+        headers: {\r\n+          'Accept': 'application/json'\r\n+        }\r\n+      })\r\n+      console.log('API Health Check Status:', testResponse.status)\r\n+    } catch (testError) {\r\n+      console.warn('API Health Check Failed:', testError)\r\n+    }\r\n+    \r\n     const response = await fetch('https://searchyourtour.com/api/submit-booking', {\r\n       method: 'POST',\r\n       headers: {\r\n         'Content-Type': 'application/json',\r\n-        'Accept': 'application/json'\r\n+        'Accept': 'application/json',\r\n+        'Origin': window.location.origin\r\n       },\r\n       body: JSON.stringify(bookingData)\r\n     })\r\n \r\n"
                },
                {
                    "date": 1752787620659,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -397,16 +397,30 @@\n     let result\r\n     const responseText = await response.text()\r\n     \r\n     console.log('API Response Status:', response.status)\r\n+    console.log('API Response Headers:', Object.fromEntries(response.headers.entries()))\r\n     console.log('API Response Text:', responseText)\r\n     \r\n-    try {\r\n-      result = responseText ? JSON.parse(responseText) : {}\r\n-    } catch (parseError) {\r\n-      console.error('JSON Parse Error:', parseError)\r\n-      console.error('Response Text:', responseText)\r\n-      throw new Error('Invalid response from server')\r\n+    // Eğer yanıt boşsa ama status 200 ise, başarılı kabul et\r\n+    if (response.status === 200 && !responseText.trim()) {\r\n+      console.log('Empty response but status 200 - treating as success')\r\n+      result = { success: true, message: 'Booking submitted successfully' }\r\n+    } else {\r\n+      try {\r\n+        result = responseText ? JSON.parse(responseText) : {}\r\n+      } catch (parseError) {\r\n+        console.error('JSON Parse Error:', parseError)\r\n+        console.error('Response Text:', responseText)\r\n+        \r\n+        // Eğer status 200 ise ama JSON parse edilemiyorsa, başarılı kabul et\r\n+        if (response.status === 200) {\r\n+          console.log('Status 200 but invalid JSON - treating as success')\r\n+          result = { success: true, message: 'Booking submitted successfully' }\r\n+        } else {\r\n+          throw new Error('Invalid response from server')\r\n+        }\r\n+      }\r\n     }\r\n \r\n     if (!response.ok) {\r\n       throw new Error(result.message || `Booking submission failed (${response.status})`)\r\n"
                },
                {
                    "date": 1752787626211,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -429,12 +429,16 @@\n     // Başarılı ödeme\r\n     loading.value = false\r\n     success.value = true\r\n     \r\n-    // Başarılı ödeme sonrası işlemler (isteğe bağlı)\r\n+    console.log('Payment and booking successful:', result)\r\n+    \r\n+    // Başarılı ödeme sonrası işlemler\r\n     setTimeout(() => {\r\n       // Kullanıcıyı başarı sayfasına yönlendir veya modal göster\r\n-      console.log('Payment successful:', result)\r\n+      console.log('Redirecting to success page...')\r\n+      // Burada kullanıcıyı başarı sayfasına yönlendirebilirsiniz\r\n+      // this.$router.push('/success')\r\n     }, 2000)\r\n \r\n   } catch (err) {\r\n     console.error('Payment error:', err)\r\n"
                },
                {
                    "date": 1752787632202,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -441,9 +441,21 @@\n     }, 2000)\r\n \r\n   } catch (err) {\r\n     console.error('Payment error:', err)\r\n-    errorMsg.value = err.message || 'Payment failed. Please try again.'\r\n+    \r\n+    // Daha açıklayıcı hata mesajları\r\n+    let errorMessage = 'Payment failed. Please try again.'\r\n+    \r\n+    if (err.message.includes('Invalid response from server')) {\r\n+      errorMessage = 'Payment was processed but there was an issue with the booking confirmation. Please contact support.'\r\n+    } else if (err.message.includes('Failed to fetch')) {\r\n+      errorMessage = 'Network error. Please check your connection and try again.'\r\n+    } else if (err.message) {\r\n+      errorMessage = err.message\r\n+    }\r\n+    \r\n+    errorMsg.value = errorMessage\r\n     loading.value = false\r\n   }\r\n }\r\n </script>\r\n"
                },
                {
                    "date": 1752790368524,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -367,95 +367,36 @@\n       stripe_payment_id: paymentMethod.id\r\n     }\r\n \r\n     // Laravel backend'e rezervasyon datasını gönder\r\n-    console.log('Sending booking data:', bookingData)\r\n-    \r\n-    // Test için önce basit bir API çağrısı yapalım\r\n-    try {\r\n-      const testResponse = await fetch('https://searchyourtour.com/api/health', {\r\n-        method: 'GET',\r\n-        headers: {\r\n-          'Accept': 'application/json'\r\n-        }\r\n-      })\r\n-      console.log('API Health Check Status:', testResponse.status)\r\n-    } catch (testError) {\r\n-      console.warn('API Health Check Failed:', testError)\r\n-    }\r\n-    \r\n     const response = await fetch('https://searchyourtour.com/api/submit-booking', {\r\n       method: 'POST',\r\n       headers: {\r\n         'Content-Type': 'application/json',\r\n-        'Accept': 'application/json',\r\n-        'Origin': window.location.origin\r\n+        'Accept': 'application/json'\r\n       },\r\n       body: JSON.stringify(bookingData)\r\n     })\r\n \r\n-    // API yanıtını güvenli bir şekilde işle\r\n-    let result\r\n-    const responseText = await response.text()\r\n-    \r\n-    console.log('API Response Status:', response.status)\r\n-    console.log('API Response Headers:', Object.fromEntries(response.headers.entries()))\r\n-    console.log('API Response Text:', responseText)\r\n-    \r\n-    // Eğer yanıt boşsa ama status 200 ise, başarılı kabul et\r\n-    if (response.status === 200 && !responseText.trim()) {\r\n-      console.log('Empty response but status 200 - treating as success')\r\n-      result = { success: true, message: 'Booking submitted successfully' }\r\n-    } else {\r\n-      try {\r\n-        result = responseText ? JSON.parse(responseText) : {}\r\n-      } catch (parseError) {\r\n-        console.error('JSON Parse Error:', parseError)\r\n-        console.error('Response Text:', responseText)\r\n-        \r\n-        // Eğer status 200 ise ama JSON parse edilemiyorsa, başarılı kabul et\r\n-        if (response.status === 200) {\r\n-          console.log('Status 200 but invalid JSON - treating as success')\r\n-          result = { success: true, message: 'Booking submitted successfully' }\r\n-        } else {\r\n-          throw new Error('Invalid response from server')\r\n-        }\r\n-      }\r\n-    }\r\n+    const result = await response.json()\r\n \r\n     if (!response.ok) {\r\n-      throw new Error(result.message || `Booking submission failed (${response.status})`)\r\n+      throw new Error(result.message || 'Booking submission failed')\r\n     }\r\n \r\n     // Başarılı ödeme\r\n     loading.value = false\r\n     success.value = true\r\n     \r\n-    console.log('Payment and booking successful:', result)\r\n-    \r\n-    // Başarılı ödeme sonrası işlemler\r\n+    // Başarılı ödeme sonrası işlemler (isteğe bağlı)\r\n     setTimeout(() => {\r\n       // Kullanıcıyı başarı sayfasına yönlendir veya modal göster\r\n-      console.log('Redirecting to success page...')\r\n-      // Burada kullanıcıyı başarı sayfasına yönlendirebilirsiniz\r\n-      // this.$router.push('/success')\r\n+      console.log('Payment successful:', result)\r\n     }, 2000)\r\n \r\n   } catch (err) {\r\n     console.error('Payment error:', err)\r\n-    \r\n-    // Daha açıklayıcı hata mesajları\r\n-    let errorMessage = 'Payment failed. Please try again.'\r\n-    \r\n-    if (err.message.includes('Invalid response from server')) {\r\n-      errorMessage = 'Payment was processed but there was an issue with the booking confirmation. Please contact support.'\r\n-    } else if (err.message.includes('Failed to fetch')) {\r\n-      errorMessage = 'Network error. Please check your connection and try again.'\r\n-    } else if (err.message) {\r\n-      errorMessage = err.message\r\n-    }\r\n-    \r\n-    errorMsg.value = errorMessage\r\n+    errorMsg.value = err.message || 'Payment failed. Please try again.'\r\n     loading.value = false\r\n   }\r\n }\r\n </script>\r\n"
                },
                {
                    "date": 1752790378011,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -386,13 +386,23 @@\n     // Başarılı ödeme\r\n     loading.value = false\r\n     success.value = true\r\n     \r\n-    // Başarılı ödeme sonrası işlemler (isteğe bağlı)\r\n-    setTimeout(() => {\r\n-      // Kullanıcıyı başarı sayfasına yönlendir veya modal göster\r\n-      console.log('Payment successful:', result)\r\n-    }, 2000)\r\n+    console.log('Payment successful:', result)\r\n+    \r\n+    // Backend'den gelen return_url varsa kullanıcıyı yönlendir\r\n+    if (result.return_url) {\r\n+      console.log('Redirecting to:', result.return_url)\r\n+      setTimeout(() => {\r\n+        window.location.href = result.return_url\r\n+      }, 2000)\r\n+    } else {\r\n+      // return_url yoksa varsayılan başarı mesajı göster\r\n+      setTimeout(() => {\r\n+        console.log('No return URL provided, showing success message')\r\n+        // Burada başarı sayfasına yönlendirebilir veya modal gösterebilirsiniz\r\n+      }, 2000)\r\n+    }\r\n \r\n   } catch (err) {\r\n     console.error('Payment error:', err)\r\n     errorMsg.value = err.message || 'Payment failed. Please try again.'\r\n"
                },
                {
                    "date": 1752790386068,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -392,9 +392,17 @@\n     // Backend'den gelen return_url varsa kullanıcıyı yönlendir\r\n     if (result.return_url) {\r\n       console.log('Redirecting to:', result.return_url)\r\n       setTimeout(() => {\r\n-        window.location.href = result.return_url\r\n+        // Eğer aynı domain içindeyse Vue Router kullan, değilse window.location\r\n+        if (result.return_url.startsWith(window.location.origin)) {\r\n+          // Aynı domain - Vue Router ile yönlendir\r\n+          const path = result.return_url.replace(window.location.origin, '')\r\n+          this.$router.push(path)\r\n+        } else {\r\n+          // Farklı domain - window.location ile yönlendir\r\n+          window.location.href = result.return_url\r\n+        }\r\n       }, 2000)\r\n     } else {\r\n       // return_url yoksa varsayılan başarı mesajı göster\r\n       setTimeout(() => {\r\n"
                },
                {
                    "date": 1752820838106,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -376,8 +376,10 @@\n       },\r\n       body: JSON.stringify(bookingData)\r\n     })\r\n \r\n+\r\n+  \r\n     const result = await response.json()\r\n \r\n     if (!response.ok) {\r\n       throw new Error(result.message || 'Booking submission failed')\r\n@@ -388,27 +390,55 @@\n     success.value = true\r\n     \r\n     console.log('Payment successful:', result)\r\n     \r\n-    // Backend'den gelen return_url varsa kullanıcıyı yönlendir\r\n-    if (result.return_url) {\r\n-      console.log('Redirecting to:', result.return_url)\r\n+    // Backend'den gelen success ve message kontrolü\r\n+    if (result.success === true && result.message) {\r\n+      console.log('Payment success confirmed, redirecting to success page')\r\n+      \r\n+      // Booking detaylarını hazırla\r\n+      const bookingParams = {\r\n+        bookingId: result.booking_id || result.id || 'N/A',\r\n+        tourTitle: selectedTourStore.tour?.title || 'N/A',\r\n+        bookingDate: selectedTourStore.tour?.bookingDate || new Date().toISOString().split('T')[0],\r\n+        amount: selectedTourStore.tour?.price || 'N/A',\r\n+        customerName: name.value || 'N/A'\r\n+      }\r\n+      \r\n+      // Payment success sayfasına yönlendir\r\n       setTimeout(() => {\r\n-        // Eğer aynı domain içindeyse Vue Router kullan, değilse window.location\r\n+        const router = useRouter()\r\n+        router.push({\r\n+          name: 'payment-success',\r\n+          query: bookingParams\r\n+        })\r\n+      }, 2000)\r\n+    } else if (result.return_url) {\r\n+      // Eski return_url mantığı (geriye uyumluluk için)\r\n+      console.log('Redirecting to return_url:', result.return_url)\r\n+      setTimeout(() => {\r\n         if (result.return_url.startsWith(window.location.origin)) {\r\n-          // Aynı domain - Vue Router ile yönlendir\r\n           const path = result.return_url.replace(window.location.origin, '')\r\n-          this.$router.push(path)\r\n+          const router = useRouter()\r\n+          router.push(path)\r\n         } else {\r\n-          // Farklı domain - window.location ile yönlendir\r\n           window.location.href = result.return_url\r\n         }\r\n       }, 2000)\r\n     } else {\r\n-      // return_url yoksa varsayılan başarı mesajı göster\r\n+      // Varsayılan başarı mesajı\r\n       setTimeout(() => {\r\n-        console.log('No return URL provided, showing success message')\r\n-        // Burada başarı sayfasına yönlendirebilir veya modal gösterebilirsiniz\r\n+        console.log('No success data provided, showing default success message')\r\n+        const router = useRouter()\r\n+        router.push({\r\n+          name: 'payment-success',\r\n+          query: {\r\n+            tourTitle: selectedTourStore.tour?.title || 'N/A',\r\n+            bookingDate: selectedTourStore.tour?.bookingDate || new Date().toISOString().split('T')[0],\r\n+            amount: selectedTourStore.tour?.price || 'N/A',\r\n+            customerName: name.value || 'N/A'\r\n+          }\r\n+        })\r\n       }, 2000)\r\n     }\r\n \r\n   } catch (err) {\r\n"
                },
                {
                    "date": 1752820851428,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -135,8 +135,9 @@\n </template>\r\n \r\n <script setup>\r\n import { ref, onMounted, watch, computed } from 'vue'\r\n+import { useRouter } from 'vue-router'\r\n import { useSelectedTourStore } from '../stores/selectedTour'\r\n let stripe, elements, card\r\n \r\n const selectedTourStore = useSelectedTourStore()\r\n"
                },
                {
                    "date": 1752820861214,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -139,8 +139,9 @@\n import { useRouter } from 'vue-router'\r\n import { useSelectedTourStore } from '../stores/selectedTour'\r\n let stripe, elements, card\r\n \r\n+const router = useRouter()\r\n const selectedTourStore = useSelectedTourStore()\r\n \r\n // Helper function to get language ID from language code\r\n const getLanguageId = (langCode) => {\r\n@@ -406,9 +407,8 @@\n       }\r\n       \r\n       // Payment success sayfasına yönlendir\r\n       setTimeout(() => {\r\n-        const router = useRouter()\r\n         router.push({\r\n           name: 'payment-success',\r\n           query: bookingParams\r\n         })\r\n"
                },
                {
                    "date": 1752820874997,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -379,8 +379,9 @@\n       body: JSON.stringify(bookingData)\r\n     })\r\n \r\n \r\n+    console.log('Booking data:', bookingData)\r\n   \r\n     const result = await response.json()\r\n \r\n     if (!response.ok) {\r\n@@ -418,9 +419,8 @@\n       console.log('Redirecting to return_url:', result.return_url)\r\n       setTimeout(() => {\r\n         if (result.return_url.startsWith(window.location.origin)) {\r\n           const path = result.return_url.replace(window.location.origin, '')\r\n-          const router = useRouter()\r\n           router.push(path)\r\n         } else {\r\n           window.location.href = result.return_url\r\n         }\r\n@@ -428,9 +428,8 @@\n     } else {\r\n       // Varsayılan başarı mesajı\r\n       setTimeout(() => {\r\n         console.log('No success data provided, showing default success message')\r\n-        const router = useRouter()\r\n         router.push({\r\n           name: 'payment-success',\r\n           query: {\r\n             tourTitle: selectedTourStore.tour?.title || 'N/A',\r\n"
                },
                {
                    "date": 1752820881137,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -379,9 +379,9 @@\n       body: JSON.stringify(bookingData)\r\n     })\r\n \r\n \r\n-    console.log('Booking data:', bookingData)\r\n+    console.log('Booking data:', response)\r\n   \r\n     const result = await response.json()\r\n \r\n     if (!response.ok) {\r\n"
                },
                {
                    "date": 1752823123765,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -394,9 +394,10 @@\n     \r\n     console.log('Payment successful:', result)\r\n     \r\n     // Backend'den gelen success ve message kontrolü\r\n-    if (result.success === true && result.message) {\r\n+    // response.data.status ve response.data.message olarak geliyor\r\n+    if (result.status === true && result.message) {\r\n       console.log('Payment success confirmed, redirecting to success page')\r\n       \r\n       // Booking detaylarını hazırla\r\n       const bookingParams = {\r\n"
                },
                {
                    "date": 1752823141875,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -391,9 +391,11 @@\n     // Başarılı ödeme\r\n     loading.value = false\r\n     success.value = true\r\n     \r\n-    console.log('Payment successful:', result)\r\n+    console.log('Payment response:', result)\r\n+    console.log('Response status:', result.status)\r\n+    console.log('Response message:', result.message)\r\n     \r\n     // Backend'den gelen success ve message kontrolü\r\n     // response.data.status ve response.data.message olarak geliyor\r\n     if (result.status === true && result.message) {\r\n"
                },
                {
                    "date": 1752824894470,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -392,19 +392,29 @@\n     loading.value = false\r\n     success.value = true\r\n     \r\n     console.log('Payment response:', result)\r\n-    console.log('Response status:', result.status)\r\n-    console.log('Response message:', result.message)\r\n+    console.log('Payment original:', result.payment?.original)\r\n+    console.log('Action:', result.action)\r\n     \r\n-    // Backend'den gelen success ve message kontrolü\r\n-    // response.data.status ve response.data.message olarak geliyor\r\n-    if (result.status === true && result.message) {\r\n-      console.log('Payment success confirmed, redirecting to success page')\r\n+    // Stripe response yapısına göre kontrol\r\n+    const paymentOriginal = result.payment?.original\r\n+    \r\n+    // 3D Secure gerekli mi?\r\n+    if (paymentOriginal?.requires_action === true) {\r\n+      console.log('3D Secure required, handling authentication...')\r\n+      errorMsg.value = '3D Secure authentication required. Please complete the verification.'\r\n+      loading.value = false\r\n+      return\r\n+    }\r\n+    \r\n+    // Ödeme başarılı mı?\r\n+    if (paymentOriginal?.success === true) {\r\n+      console.log('Payment successful, redirecting to success page')\r\n       \r\n       // Booking detaylarını hazırla\r\n       const bookingParams = {\r\n-        bookingId: result.booking_id || result.id || 'N/A',\r\n+        bookingId: result.reservation_id || 'N/A',\r\n         tourTitle: selectedTourStore.tour?.title || 'N/A',\r\n         bookingDate: selectedTourStore.tour?.bookingDate || new Date().toISOString().split('T')[0],\r\n         amount: selectedTourStore.tour?.price || 'N/A',\r\n         customerName: name.value || 'N/A'\r\n@@ -416,33 +426,13 @@\n           name: 'payment-success',\r\n           query: bookingParams\r\n         })\r\n       }, 2000)\r\n-    } else if (result.return_url) {\r\n-      // Eski return_url mantığı (geriye uyumluluk için)\r\n-      console.log('Redirecting to return_url:', result.return_url)\r\n-      setTimeout(() => {\r\n-        if (result.return_url.startsWith(window.location.origin)) {\r\n-          const path = result.return_url.replace(window.location.origin, '')\r\n-          router.push(path)\r\n-        } else {\r\n-          window.location.href = result.return_url\r\n-        }\r\n-      }, 2000)\r\n     } else {\r\n-      // Varsayılan başarı mesajı\r\n-      setTimeout(() => {\r\n-        console.log('No success data provided, showing default success message')\r\n-        router.push({\r\n-          name: 'payment-success',\r\n-          query: {\r\n-            tourTitle: selectedTourStore.tour?.title || 'N/A',\r\n-            bookingDate: selectedTourStore.tour?.bookingDate || new Date().toISOString().split('T')[0],\r\n-            amount: selectedTourStore.tour?.price || 'N/A',\r\n-            customerName: name.value || 'N/A'\r\n-          }\r\n-        })\r\n-      }, 2000)\r\n+      // Ödeme başarısız\r\n+      console.log('Payment failed:', paymentOriginal?.message)\r\n+      errorMsg.value = paymentOriginal?.message || 'Payment failed. Please try again.'\r\n+      loading.value = false\r\n     }\r\n \r\n   } catch (err) {\r\n     console.error('Payment error:', err)\r\n"
                },
                {
                    "date": 1752824903204,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -401,10 +401,30 @@\n     \r\n     // 3D Secure gerekli mi?\r\n     if (paymentOriginal?.requires_action === true) {\r\n       console.log('3D Secure required, handling authentication...')\r\n-      errorMsg.value = '3D Secure authentication required. Please complete the verification.'\r\n-      loading.value = false\r\n+      \r\n+      // 3D Secure işlemini başlat\r\n+      const { error } = await stripe.handleCardAction(paymentOriginal.payment_intent_client_secret)\r\n+      \r\n+      if (error) {\r\n+        console.log('3D Secure error:', error)\r\n+        errorMsg.value = error.message || '3D Secure authentication failed.'\r\n+        loading.value = false\r\n+        return\r\n+      }\r\n+      \r\n+      // 3D Secure başarılı, ödemeyi tekrar dene\r\n+      console.log('3D Secure completed, retrying payment...')\r\n+      errorMsg.value = '3D Secure completed. Processing payment...'\r\n+      \r\n+      // Burada backend'e 3D Secure tamamlandı bilgisi gönderilebilir\r\n+      // Şimdilik basit bir mesaj gösteriyoruz\r\n+      setTimeout(() => {\r\n+        errorMsg.value = 'Payment processing completed. Please check your email for confirmation.'\r\n+        loading.value = false\r\n+      }, 3000)\r\n+      \r\n       return\r\n     }\r\n     \r\n     // Ödeme başarılı mı?\r\n"
                },
                {
                    "date": 1752920603338,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -383,15 +383,17 @@\n     console.log('Booking data:', response)\r\n   \r\n     const result = await response.json()\r\n \r\n-    if (!response.ok) {\r\n+    if (!response.status) {\r\n       throw new Error(result.message || 'Booking submission failed')\r\n     }\r\n \r\n-    // Başarılı ödeme\r\n-    loading.value = false\r\n-    success.value = true\r\n+    // Başarılı ödeme durumunda success mesajını göster\r\n+    if (result?.success === true) {\r\n+      loading.value = false\r\n+      success.value = true\r\n+    }\r\n     \r\n     console.log('Payment response:', result)\r\n     console.log('Payment original:', result.payment?.original)\r\n     console.log('Action:', result.action)\r\n"
                },
                {
                    "date": 1752921767699,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -406,9 +406,9 @@\n       console.log('3D Secure required, handling authentication...')\r\n       \r\n       // 3D Secure işlemini başlat\r\n       const { error } = await stripe.handleCardAction(paymentOriginal.payment_intent_client_secret)\r\n-      \r\n+      console.log('3D Secure error:', error)\r\n       if (error) {\r\n         console.log('3D Secure error:', error)\r\n         errorMsg.value = error.message || '3D Secure authentication failed.'\r\n         loading.value = false\r\n"
                },
                {
                    "date": 1752922309094,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -380,9 +380,29 @@\n     })\r\n \r\n \r\n     console.log('Booking data:', response)\r\n-  \r\n+    if (response?.client_secret) {\r\n+      const result = await stripe.confirmCardPayment(data.client_secret, {\r\n+        payment_method: {\r\n+          card: cardElement, // Stripe Elements component'in\r\n+          billing_details: {\r\n+            name: name.value\r\n+          }\r\n+        },\r\n+        return_url: 'https://yourfrontend.com/payment-status' // Gerekirse yönlendirme\r\n+      });\r\n+\r\n+      if (result.error) {\r\n+        console.error('Ödeme hatası:', result.error.message);\r\n+        // Hata mesajı göster\r\n+      } else if (result.paymentIntent.status === 'succeeded') {\r\n+        // ✅ Ödeme başarılı\r\n+        // Başarı sayfasına yönlendir\r\n+      } else {\r\n+        // Ödeme beklemede ya da reddedildi\r\n+      }\r\n+    /*\r\n     const result = await response.json()\r\n \r\n     if (!response.status) {\r\n       throw new Error(result.message || 'Booking submission failed')\r\n@@ -406,9 +426,9 @@\n       console.log('3D Secure required, handling authentication...')\r\n       \r\n       // 3D Secure işlemini başlat\r\n       const { error } = await stripe.handleCardAction(paymentOriginal.payment_intent_client_secret)\r\n-      console.log('3D Secure error:', error)\r\n+      console.log('3D Secure error11111:', error)\r\n       if (error) {\r\n         console.log('3D Secure error:', error)\r\n         errorMsg.value = error.message || '3D Secure authentication failed.'\r\n         loading.value = false\r\n@@ -425,9 +445,9 @@\n         errorMsg.value = 'Payment processing completed. Please check your email for confirmation.'\r\n         loading.value = false\r\n       }, 3000)\r\n       \r\n-      return\r\n+      return*/\r\n     }\r\n     \r\n     // Ödeme başarılı mı?\r\n     if (paymentOriginal?.success === true) {\r\n"
                },
                {
                    "date": 1752922316004,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -381,9 +381,9 @@\n \r\n \r\n     console.log('Booking data:', response)\r\n     if (response?.client_secret) {\r\n-      const result = await stripe.confirmCardPayment(data.client_secret, {\r\n+      const result = await stripe.confirmCardPayment(response.client_secret, {\r\n         payment_method: {\r\n           card: cardElement, // Stripe Elements component'in\r\n           billing_details: {\r\n             name: name.value\r\n"
                },
                {
                    "date": 1752922467840,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -447,9 +447,9 @@\n       }, 3000)\r\n       \r\n       return*/\r\n     }\r\n-    \r\n+    /*\r\n     // Ödeme başarılı mı?\r\n     if (paymentOriginal?.success === true) {\r\n       console.log('Payment successful, redirecting to success page')\r\n       \r\n@@ -479,9 +479,9 @@\n   } catch (err) {\r\n     console.error('Payment error:', err)\r\n     errorMsg.value = err.message || 'Payment failed. Please try again.'\r\n     loading.value = false\r\n-  }\r\n+  } */\r\n }\r\n </script>\r\n \r\n <style scoped>\r\n"
                },
                {
                    "date": 1752922507035,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -447,41 +447,15 @@\n       }, 3000)\r\n       \r\n       return*/\r\n     }\r\n-    /*\r\n-    // Ödeme başarılı mı?\r\n-    if (paymentOriginal?.success === true) {\r\n-      console.log('Payment successful, redirecting to success page')\r\n-      \r\n-      // Booking detaylarını hazırla\r\n-      const bookingParams = {\r\n-        bookingId: result.reservation_id || 'N/A',\r\n-        tourTitle: selectedTourStore.tour?.title || 'N/A',\r\n-        bookingDate: selectedTourStore.tour?.bookingDate || new Date().toISOString().split('T')[0],\r\n-        amount: selectedTourStore.tour?.price || 'N/A',\r\n-        customerName: name.value || 'N/A'\r\n-      }\r\n-      \r\n-      // Payment success sayfasına yönlendir\r\n-      setTimeout(() => {\r\n-        router.push({\r\n-          name: 'payment-success',\r\n-          query: bookingParams\r\n-        })\r\n-      }, 2000)\r\n-    } else {\r\n-      // Ödeme başarısız\r\n-      console.log('Payment failed:', paymentOriginal?.message)\r\n-      errorMsg.value = paymentOriginal?.message || 'Payment failed. Please try again.'\r\n-      loading.value = false\r\n-    }\r\n+ \r\n \r\n   } catch (err) {\r\n     console.error('Payment error:', err)\r\n     errorMsg.value = err.message || 'Payment failed. Please try again.'\r\n     loading.value = false\r\n-  } */\r\n+  }\r\n }\r\n </script>\r\n \r\n <style scoped>\r\n"
                },
                {
                    "date": 1752922802042,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -380,10 +380,10 @@\n     })\r\n \r\n \r\n     console.log('Booking data:', response)\r\n-    if (response?.client_secret) {\r\n-      const result = await stripe.confirmCardPayment(response.client_secret, {\r\n+    if (response?.payment.original.client_secret) {\r\n+      const result = await stripe.confirmCardPayment(response.payment.original.client_secret, {\r\n         payment_method: {\r\n           card: cardElement, // Stripe Elements component'in\r\n           billing_details: {\r\n             name: name.value\r\n"
                },
                {
                    "date": 1752922882333,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -379,9 +379,9 @@\n       body: JSON.stringify(bookingData)\r\n     })\r\n \r\n \r\n-    console.log('Booking data:', response)\r\n+    console.log('Booking data burada :', response)\r\n     if (response?.payment.original.client_secret) {\r\n       const result = await stripe.confirmCardPayment(response.payment.original.client_secret, {\r\n         payment_method: {\r\n           card: cardElement, // Stripe Elements component'in\r\n"
                },
                {
                    "date": 1752923028526,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -368,20 +368,47 @@\n       },\r\n       stripe_payment_id: paymentMethod.id\r\n     }\r\n \r\n-    // Laravel backend'e rezervasyon datasını gönder\r\n-    const response = await fetch('https://searchyourtour.com/api/submit-booking', {\r\n-      method: 'POST',\r\n-      headers: {\r\n-        'Content-Type': 'application/json',\r\n-        'Accept': 'application/json'\r\n-      },\r\n-      body: JSON.stringify(bookingData)\r\n-    })\r\n \r\n \r\n-    console.log('Booking data burada :', response)\r\n+    const stripe = await loadStripe('pk_live_...');\r\n+\r\n+// 1. Sadece rezervasyonu ve ödeme bilgilerini backend’e gönder\r\n+const { data } = await axios.post('/api/stripe/reserve', {\r\n+  customer: {\r\n+    name: name.value,\r\n+    email: email.value,\r\n+    phone: selectedCountry.value.code + phone.value,\r\n+    country: country.value,\r\n+    hotel_address: hotelAddress.value,\r\n+    user_location: userLocation.value\r\n+  },\r\n+  tour: {\r\n+    id: selectedTourStore.tour?.id || null,\r\n+    title: selectedTourStore.tour?.title || '',\r\n+    description: selectedTourStore.tour?.description || '',\r\n+    price: selectedTourStore.tour?.price || '',\r\n+    booking_date: selectedTourStore.tour?.bookingDate || new Date().toISOString().split('T')[0],\r\n+    tenant_id: 'ad5257a5-efdd-4314-9e5e-b56aabe321f1',\r\n+    currency_id: currencyId,\r\n+    language_id: languageId,\r\n+    buggy: 0,\r\n+    adult: selectedTourStore.tour?.adult || 1,\r\n+    child: selectedTourStore.tour?.child || 0,\r\n+    infant: selectedTourStore.tour?.infant || 0,\r\n+    roomNumber: 0,\r\n+    randomCode: Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15)\r\n+  },\r\n+  payment: {\r\n+    amount: convertPriceToCents(selectedTourStore.tour?.price || ''),\r\n+    currency: currentCurrency\r\n+  }\r\n+});\r\n+\r\n+ \r\n+\r\n+    console.log('Booking data burada :', data)\r\n     if (response?.payment.original.client_secret) {\r\n       const result = await stripe.confirmCardPayment(response.payment.original.client_secret, {\r\n         payment_method: {\r\n           card: cardElement, // Stripe Elements component'in\r\n"
                },
                {
                    "date": 1752923053192,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -370,12 +370,12 @@\n     }\r\n \r\n \r\n \r\n-    const stripe = await loadStripe('pk_live_...');\r\n+    const stripe = await loadStripe('pk_live_51RM643JpoC0mNwVWeCMfS1WckX9Bh8d25g02RHaIZBk8VTi84YEyFvZLsrC0WR53KMyB3YIcuWVAH7u1PmpDeG4t00ZdNBIgfd...');\r\n \r\n // 1. Sadece rezervasyonu ve ödeme bilgilerini backend’e gönder\r\n-const { data } = await axios.post('/api/stripe/reserve', {\r\n+const { data } = await axios.post('https://searchyourtour.com/api/submit-booking', {\r\n   customer: {\r\n     name: name.value,\r\n     email: email.value,\r\n     phone: selectedCountry.value.code + phone.value,\r\n"
                },
                {
                    "date": 1752923189908,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -333,47 +333,13 @@\n       currentCurrency,\r\n       languageId,\r\n       currencyId\r\n     })\r\n-    \r\n-    // Rezervasyon datasını hazırla\r\n-    const bookingData = {\r\n-      customer: {\r\n-        name: name.value,\r\n-        email: email.value,\r\n-        phone: selectedCountry.value.code + phone.value,\r\n-        country: country.value,\r\n-        hotel_address: hotelAddress.value,\r\n-        user_location: userLocation.value\r\n-      },\r\n-      tour: {\r\n-        id: selectedTourStore.tour?.id || null,\r\n-        title: selectedTourStore.tour?.title || '',\r\n-        description: selectedTourStore.tour?.description || '',\r\n-        price: selectedTourStore.tour?.price || '',\r\n-        booking_date: selectedTourStore.tour?.bookingDate || new Date().toISOString().split('T')[0],\r\n-        tenant_id: 'ad5257a5-efdd-4314-9e5e-b56aabe321f1',\r\n-        currency_id: currencyId,\r\n-        language_id: languageId,\r\n-        buggy:0,\r\n-        adult: selectedTourStore.tour?.adult || 1,\r\n-        child: selectedTourStore.tour?.child || 0,\r\n-        infant: selectedTourStore.tour?.infant || 0,\r\n-        roomNumber:0,\r\n-        randomCode:Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15)\r\n-      },\r\n-      payment: {\r\n-        payment_method_id: paymentMethod.id,\r\n-        amount: convertPriceToCents(selectedTourStore.tour?.price || ''),\r\n-        currency: currentCurrency\r\n-      },\r\n-      stripe_payment_id: paymentMethod.id\r\n-    }\r\n+  \r\n \r\n \r\n+    const stripe = await loadStripe('pk_live_51RM643JpoC0mNwVWeCMfS1WckX9Bh8d25g02RHaIZBk8VTi84YEyFvZLsrC0WR53KMyB3YIcuWVAH7u1PmpDeG4t00ZdNBIgfd');\r\n \r\n-    const stripe = await loadStripe('pk_live_51RM643JpoC0mNwVWeCMfS1WckX9Bh8d25g02RHaIZBk8VTi84YEyFvZLsrC0WR53KMyB3YIcuWVAH7u1PmpDeG4t00ZdNBIgfd...');\r\n-\r\n // 1. Sadece rezervasyonu ve ödeme bilgilerini backend’e gönder\r\n const { data } = await axios.post('https://searchyourtour.com/api/submit-booking', {\r\n   customer: {\r\n     name: name.value,\r\n"
                },
                {
                    "date": 1752923413651,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -300,44 +300,11 @@\n   errorMsg.value = ''\r\n   success.value = false\r\n   \r\n   try {\r\n-    // Stripe Payment Method oluştur\r\n-    const { paymentMethod, error } = await stripe.createPaymentMethod({\r\n-      type: 'card',\r\n-      card: card,\r\n-      billing_details: {\r\n-        name: cardName.value,\r\n-        email: email.value,\r\n-        phone: selectedCountry.value.code + phone.value,\r\n-        address: {\r\n-          country: selectedCountry.value.iso,\r\n-          line1: hotelAddress.value\r\n-        }\r\n-      }\r\n-    })\r\n-    \r\n-    if (error) {\r\n-      errorMsg.value = error.message\r\n-      loading.value = false\r\n-      return\r\n-    }\r\n+     \r\n \r\n-    // Get current language and currency from localStorage\r\n-    const currentLanguage = localStorage.getItem('selectedLanguage') || 'en'\r\n-    const currentCurrency = localStorage.getItem('selectedCurrency') || 'EUR'\r\n-    const languageId = getLanguageId(currentLanguage)\r\n-    const currencyId = getCurrencyId(currentCurrency)\r\n-    \r\n-    console.log('Checkout language/currency:', {\r\n-      currentLanguage,\r\n-      currentCurrency,\r\n-      languageId,\r\n-      currencyId\r\n-    })\r\n-  \r\n \r\n-\r\n     const stripe = await loadStripe('pk_live_51RM643JpoC0mNwVWeCMfS1WckX9Bh8d25g02RHaIZBk8VTi84YEyFvZLsrC0WR53KMyB3YIcuWVAH7u1PmpDeG4t00ZdNBIgfd');\r\n \r\n // 1. Sadece rezervasyonu ve ödeme bilgilerini backend’e gönder\r\n const { data } = await axios.post('https://searchyourtour.com/api/submit-booking', {\r\n"
                },
                {
                    "date": 1752923435985,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -340,10 +340,10 @@\n \r\n  \r\n \r\n     console.log('Booking data burada :', data)\r\n-    if (response?.payment.original.client_secret) {\r\n-      const result = await stripe.confirmCardPayment(response.payment.original.client_secret, {\r\n+    if (data?.client_secret) {\r\n+      const result = await stripe.confirmCardPayment(data.client_secret, {\r\n         payment_method: {\r\n           card: cardElement, // Stripe Elements component'in\r\n           billing_details: {\r\n             name: name.value\r\n"
                },
                {
                    "date": 1752923631210,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -137,8 +137,9 @@\n <script setup>\r\n import { ref, onMounted, watch, computed } from 'vue'\r\n import { useRouter } from 'vue-router'\r\n import { useSelectedTourStore } from '../stores/selectedTour'\r\n+import axios from 'axios'\r\n let stripe, elements, card\r\n \r\n const router = useRouter()\r\n const selectedTourStore = useSelectedTourStore()\r\n"
                },
                {
                    "date": 1752923637717,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -349,9 +349,9 @@\n           billing_details: {\r\n             name: name.value\r\n           }\r\n         },\r\n-        return_url: 'https://yourfrontend.com/payment-status' // Gerekirse yönlendirme\r\n+        return_url: '' // Gerekirse yönlendirme\r\n       });\r\n \r\n       if (result.error) {\r\n         console.error('Ödeme hatası:', result.error.message);\r\n"
                },
                {
                    "date": 1752923647452,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -205,8 +205,13 @@\n const currentStep = ref(1)\r\n const hotelAddress = ref(\"\");\r\n const userLocation = ref(\"\");\r\n \r\n+// Currency ve language bilgileri\r\n+const currentCurrency = ref(localStorage.getItem('selectedCurrency') || 'EUR')\r\n+const currencyId = computed(() => getCurrencyId(currentCurrency.value))\r\n+const languageId = computed(() => getLanguageId(localStorage.getItem('selectedLanguage') || 'en'))\r\n+\r\n onMounted(() => {\r\n   watch(currentStep, (step) => {\r\n     if (step === 2) {\r\n       setTimeout(() => {\r\n@@ -301,13 +306,13 @@\n   errorMsg.value = ''\r\n   success.value = false\r\n   \r\n   try {\r\n-     \r\n+    // Stripe zaten setupStripe() fonksiyonunda kurulmuş olmalı\r\n+    if (!stripe) {\r\n+      throw new Error('Stripe not initialized')\r\n+    }\r\n \r\n-\r\n-    const stripe = await loadStripe('pk_live_51RM643JpoC0mNwVWeCMfS1WckX9Bh8d25g02RHaIZBk8VTi84YEyFvZLsrC0WR53KMyB3YIcuWVAH7u1PmpDeG4t00ZdNBIgfd');\r\n-\r\n // 1. Sadece rezervasyonu ve ödeme bilgilerini backend’e gönder\r\n const { data } = await axios.post('https://searchyourtour.com/api/submit-booking', {\r\n   customer: {\r\n     name: name.value,\r\n"
                },
                {
                    "date": 1752923653985,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -349,9 +349,9 @@\n     console.log('Booking data burada :', data)\r\n     if (data?.client_secret) {\r\n       const result = await stripe.confirmCardPayment(data.client_secret, {\r\n         payment_method: {\r\n-          card: cardElement, // Stripe Elements component'in\r\n+          card: card, // Stripe Elements component\r\n           billing_details: {\r\n             name: name.value\r\n           }\r\n         },\r\n"
                },
                {
                    "date": 1752923661769,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -359,14 +359,22 @@\n       });\r\n \r\n       if (result.error) {\r\n         console.error('Ödeme hatası:', result.error.message);\r\n-        // Hata mesajı göster\r\n+        errorMsg.value = result.error.message || 'Payment failed'\r\n+        loading.value = false\r\n       } else if (result.paymentIntent.status === 'succeeded') {\r\n         // ✅ Ödeme başarılı\r\n+        success.value = true\r\n+        loading.value = false\r\n         // Başarı sayfasına yönlendir\r\n+        setTimeout(() => {\r\n+          router.push('/payment-success')\r\n+        }, 2000)\r\n       } else {\r\n         // Ödeme beklemede ya da reddedildi\r\n+        errorMsg.value = 'Payment is being processed. Please check your email for confirmation.'\r\n+        loading.value = false\r\n       }\r\n     /*\r\n     const result = await response.json()\r\n \r\n"
                },
                {
                    "date": 1752923669642,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -374,55 +374,14 @@\n         // Ödeme beklemede ya da reddedildi\r\n         errorMsg.value = 'Payment is being processed. Please check your email for confirmation.'\r\n         loading.value = false\r\n       }\r\n-    /*\r\n-    const result = await response.json()\r\n \r\n-    if (!response.status) {\r\n-      throw new Error(result.message || 'Booking submission failed')\r\n-    }\r\n-\r\n-    // Başarılı ödeme durumunda success mesajını göster\r\n-    if (result?.success === true) {\r\n+    } else {\r\n+      // Backend'den client_secret gelmediyse\r\n+      errorMsg.value = 'Payment setup failed. Please try again.'\r\n       loading.value = false\r\n-      success.value = true\r\n     }\r\n-    \r\n-    console.log('Payment response:', result)\r\n-    console.log('Payment original:', result.payment?.original)\r\n-    console.log('Action:', result.action)\r\n-    \r\n-    // Stripe response yapısına göre kontrol\r\n-    const paymentOriginal = result.payment?.original\r\n-    \r\n-    // 3D Secure gerekli mi?\r\n-    if (paymentOriginal?.requires_action === true) {\r\n-      console.log('3D Secure required, handling authentication...')\r\n-      \r\n-      // 3D Secure işlemini başlat\r\n-      const { error } = await stripe.handleCardAction(paymentOriginal.payment_intent_client_secret)\r\n-      console.log('3D Secure error11111:', error)\r\n-      if (error) {\r\n-        console.log('3D Secure error:', error)\r\n-        errorMsg.value = error.message || '3D Secure authentication failed.'\r\n-        loading.value = false\r\n-        return\r\n-      }\r\n-      \r\n-      // 3D Secure başarılı, ödemeyi tekrar dene\r\n-      console.log('3D Secure completed, retrying payment...')\r\n-      errorMsg.value = '3D Secure completed. Processing payment...'\r\n-      \r\n-      // Burada backend'e 3D Secure tamamlandı bilgisi gönderilebilir\r\n-      // Şimdilik basit bir mesaj gösteriyoruz\r\n-      setTimeout(() => {\r\n-        errorMsg.value = 'Payment processing completed. Please check your email for confirmation.'\r\n-        loading.value = false\r\n-      }, 3000)\r\n-      \r\n-      return*/\r\n-    }\r\n  \r\n \r\n   } catch (err) {\r\n     console.error('Payment error:', err)\r\n"
                },
                {
                    "date": 1752923687725,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -349,9 +349,9 @@\n     console.log('Booking data burada :', data)\r\n     if (data?.client_secret) {\r\n       const result = await stripe.confirmCardPayment(data.client_secret, {\r\n         payment_method: {\r\n-          card: card, // Stripe Elements component\r\n+          card: cardElement, // Stripe Elements component'in\r\n           billing_details: {\r\n             name: name.value\r\n           }\r\n         },\r\n@@ -359,29 +359,62 @@\n       });\r\n \r\n       if (result.error) {\r\n         console.error('Ödeme hatası:', result.error.message);\r\n-        errorMsg.value = result.error.message || 'Payment failed'\r\n-        loading.value = false\r\n+        // Hata mesajı göster\r\n       } else if (result.paymentIntent.status === 'succeeded') {\r\n         // ✅ Ödeme başarılı\r\n-        success.value = true\r\n-        loading.value = false\r\n         // Başarı sayfasına yönlendir\r\n-        setTimeout(() => {\r\n-          router.push('/payment-success')\r\n-        }, 2000)\r\n       } else {\r\n         // Ödeme beklemede ya da reddedildi\r\n-        errorMsg.value = 'Payment is being processed. Please check your email for confirmation.'\r\n-        loading.value = false\r\n       }\r\n+    /*\r\n+    const result = await response.json()\r\n \r\n-    } else {\r\n-      // Backend'den client_secret gelmediyse\r\n-      errorMsg.value = 'Payment setup failed. Please try again.'\r\n+    if (!response.status) {\r\n+      throw new Error(result.message || 'Booking submission failed')\r\n+    }\r\n+\r\n+    // Başarılı ödeme durumunda success mesajını göster\r\n+    if (result?.success === true) {\r\n       loading.value = false\r\n+      success.value = true\r\n     }\r\n+    \r\n+    console.log('Payment response:', result)\r\n+    console.log('Payment original:', result.payment?.original)\r\n+    console.log('Action:', result.action)\r\n+    \r\n+    // Stripe response yapısına göre kontrol\r\n+    const paymentOriginal = result.payment?.original\r\n+    \r\n+    // 3D Secure gerekli mi?\r\n+    if (paymentOriginal?.requires_action === true) {\r\n+      console.log('3D Secure required, handling authentication...')\r\n+      \r\n+      // 3D Secure işlemini başlat\r\n+      const { error } = await stripe.handleCardAction(paymentOriginal.payment_intent_client_secret)\r\n+      console.log('3D Secure error11111:', error)\r\n+      if (error) {\r\n+        console.log('3D Secure error:', error)\r\n+        errorMsg.value = error.message || '3D Secure authentication failed.'\r\n+        loading.value = false\r\n+        return\r\n+      }\r\n+      \r\n+      // 3D Secure başarılı, ödemeyi tekrar dene\r\n+      console.log('3D Secure completed, retrying payment...')\r\n+      errorMsg.value = '3D Secure completed. Processing payment...'\r\n+      \r\n+      // Burada backend'e 3D Secure tamamlandı bilgisi gönderilebilir\r\n+      // Şimdilik basit bir mesaj gösteriyoruz\r\n+      setTimeout(() => {\r\n+        errorMsg.value = 'Payment processing completed. Please check your email for confirmation.'\r\n+        loading.value = false\r\n+      }, 3000)\r\n+      \r\n+      return*/\r\n+    }\r\n  \r\n \r\n   } catch (err) {\r\n     console.error('Payment error:', err)\r\n"
                },
                {
                    "date": 1752923727013,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -306,15 +306,12 @@\n   errorMsg.value = ''\r\n   success.value = false\r\n   \r\n   try {\r\n-    // Stripe zaten setupStripe() fonksiyonunda kurulmuş olmalı\r\n-    if (!stripe) {\r\n-      throw new Error('Stripe not initialized')\r\n-    }\r\n+    const stripe = await loadStripe('pk_live_...');\r\n \r\n // 1. Sadece rezervasyonu ve ödeme bilgilerini backend’e gönder\r\n-const { data } = await axios.post('https://searchyourtour.com/api/submit-booking', {\r\n+const { data } = await axios.post('/api/stripe/reserve', {\r\n   customer: {\r\n     name: name.value,\r\n     email: email.value,\r\n     phone: selectedCountry.value.code + phone.value,\r\n@@ -343,80 +340,31 @@\n     currency: currentCurrency\r\n   }\r\n });\r\n \r\n- \r\n-\r\n-    console.log('Booking data burada :', data)\r\n-    if (data?.client_secret) {\r\n-      const result = await stripe.confirmCardPayment(data.client_secret, {\r\n-        payment_method: {\r\n-          card: cardElement, // Stripe Elements component'in\r\n-          billing_details: {\r\n-            name: name.value\r\n-          }\r\n-        },\r\n-        return_url: '' // Gerekirse yönlendirme\r\n-      });\r\n-\r\n-      if (result.error) {\r\n-        console.error('Ödeme hatası:', result.error.message);\r\n-        // Hata mesajı göster\r\n-      } else if (result.paymentIntent.status === 'succeeded') {\r\n-        // ✅ Ödeme başarılı\r\n-        // Başarı sayfasına yönlendir\r\n-      } else {\r\n-        // Ödeme beklemede ya da reddedildi\r\n+// 2. client_secret geldiyse, Stripe ile ödemeyi başlat\r\n+if (data?.client_secret) {\r\n+  const result = await stripe.confirmCardPayment(data.client_secret, {\r\n+    payment_method: {\r\n+      card: cardElement, // Stripe Elements component'in\r\n+      billing_details: {\r\n+        name: name.value\r\n       }\r\n-    /*\r\n-    const result = await response.json()\r\n+    },\r\n+    return_url: 'https://yourfrontend.com/payment-status' // Gerekirse yönlendirme\r\n+  });\r\n \r\n-    if (!response.status) {\r\n-      throw new Error(result.message || 'Booking submission failed')\r\n-    }\r\n+  if (result.error) {\r\n+    console.error('Ödeme hatası:', result.error.message);\r\n+    // Hata mesajı göster\r\n+  } else if (result.paymentIntent.status === 'succeeded') {\r\n+    // ✅ Ödeme başarılı\r\n+    // Başarı sayfasına yönlendir\r\n+  } else {\r\n+    // Ödeme beklemede ya da reddedildi\r\n+  }\r\n+}\r\n \r\n-    // Başarılı ödeme durumunda success mesajını göster\r\n-    if (result?.success === true) {\r\n-      loading.value = false\r\n-      success.value = true\r\n-    }\r\n-    \r\n-    console.log('Payment response:', result)\r\n-    console.log('Payment original:', result.payment?.original)\r\n-    console.log('Action:', result.action)\r\n-    \r\n-    // Stripe response yapısına göre kontrol\r\n-    const paymentOriginal = result.payment?.original\r\n-    \r\n-    // 3D Secure gerekli mi?\r\n-    if (paymentOriginal?.requires_action === true) {\r\n-      console.log('3D Secure required, handling authentication...')\r\n-      \r\n-      // 3D Secure işlemini başlat\r\n-      const { error } = await stripe.handleCardAction(paymentOriginal.payment_intent_client_secret)\r\n-      console.log('3D Secure error11111:', error)\r\n-      if (error) {\r\n-        console.log('3D Secure error:', error)\r\n-        errorMsg.value = error.message || '3D Secure authentication failed.'\r\n-        loading.value = false\r\n-        return\r\n-      }\r\n-      \r\n-      // 3D Secure başarılı, ödemeyi tekrar dene\r\n-      console.log('3D Secure completed, retrying payment...')\r\n-      errorMsg.value = '3D Secure completed. Processing payment...'\r\n-      \r\n-      // Burada backend'e 3D Secure tamamlandı bilgisi gönderilebilir\r\n-      // Şimdilik basit bir mesaj gösteriyoruz\r\n-      setTimeout(() => {\r\n-        errorMsg.value = 'Payment processing completed. Please check your email for confirmation.'\r\n-        loading.value = false\r\n-      }, 3000)\r\n-      \r\n-      return*/\r\n-    }\r\n- \r\n-\r\n   } catch (err) {\r\n     console.error('Payment error:', err)\r\n     errorMsg.value = err.message || 'Payment failed. Please try again.'\r\n     loading.value = false\r\n"
                },
                {
                    "date": 1752923732460,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -308,63 +308,63 @@\n   \r\n   try {\r\n     const stripe = await loadStripe('pk_live_...');\r\n \r\n-// 1. Sadece rezervasyonu ve ödeme bilgilerini backend’e gönder\r\n-const { data } = await axios.post('/api/stripe/reserve', {\r\n-  customer: {\r\n-    name: name.value,\r\n-    email: email.value,\r\n-    phone: selectedCountry.value.code + phone.value,\r\n-    country: country.value,\r\n-    hotel_address: hotelAddress.value,\r\n-    user_location: userLocation.value\r\n-  },\r\n-  tour: {\r\n-    id: selectedTourStore.tour?.id || null,\r\n-    title: selectedTourStore.tour?.title || '',\r\n-    description: selectedTourStore.tour?.description || '',\r\n-    price: selectedTourStore.tour?.price || '',\r\n-    booking_date: selectedTourStore.tour?.bookingDate || new Date().toISOString().split('T')[0],\r\n-    tenant_id: 'ad5257a5-efdd-4314-9e5e-b56aabe321f1',\r\n-    currency_id: currencyId,\r\n-    language_id: languageId,\r\n-    buggy: 0,\r\n-    adult: selectedTourStore.tour?.adult || 1,\r\n-    child: selectedTourStore.tour?.child || 0,\r\n-    infant: selectedTourStore.tour?.infant || 0,\r\n-    roomNumber: 0,\r\n-    randomCode: Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15)\r\n-  },\r\n-  payment: {\r\n-    amount: convertPriceToCents(selectedTourStore.tour?.price || ''),\r\n-    currency: currentCurrency\r\n-  }\r\n-});\r\n+      // 1. Sadece rezervasyonu ve ödeme bilgilerini backend’e gönder\r\n+      const { data } = await axios.post('/api/stripe/reserve', {\r\n+        customer: {\r\n+          name: name.value,\r\n+          email: email.value,\r\n+          phone: selectedCountry.value.code + phone.value,\r\n+          country: country.value,\r\n+          hotel_address: hotelAddress.value,\r\n+          user_location: userLocation.value\r\n+        },\r\n+        tour: {\r\n+          id: selectedTourStore.tour?.id || null,\r\n+          title: selectedTourStore.tour?.title || '',\r\n+          description: selectedTourStore.tour?.description || '',\r\n+          price: selectedTourStore.tour?.price || '',\r\n+          booking_date: selectedTourStore.tour?.bookingDate || new Date().toISOString().split('T')[0],\r\n+          tenant_id: 'ad5257a5-efdd-4314-9e5e-b56aabe321f1',\r\n+          currency_id: currencyId,\r\n+          language_id: languageId,\r\n+          buggy: 0,\r\n+          adult: selectedTourStore.tour?.adult || 1,\r\n+          child: selectedTourStore.tour?.child || 0,\r\n+          infant: selectedTourStore.tour?.infant || 0,\r\n+          roomNumber: 0,\r\n+          randomCode: Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15)\r\n+        },\r\n+        payment: {\r\n+          amount: convertPriceToCents(selectedTourStore.tour?.price || ''),\r\n+          currency: currentCurrency\r\n+        }\r\n+      });\r\n \r\n-// 2. client_secret geldiyse, Stripe ile ödemeyi başlat\r\n-if (data?.client_secret) {\r\n-  const result = await stripe.confirmCardPayment(data.client_secret, {\r\n-    payment_method: {\r\n-      card: cardElement, // Stripe Elements component'in\r\n-      billing_details: {\r\n-        name: name.value\r\n+      // 2. client_secret geldiyse, Stripe ile ödemeyi başlat\r\n+      if (data?.client_secret) {\r\n+        const result = await stripe.confirmCardPayment(data.client_secret, {\r\n+          payment_method: {\r\n+            card: cardElement, // Stripe Elements component'in\r\n+            billing_details: {\r\n+              name: name.value\r\n+            }\r\n+          },\r\n+          return_url: 'https://yourfrontend.com/payment-status' // Gerekirse yönlendirme\r\n+        });\r\n+\r\n+        if (result.error) {\r\n+          console.error('Ödeme hatası:', result.error.message);\r\n+          // Hata mesajı göster\r\n+        } else if (result.paymentIntent.status === 'succeeded') {\r\n+          // ✅ Ödeme başarılı\r\n+          // Başarı sayfasına yönlendir\r\n+        } else {\r\n+          // Ödeme beklemede ya da reddedildi\r\n+        }\r\n       }\r\n-    },\r\n-    return_url: 'https://yourfrontend.com/payment-status' // Gerekirse yönlendirme\r\n-  });\r\n \r\n-  if (result.error) {\r\n-    console.error('Ödeme hatası:', result.error.message);\r\n-    // Hata mesajı göster\r\n-  } else if (result.paymentIntent.status === 'succeeded') {\r\n-    // ✅ Ödeme başarılı\r\n-    // Başarı sayfasına yönlendir\r\n-  } else {\r\n-    // Ödeme beklemede ya da reddedildi\r\n-  }\r\n-}\r\n-\r\n   } catch (err) {\r\n     console.error('Payment error:', err)\r\n     errorMsg.value = err.message || 'Payment failed. Please try again.'\r\n     loading.value = false\r\n"
                },
                {
                    "date": 1752923750974,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -306,9 +306,9 @@\n   errorMsg.value = ''\r\n   success.value = false\r\n   \r\n   try {\r\n-    const stripe = await loadStripe('pk_live_...');\r\n+    const stripe = await loadStripe('pk_live_51RM643JpoC0mNwVWeCMfS1WckX9Bh8d25g02RHaIZBk8VTi84YEyFvZLsrC0WR53KMyB3YIcuWVAH7u1PmpDeG4t00ZdNBIgfd');\r\n \r\n       // 1. Sadece rezervasyonu ve ödeme bilgilerini backend’e gönder\r\n       const { data } = await axios.post('/api/stripe/reserve', {\r\n         customer: {\r\n"
                },
                {
                    "date": 1752923796309,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -137,9 +137,8 @@\n <script setup>\r\n import { ref, onMounted, watch, computed } from 'vue'\r\n import { useRouter } from 'vue-router'\r\n import { useSelectedTourStore } from '../stores/selectedTour'\r\n-import axios from 'axios'\r\n let stripe, elements, card\r\n \r\n const router = useRouter()\r\n const selectedTourStore = useSelectedTourStore()\r\n"
                },
                {
                    "date": 1752923820689,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -308,9 +308,14 @@\n   try {\r\n     const stripe = await loadStripe('pk_live_51RM643JpoC0mNwVWeCMfS1WckX9Bh8d25g02RHaIZBk8VTi84YEyFvZLsrC0WR53KMyB3YIcuWVAH7u1PmpDeG4t00ZdNBIgfd');\r\n \r\n       // 1. Sadece rezervasyonu ve ödeme bilgilerini backend’e gönder\r\n-      const { data } = await axios.post('/api/stripe/reserve', {\r\n+      const response = await fetch('/api/stripe/reserve', {\r\n+        method: 'POST',\r\n+        headers: {\r\n+          'Content-Type': 'application/json',\r\n+        },\r\n+        body: JSON.stringify({\r\n         customer: {\r\n           name: name.value,\r\n           email: email.value,\r\n           phone: selectedCountry.value.code + phone.value,\r\n"
                },
                {
                    "date": 1752923842572,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -308,9 +308,9 @@\n   try {\r\n     const stripe = await loadStripe('pk_live_51RM643JpoC0mNwVWeCMfS1WckX9Bh8d25g02RHaIZBk8VTi84YEyFvZLsrC0WR53KMyB3YIcuWVAH7u1PmpDeG4t00ZdNBIgfd');\r\n \r\n       // 1. Sadece rezervasyonu ve ödeme bilgilerini backend’e gönder\r\n-      const response = await fetch('/api/stripe/reserve', {\r\n+      const response = await fetch('https://searchyourtour.com/api/submit-booking', {\r\n         method: 'POST',\r\n         headers: {\r\n           'Content-Type': 'application/json',\r\n         },\r\n@@ -338,13 +338,16 @@\n           infant: selectedTourStore.tour?.infant || 0,\r\n           roomNumber: 0,\r\n           randomCode: Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15)\r\n         },\r\n-        payment: {\r\n-          amount: convertPriceToCents(selectedTourStore.tour?.price || ''),\r\n-          currency: currentCurrency\r\n-        }\r\n+                  payment: {\r\n+            amount: convertPriceToCents(selectedTourStore.tour?.price || ''),\r\n+            currency: currentCurrency\r\n+          }\r\n+        })\r\n       });\r\n+      \r\n+      const data = await response.json();\r\n \r\n       // 2. client_secret geldiyse, Stripe ile ödemeyi başlat\r\n       if (data?.client_secret) {\r\n         const result = await stripe.confirmCardPayment(data.client_secret, {\r\n"
                },
                {
                    "date": 1752923980514,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -138,8 +138,9 @@\n import { ref, onMounted, watch, computed } from 'vue'\r\n import { useRouter } from 'vue-router'\r\n import { useSelectedTourStore } from '../stores/selectedTour'\r\n let stripe, elements, card\r\n+import { loadStripe } from '@stripe/stripe-js';\r\n \r\n const router = useRouter()\r\n const selectedTourStore = useSelectedTourStore()\r\n \r\n"
                },
                {
                    "date": 1752924168317,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -294,29 +294,29 @@\n \r\n const handleStep = async () => {\r\n   if (currentStep.value === 1) {\r\n     if (!name.value || !email.value || !country.value || !phone.value || !hotelAddress.value) {\r\n-      errorMsg.value = 'Please fill in all required fields.'\r\n-      return\r\n+      errorMsg.value = 'Please fill in all required fields.';\r\n+      return;\r\n     }\r\n-    currentStep.value = 2\r\n-    return\r\n+    currentStep.value = 2;\r\n+    return;\r\n   }\r\n-  \r\n-  loading.value = true\r\n-  errorMsg.value = ''\r\n-  success.value = false\r\n-  \r\n+\r\n+  loading.value = true;\r\n+  errorMsg.value = '';\r\n+  success.value = false;\r\n+\r\n   try {\r\n     const stripe = await loadStripe('pk_live_51RM643JpoC0mNwVWeCMfS1WckX9Bh8d25g02RHaIZBk8VTi84YEyFvZLsrC0WR53KMyB3YIcuWVAH7u1PmpDeG4t00ZdNBIgfd');\r\n \r\n-      // 1. Sadece rezervasyonu ve ödeme bilgilerini backend’e gönder\r\n-      const response = await fetch('https://searchyourtour.com/api/submit-booking', {\r\n-        method: 'POST',\r\n-        headers: {\r\n-          'Content-Type': 'application/json',\r\n-        },\r\n-        body: JSON.stringify({\r\n+    // 1. Sadece rezervasyonu ve ödeme bilgilerini backend’e gönder\r\n+    const response = await fetch('https://searchyourtour.com/api/submit-booking', {\r\n+      method: 'POST',\r\n+      headers: {\r\n+        'Content-Type': 'application/json',\r\n+      },\r\n+      body: JSON.stringify({\r\n         customer: {\r\n           name: name.value,\r\n           email: email.value,\r\n           phone: selectedCountry.value.code + phone.value,\r\n@@ -324,60 +324,69 @@\n           hotel_address: hotelAddress.value,\r\n           user_location: userLocation.value\r\n         },\r\n         tour: {\r\n-          id: selectedTourStore.tour?.id || null,\r\n-          title: selectedTourStore.tour?.title || '',\r\n-          description: selectedTourStore.tour?.description || '',\r\n-          price: selectedTourStore.tour?.price || '',\r\n-          booking_date: selectedTourStore.tour?.bookingDate || new Date().toISOString().split('T')[0],\r\n+          id: selectedTourStore.tour.value?.id || null,\r\n+          title: selectedTourStore.tour.value?.title || '',\r\n+          description: selectedTourStore.tour.value?.description || '',\r\n+          price: selectedTourStore.tour.value?.price || '',\r\n+          booking_date: selectedTourStore.tour.value?.bookingDate || new Date().toISOString().split('T')[0],\r\n           tenant_id: 'ad5257a5-efdd-4314-9e5e-b56aabe321f1',\r\n-          currency_id: currencyId,\r\n-          language_id: languageId,\r\n+          currency_id: currencyId.value,\r\n+          language_id: languageId.value,\r\n           buggy: 0,\r\n-          adult: selectedTourStore.tour?.adult || 1,\r\n-          child: selectedTourStore.tour?.child || 0,\r\n-          infant: selectedTourStore.tour?.infant || 0,\r\n+          adult: selectedTourStore.tour.value?.adult || 1,\r\n+          child: selectedTourStore.tour.value?.child || 0,\r\n+          infant: selectedTourStore.tour.value?.infant || 0,\r\n           roomNumber: 0,\r\n           randomCode: Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15)\r\n         },\r\n-                  payment: {\r\n-            amount: convertPriceToCents(selectedTourStore.tour?.price || ''),\r\n-            currency: currentCurrency\r\n+        payment: {\r\n+          amount: convertPriceToCents(selectedTourStore.tour.value?.price || ''),\r\n+          currency: currentCurrency.value\r\n+        }\r\n+      })\r\n+    });\r\n+\r\n+    const data = await response.json();\r\n+\r\n+    // 2. client_secret geldiyse, Stripe ile ödemeyi başlat\r\n+    if (data?.client_secret) {\r\n+      const result = await stripe.confirmCardPayment(data.client_secret, {\r\n+        payment_method: {\r\n+          card: cardElement, // Stripe Elements component'in\r\n+          billing_details: {\r\n+            name: name.value,\r\n+            email: email.value,\r\n+            phone: selectedCountry.value.code + phone.value,\r\n+            address: {\r\n+              country: selectedCountry.value.iso,\r\n+              line1: hotelAddress.value\r\n+            }\r\n           }\r\n-        })\r\n+        },\r\n+        return_url: 'https://yourfrontend.com/payment-status'\r\n       });\r\n-      \r\n-      const data = await response.json();\r\n \r\n-      // 2. client_secret geldiyse, Stripe ile ödemeyi başlat\r\n-      if (data?.client_secret) {\r\n-        const result = await stripe.confirmCardPayment(data.client_secret, {\r\n-          payment_method: {\r\n-            card: cardElement, // Stripe Elements component'in\r\n-            billing_details: {\r\n-              name: name.value\r\n-            }\r\n-          },\r\n-          return_url: 'https://yourfrontend.com/payment-status' // Gerekirse yönlendirme\r\n-        });\r\n-\r\n-        if (result.error) {\r\n-          console.error('Ödeme hatası:', result.error.message);\r\n-          // Hata mesajı göster\r\n-        } else if (result.paymentIntent.status === 'succeeded') {\r\n-          // ✅ Ödeme başarılı\r\n-          // Başarı sayfasına yönlendir\r\n-        } else {\r\n-          // Ödeme beklemede ya da reddedildi\r\n-        }\r\n+      if (result.error) {\r\n+        console.error('Ödeme hatası:', result.error.message);\r\n+        errorMsg.value = result.error.message || 'Payment failed. Please try again.';\r\n+      } else if (result.paymentIntent.status === 'succeeded') {\r\n+        // ✅ Ödeme başarılı\r\n+        success.value = true;\r\n+      } else {\r\n+        // Ödeme beklemede ya da başka bir durum\r\n+        errorMsg.value = 'Ödeme tamamlanamadı.';\r\n       }\r\n+    }\r\n \r\n   } catch (err) {\r\n-    console.error('Payment error:', err)\r\n-    errorMsg.value = err.message || 'Payment failed. Please try again.'\r\n-    loading.value = false\r\n+    console.error('Payment error:', err);\r\n+    errorMsg.value = err.message || 'Payment failed. Please try again.';\r\n+  } finally {\r\n+    loading.value = false;\r\n   }\r\n+};\r\n }\r\n </script>\r\n \r\n <style scoped>\r\n"
                },
                {
                    "date": 1752924670977,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -323,28 +323,28 @@\n           country: country.value,\r\n           hotel_address: hotelAddress.value,\r\n           user_location: userLocation.value\r\n         },\r\n-        tour: {\r\n-          id: selectedTourStore.tour.value?.id || null,\r\n-          title: selectedTourStore.tour.value?.title || '',\r\n-          description: selectedTourStore.tour.value?.description || '',\r\n-          price: selectedTourStore.tour.value?.price || '',\r\n-          booking_date: selectedTourStore.tour.value?.bookingDate || new Date().toISOString().split('T')[0],\r\n-          tenant_id: 'ad5257a5-efdd-4314-9e5e-b56aabe321f1',\r\n-          currency_id: currencyId.value,\r\n-          language_id: languageId.value,\r\n-          buggy: 0,\r\n-          adult: selectedTourStore.tour.value?.adult || 1,\r\n-          child: selectedTourStore.tour.value?.child || 0,\r\n-          infant: selectedTourStore.tour.value?.infant || 0,\r\n-          roomNumber: 0,\r\n-          randomCode: Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15)\r\n-        },\r\n-        payment: {\r\n-          amount: convertPriceToCents(selectedTourStore.tour.value?.price || ''),\r\n-          currency: currentCurrency.value\r\n-        }\r\n+                  tour: {\r\n+            id: selectedTourStore.tour?.id || null,\r\n+            title: selectedTourStore.tour?.title || '',\r\n+            description: selectedTourStore.tour?.description || '',\r\n+            price: selectedTourStore.tour?.price || '',\r\n+            booking_date: selectedTourStore.tour?.bookingDate || new Date().toISOString().split('T')[0],\r\n+            tenant_id: 'ad5257a5-efdd-4314-9e5e-b56aabe321f1',\r\n+            currency_id: currencyId.value,\r\n+            language_id: languageId.value,\r\n+            buggy: 0,\r\n+            adult: selectedTourStore.tour?.adult || 1,\r\n+            child: selectedTourStore.tour?.child || 0,\r\n+            infant: selectedTourStore.tour?.infant || 0,\r\n+            roomNumber: 0,\r\n+            randomCode: Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15)\r\n+          },\r\n+          payment: {\r\n+            amount: convertPriceToCents(selectedTourStore.tour?.price || ''),\r\n+            currency: currentCurrency.value\r\n+          }\r\n       })\r\n     });\r\n \r\n     const data = await response.json();\r\n@@ -385,9 +385,8 @@\n   } finally {\r\n     loading.value = false;\r\n   }\r\n };\r\n-}\r\n </script>\r\n \r\n <style scoped>\r\n /* CheckoutForm.vue'dan taşınan stiller */\r\n"
                },
                {
                    "date": 1752924676797,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -197,8 +197,11 @@\n const selectedCountry = computed(() => countries.find(c => c.name === country.value) || countries[0])\r\n \r\n const name = ref('')\r\n const email = ref(selectedTourStore.tour?.email || '')\r\n+\r\n+// Debug: Tour verilerini kontrol et\r\n+console.log('Selected Tour Store:', selectedTourStore.tour)\r\n const cardName = ref('')\r\n const loading = ref(false)\r\n const success = ref(false)\r\n const errorMsg = ref('')\r\n"
                },
                {
                    "date": 1752924825350,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -355,9 +355,9 @@\n     // 2. client_secret geldiyse, Stripe ile ödemeyi başlat\r\n     if (data?.client_secret) {\r\n       const result = await stripe.confirmCardPayment(data.client_secret, {\r\n         payment_method: {\r\n-          card: cardElement, // Stripe Elements component'in\r\n+                      card: card, // Stripe Elements component\r\n           billing_details: {\r\n             name: name.value,\r\n             email: email.value,\r\n             phone: selectedCountry.value.code + phone.value,\r\n"
                },
                {
                    "date": 1752924937550,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -309,9 +309,12 @@\n   errorMsg.value = '';\r\n   success.value = false;\r\n \r\n   try {\r\n-    const stripe = await loadStripe('pk_live_51RM643JpoC0mNwVWeCMfS1WckX9Bh8d25g02RHaIZBk8VTi84YEyFvZLsrC0WR53KMyB3YIcuWVAH7u1PmpDeG4t00ZdNBIgfd');\r\n+    // Mevcut Stripe instance'ını kullan, yeni oluşturma\r\n+    if (!stripe) {\r\n+      throw new Error('Stripe not initialized. Please refresh the page.');\r\n+    }\r\n \r\n     // 1. Sadece rezervasyonu ve ödeme bilgilerini backend’e gönder\r\n     const response = await fetch('https://searchyourtour.com/api/submit-booking', {\r\n       method: 'POST',\r\n"
                },
                {
                    "date": 1753014593310,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -233,9 +233,9 @@\n \r\n function setupStripe() {\r\n   if (card) return\r\n   // Stripe public key - production'da gerçek key kullanılacak\r\n-  stripe = window.Stripe('pk_live_51RM643JpoC0mNwVWeCMfS1WckX9Bh8d25g02RHaIZBk8VTi84YEyFvZLsrC0WR53KMyB3YIcuWVAH7u1PmpDeG4t00ZdNBIgfd') // TODO: Replace with your real public key\r\n+  stripe = window.Stripe('pk_test_51RmaYhQQzUg4uq68XfoINf2CrffnJsjaJ1OHLwLtNLHHKcJ2uPlQABvQi5gFefQ5CnyJtbBbLOK7yioo2pPhkzfS00bUBXgBV7') // TODO: Replace with your real public key\r\n   elements = stripe.elements()\r\n   card = elements.create('card', {\r\n     style: {\r\n       base: {\r\n"
                },
                {
                    "date": 1753103344907,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,796 @@\n+<template>\r\n+  <div class=\"checkout-main-layout\">\r\n+    <!-- SOL: Kişisel Bilgiler ve Ödeme Formu (Stepper) -->\r\n+    <div class=\"checkout-left\">\r\n+      <h2>Enter your personal details</h2>\r\n+      <div class=\"secure-checkout\">\r\n+        <i class=\"fas fa-lock\"></i> Checkout is fast and secure\r\n+      </div>\r\n+      <form @submit.prevent=\"handleStep\" class=\"checkout-form\">\r\n+        <template v-if=\"currentStep === 1\">\r\n+          <div class=\"form-group\">\r\n+            <label>Full name <span class=\"required\">*</span></label>\r\n+            <input v-model=\"name\" type=\"text\" required placeholder=\"Full Name\" />\r\n+          </div>\r\n+          <div class=\"form-group\">\r\n+            <label>Email <span class=\"required\">*</span></label>\r\n+            <input v-model=\"email\" type=\"email\" required placeholder=\"you@email.com\" />\r\n+          </div>\r\n+          <div class=\"form-group\">\r\n+            <label>Country <span class=\"required\">*</span></label>\r\n+            <select v-model=\"country\" class=\"country-select-fullwidth\">\r\n+              <option v-for=\"c in countries\" :key=\"c.iso\" :value=\"c.name\">\r\n+                {{ c.name }}\r\n+              </option>\r\n+            </select>\r\n+          </div>\r\n+          <div class=\"form-group phone-row\">\r\n+            <label>Mobile phone number <span class=\"required\">*</span></label>\r\n+            <div class=\"phone-input-group\">\r\n+              <div class=\"country-code-display\">\r\n+                <img :src=\"`https://flagsapi.com/${selectedCountry.iso}/flat/24.png`\" :alt=\"selectedCountry.name\" class=\"flag-option\" />\r\n+                <span>{{ selectedCountry.code }}</span>\r\n+              </div>\r\n+              <input\r\n+                v-model=\"phone\"\r\n+                type=\"tel\"\r\n+                required\r\n+                class=\"phone-input\"\r\n+                :placeholder=\"selectedCountry.iso === 'TR' ? '5xx xxx xx xx' : selectedCountry.iso === 'US' ? 'xxx xxx xxxx' : selectedCountry.iso === 'DE' ? '1xx xxxxxxx' : 'xx xx xx xx'\"\r\n+              />\r\n+            </div>\r\n+          </div>\r\n+          <div class=\"form-group\">\r\n+            <label>Hotel Address <span class=\"required\">*</span></label>\r\n+            <input v-model=\"hotelAddress\" type=\"text\" required placeholder=\"Enter your hotel address\" />\r\n+          </div>\r\n+          <div class=\"form-group\">\r\n+            <label>Your Location (optional)</label>\r\n+            <div style=\"display: flex; gap: 8px;\">\r\n+              <input\r\n+                v-model=\"userLocation\"\r\n+                type=\"text\"\r\n+                placeholder=\"Click the button to add your current location\"\r\n+                readonly\r\n+                class=\"input\"\r\n+                style=\"flex: 1;\"\r\n+              />\r\n+              <button type=\"button\" @click=\"getLocation\" class=\"location-btn\" title=\"Use my location\">📍</button>\r\n+            </div>\r\n+            <div v-if=\"userLocation\">\r\n+              <a\r\n+                :href=\"getGoogleMapsLink(userLocation)\"\r\n+                target=\"_blank\"\r\n+                rel=\"noopener\"\r\n+                style=\"color: #0070eb; text-decoration: underline; cursor: pointer; font-size:0.97em;\"\r\n+              >\r\n+                View on Google Maps\r\n+              </a>\r\n+            </div>\r\n+          </div>\r\n+          <div class=\"form-note\">We’ll only contact you with essential updates or changes to your booking</div>\r\n+          <button class=\"pay-btn\" type=\"submit\">Go to payment</button>\r\n+        </template>\r\n+        <template v-else>\r\n+          <div class=\"form-group\">\r\n+            <label>Name on Card <span class=\"required\">*</span></label>\r\n+            <input v-model=\"cardName\" type=\"text\" required placeholder=\"Name on Card\" />\r\n+          </div>\r\n+          <div class=\"form-group\">\r\n+            <label>Card Details</label>\r\n+            <div id=\"card-element\" class=\"stripe-card-element\"></div>\r\n+          </div>\r\n+          <button class=\"pay-btn\" :disabled=\"loading\" type=\"submit\">\r\n+            <span v-if=\"loading\">Processing...</span>\r\n+            <span v-else>Pay Now</span>\r\n+          </button>\r\n+          <div v-if=\"success\" class=\"success-message\">\r\n+            <i class=\"fas fa-check-circle\"></i> \r\n+            <div>\r\n+              <strong>Payment Successful!</strong>\r\n+              <p>Your booking has been confirmed. You will receive a confirmation email shortly.</p>\r\n+            </div>\r\n+          </div>\r\n+          <div v-if=\"errorMsg\" class=\"error-message\">\r\n+            <i class=\"fas fa-exclamation-circle\"></i> {{ errorMsg }}\r\n+          </div>\r\n+        </template>\r\n+      </form>\r\n+    </div>\r\n+    <!-- SAĞ: Order Summary -->\r\n+    <div class=\"checkout-right\">\r\n+      <div class=\"order-summary-panel\" v-if=\"selectedTourStore.tour\">\r\n+        <div class=\"order-summary-title\">Order summary</div>\r\n+        <div class=\"order-summary-product\">\r\n+          <img class=\"order-summary-img\" :src=\"selectedTourStore.tour.image\" :alt=\"selectedTourStore.tour.title\" />\r\n+          <div class=\"order-summary-product-info\">\r\n+            <div class=\"product-title\">{{ selectedTourStore.tour.title }}</div>\r\n+            <div class=\"product-detail\">{{ selectedTourStore.tour.description }}</div>\r\n+            <div class=\"product-detail\" v-if=\"selectedTourStore.tour.bookingDate\">\r\n+              <i class=\"fas fa-calendar-alt\"></i> {{ selectedTourStore.tour.bookingDate }}\r\n+            </div>\r\n+            <div class=\"product-detail\"><i class=\"fas fa-user\"></i> {{ selectedTourStore.tour.participants }}</div>\r\n+            <div class=\"product-detail\" v-if=\"selectedTourStore.tour.email\"><i class=\"fas fa-envelope\"></i> {{ selectedTourStore.tour.email }}</div>\r\n+            <div class=\"product-detail\" v-if=\"selectedTourStore.tour.userLocation\">\r\n+              <i class=\"fas fa-map-marker-alt\"></i>\r\n+              <a\r\n+                :href=\"getGoogleMapsLink(selectedTourStore.tour.userLocation)\"\r\n+                target=\"_blank\"\r\n+                rel=\"noopener\"\r\n+                style=\"color: #0070eb; text-decoration: underline; cursor: pointer;\"\r\n+              >\r\n+                {{ selectedTourStore.tour.userLocation }}\r\n+              </a>\r\n+            </div>\r\n+          </div>\r\n+        </div>\r\n+        <div class=\"order-summary-total-row\">\r\n+          <span>Total</span>\r\n+          <span class=\"order-summary-total\">{{ selectedTourStore.tour.price }}</span>\r\n+        </div>\r\n+        <div class=\"order-summary-taxes\">All taxes and fees included</div>\r\n+      </div>\r\n+    </div>\r\n+  </div>\r\n+</template>\r\n+\r\n+<script setup>\r\n+import { ref, onMounted, watch, computed } from 'vue'\r\n+import { useRouter } from 'vue-router'\r\n+import { useSelectedTourStore } from '../stores/selectedTour'\r\n+let stripe, elements, card\r\n+import { loadStripe } from '@stripe/stripe-js';\r\n+\r\n+const router = useRouter()\r\n+const selectedTourStore = useSelectedTourStore()\r\n+\r\n+// Helper function to get language ID from language code\r\n+const getLanguageId = (langCode) => {\r\n+  const languageMap = {\r\n+    'tr': 2,    // Türkçe\r\n+    'de': 6,    // Deutsch\r\n+    'en': 1,    // English\r\n+    'ar': 3,    // العربية\r\n+    'es': 4,    // Español\r\n+    'fr': 5,    // Français\r\n+    'it': 7,    // Italiano\r\n+    'pt': 8,    // Português\r\n+    'zh': 10,   // 中文\r\n+    'ja': 11,   // 日本語\r\n+    'ru': 9     // Русский\r\n+  }\r\n+  return languageMap[langCode] || 1\r\n+}\r\n+\r\n+// Helper function to get currency ID from currency code\r\n+const getCurrencyId = (currencyCode) => {\r\n+  const currencyMap = {\r\n+    'EUR': 4,\r\n+    'USD': 5,\r\n+    'GBP': 6,\r\n+    'TRY': 7\r\n+  }\r\n+  return currencyMap[currencyCode] || 4\r\n+}\r\n+\r\n+// Tüm ülkeler ve kodları\r\n+const countries = [\r\n+  { name: 'Turkey', code: '+90', iso: 'TR' },\r\n+  { name: 'United States', code: '+1', iso: 'US' },\r\n+  { name: 'Germany', code: '+49', iso: 'DE' },\r\n+  { name: 'France', code: '+33', iso: 'FR' },\r\n+  { name: 'United Kingdom', code: '+44', iso: 'GB' },\r\n+  { name: 'Italy', code: '+39', iso: 'IT' },\r\n+  { name: 'Spain', code: '+34', iso: 'ES' },\r\n+  { name: 'Netherlands', code: '+31', iso: 'NL' },\r\n+  { name: 'Russia', code: '+7', iso: 'RU' },\r\n+  { name: 'Japan', code: '+81', iso: 'JP' },\r\n+  { name: 'China', code: '+86', iso: 'CN' },\r\n+  { name: 'India', code: '+91', iso: 'IN' },\r\n+  { name: 'Brazil', code: '+55', iso: 'BR' },\r\n+  { name: 'Canada', code: '+1', iso: 'CA' },\r\n+  { name: 'Australia', code: '+61', iso: 'AU' },\r\n+]\r\n+\r\n+const country = ref(countries[0].name)\r\n+const phone = ref('')\r\n+const selectedCountry = computed(() => countries.find(c => c.name === country.value) || countries[0])\r\n+\r\n+const name = ref('')\r\n+const email = ref(selectedTourStore.tour?.email || '')\r\n+\r\n+// Debug: Tour verilerini kontrol et\r\n+console.log('Selected Tour Store:', selectedTourStore.tour)\r\n+const cardName = ref('')\r\n+const loading = ref(false)\r\n+const success = ref(false)\r\n+const errorMsg = ref('')\r\n+const currentStep = ref(1)\r\n+const hotelAddress = ref(\"\");\r\n+const userLocation = ref(\"\");\r\n+\r\n+// Currency ve language bilgileri\r\n+const currentCurrency = ref(localStorage.getItem('selectedCurrency') || 'EUR')\r\n+const currencyId = computed(() => getCurrencyId(currentCurrency.value))\r\n+const languageId = computed(() => getLanguageId(localStorage.getItem('selectedLanguage') || 'en'))\r\n+\r\n+onMounted(() => {\r\n+  watch(currentStep, (step) => {\r\n+    if (step === 2) {\r\n+      setTimeout(() => {\r\n+        if (!window.Stripe) {\r\n+          const script = document.createElement('script')\r\n+          script.src = 'https://js.stripe.com/v3/'\r\n+          script.onload = setupStripe\r\n+          document.head.appendChild(script)\r\n+        } else {\r\n+          setupStripe()\r\n+        }\r\n+      }, 0)\r\n+    }\r\n+  }, { immediate: true })\r\n+})\r\n+\r\n+function setupStripe() {\r\n+  if (card) return\r\n+  // Stripe public key - production'da gerçek key kullanılacak\r\n+  stripe = window.Stripe('pk_test_51RmaYhQQzUg4uq68XfoINf2CrffnJsjaJ1OHLwLtNLHHKcJ2uPlQABvQi5gFefQ5CnyJtbBbLOK7yioo2pPhkzfS00bUBXgBV7') // TODO: Replace with your real public key\r\n+  elements = stripe.elements()\r\n+  card = elements.create('card', {\r\n+    style: {\r\n+      base: {\r\n+        fontSize: '16px',\r\n+        color: '#424770',\r\n+        '::placeholder': {\r\n+          color: '#aab7c4',\r\n+        },\r\n+      },\r\n+      invalid: {\r\n+        color: '#9e2146',\r\n+      },\r\n+    },\r\n+  })\r\n+  card.mount('#card-element')\r\n+}\r\n+\r\n+function getLocation() {\r\n+  if (!navigator.geolocation) {\r\n+    alert('Geolocation is not supported by your browser');\r\n+    return;\r\n+  }\r\n+  navigator.geolocation.getCurrentPosition(async (position) => {\r\n+    const { latitude, longitude } = position.coords;\r\n+    try {\r\n+      const response = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${latitude}&lon=${longitude}`);\r\n+      const data = await response.json();\r\n+      userLocation.value = data.display_name || `${latitude}, ${longitude}`;\r\n+    } catch (e) {\r\n+      userLocation.value = `${latitude}, ${longitude}`;\r\n+    }\r\n+  }, (error) => {\r\n+    alert('Could not get your location');\r\n+  });\r\n+}\r\n+\r\n+function getGoogleMapsLink(location) {\r\n+  // Eğer koordinat ise (ör: \"41.123, 29.456\")\r\n+  if (/^-?\\d+(\\.\\d+)?[, ]+\\s*-?\\d+(\\.\\d+)?$/.test(location)) {\r\n+    const coords = location.split(/[ ,]+/).map(Number);\r\n+    return `https://www.google.com/maps?q=${coords[0]},${coords[1]}`;\r\n+  }\r\n+  // Değilse adres olarak arat\r\n+  return `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(location)}`;\r\n+}\r\n+\r\n+// Price string'ini kuruş cinsinden integer'a çevir\r\n+function convertPriceToCents(priceString) {\r\n+  if (!priceString) return 0;\r\n+  \r\n+  // \"€10.00\" formatından sayısal değeri çıkar\r\n+  const numericValue = priceString.replace(/[^\\d.,]/g, '').replace(',', '.');\r\n+  const amount = parseFloat(numericValue);\r\n+  \r\n+  // Kuruş cinsinden döndür (1000 = 10.00 TL)\r\n+  // Tam hassasiyet için Math.round kullanmıyoruz\r\n+  return Math.round(amount * 100);\r\n+}\r\n+\r\n+const handleStep = async () => {\r\n+  if (currentStep.value === 1) {\r\n+    if (!name.value || !email.value || !country.value || !phone.value || !hotelAddress.value) {\r\n+      errorMsg.value = 'Please fill in all required fields.';\r\n+      return;\r\n+    }\r\n+    currentStep.value = 2;\r\n+    return;\r\n+  }\r\n+\r\n+  loading.value = true;\r\n+  errorMsg.value = '';\r\n+  success.value = false;\r\n+\r\n+  try {\r\n+    // Mevcut Stripe instance'ını kullan, yeni oluşturma\r\n+    if (!stripe) {\r\n+      throw new Error('Stripe not initialized. Please refresh the page.');\r\n+    }\r\n+\r\n+    // 1. Sadece rezervasyonu ve ödeme bilgilerini backend’e gönder\r\n+    const response = await fetch('https://searchyourtour.com/api/submit-booking', {\r\n+      method: 'POST',\r\n+      headers: {\r\n+        'Content-Type': 'application/json',\r\n+      },\r\n+      body: JSON.stringify({\r\n+        customer: {\r\n+          name: name.value,\r\n+          email: email.value,\r\n+          phone: selectedCountry.value.code + phone.value,\r\n+          country: country.value,\r\n+          hotel_address: hotelAddress.value,\r\n+          user_location: userLocation.value\r\n+        },\r\n+                  tour: {\r\n+            id: selectedTourStore.tour?.id || null,\r\n+            title: selectedTourStore.tour?.title || '',\r\n+            description: selectedTourStore.tour?.description || '',\r\n+            price: selectedTourStore.tour?.price || '',\r\n+            booking_date: selectedTourStore.tour?.bookingDate || new Date().toISOString().split('T')[0],\r\n+            tenant_id: 'ad5257a5-efdd-4314-9e5e-b56aabe321f1',\r\n+            currency_id: currencyId.value,\r\n+            language_id: languageId.value,\r\n+            buggy: 0,\r\n+            adult: selectedTourStore.tour?.adult || 1,\r\n+            child: selectedTourStore.tour?.child || 0,\r\n+            infant: selectedTourStore.tour?.infant || 0,\r\n+            roomNumber: 0,\r\n+            randomCode: Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15)\r\n+          },\r\n+          payment: {\r\n+            amount: convertPriceToCents(selectedTourStore.tour?.price || ''),\r\n+            currency: currentCurrency.value\r\n+          }\r\n+      })\r\n+    });\r\n+\r\n+    const data = await response.json();\r\n+\r\n+    // 2. client_secret geldiyse, Stripe ile ödemeyi başlat\r\n+    if (data?.client_secret) {\r\n+      const result = await stripe.confirmCardPayment(data.client_secret, {\r\n+        payment_method: {\r\n+                      card: card, // Stripe Elements component\r\n+          billing_details: {\r\n+            name: name.value,\r\n+            email: email.value,\r\n+            phone: selectedCountry.value.code + phone.value,\r\n+            address: {\r\n+              country: selectedCountry.value.iso,\r\n+              line1: hotelAddress.value\r\n+            }\r\n+          }\r\n+        },\r\n+        return_url: 'https://yourfrontend.com/payment-status'\r\n+      });\r\n+\r\n+      if (result.error) {\r\n+        console.error('Ödeme hatası:', result.error.message);\r\n+        errorMsg.value = result.error.message || 'Payment failed. Please try again.';\r\n+\r\n+      if (data.reservation_id) {\r\n+        await fetch('https://searchyourtour.com/api/payment-failed', {\r\n+          method: 'POST',\r\n+          headers: { 'Content-Type': 'application/json' },\r\n+          body: JSON.stringify({\r\n+            reservation_id: data.reservation_id,\r\n+            error: result.error\r\n+          })\r\n+        });\r\n+      }\r\n+\r\n+      } else if (result.paymentIntent.status === 'succeeded') {\r\n+        // ✅ Ödeme başarılı\r\n+        success.value = true;\r\n+      } else {\r\n+        // Ödeme beklemede ya da başka bir durum\r\n+        errorMsg.value = 'Ödeme tamamlanamadı.';\r\n+      }\r\n+    }\r\n+\r\n+  } catch (err) {\r\n+    console.error('Payment error:', err);\r\n+    errorMsg.value = err.message || 'Payment failed. Please try again.';\r\n+  } finally {\r\n+    loading.value = false;\r\n+  }\r\n+};\r\n+</script>\r\n+\r\n+<style scoped>\r\n+/* CheckoutForm.vue'dan taşınan stiller */\r\n+.checkout-main-layout {\r\n+  display: flex;\r\n+  gap: 64px;\r\n+  align-items: stretch;\r\n+  justify-content: center;\r\n+  background: #f6f8fa;\r\n+  padding: 48px 0;\r\n+  min-height: 100vh;\r\n+}\r\n+.checkout-left, .checkout-right {\r\n+  flex: 1 1 0;\r\n+  min-width: 340px;\r\n+  max-width: 600px;\r\n+  background: #fff;\r\n+  border-radius: 26px;\r\n+  box-shadow: 0 8px 32px rgba(44,62,80,0.10);\r\n+  padding: 36px 44px 24px 44px;\r\n+  font-family: 'Inter', 'Segoe UI', Arial, sans-serif;\r\n+  display: flex;\r\n+  flex-direction: column;\r\n+  justify-content: flex-start;\r\n+  height: 100%;\r\n+}\r\n+.checkout-left h2 {\r\n+  color: #1a2a3a;\r\n+  font-size: 2.3rem;\r\n+  margin-bottom: 18px;\r\n+  font-weight: 900;\r\n+  text-align: left;\r\n+  letter-spacing: -1px;\r\n+}\r\n+.secure-checkout {\r\n+  color: #0a8a4a;\r\n+  font-size: 1.08rem;\r\n+  margin-bottom: 18px;\r\n+  display: flex;\r\n+  align-items: center;\r\n+  gap: 8px;\r\n+  font-weight: 600;\r\n+}\r\n+.checkout-form {\r\n+  display: flex;\r\n+  flex-direction: column;\r\n+  gap: 18px;\r\n+}\r\n+.form-group {\r\n+  display: flex;\r\n+  flex-direction: column;\r\n+  gap: 4px;\r\n+}\r\n+input, select {\r\n+  padding: 12px 16px;\r\n+  border-radius: 10px;\r\n+  border: 2px solid #e0e6ed;\r\n+  font-size: 1.08rem;\r\n+  background: #f7fafd;\r\n+  outline: none;\r\n+  transition: border 0.2s;\r\n+}\r\n+input:focus, select:focus {\r\n+  border-color: #0070eb;\r\n+}\r\n+.stripe-card-element {\r\n+  padding: 12px 16px;\r\n+  border-radius: 10px;\r\n+  border: 2px solid #e0e6ed;\r\n+  background: #f7fafd;\r\n+  margin-top: 4px;\r\n+}\r\n+.form-note {\r\n+  font-size: 0.97rem;\r\n+  color: #888;\r\n+  margin-bottom: 8px;\r\n+}\r\n+.required { color: #d7263d; }\r\n+.pay-btn {\r\n+  width: 100%;\r\n+  background: linear-gradient(90deg, #FC6421 60%, #ff3401 100%);\r\n+  color: #fff;\r\n+  font-size: 1.15rem;\r\n+  font-weight: 800;\r\n+  border: none;\r\n+  border-radius: 32px;\r\n+  padding: 1.05rem 0;\r\n+  margin-top: 8px;\r\n+  cursor: pointer;\r\n+  transition: background 0.2s, box-shadow 0.2s;\r\n+  box-shadow: 0 2px 12px rgba(0,112,235,0.08);\r\n+  letter-spacing: 0.5px;\r\n+}\r\n+.pay-btn:hover {\r\n+  background: linear-gradient(90deg, #ff0000 60%, #ff0000 100%);\r\n+  box-shadow: 0 4px 24px rgba(0,112,235,0.13);\r\n+}\r\n+.pay-btn:disabled {\r\n+  background: #aaa;\r\n+  cursor: not-allowed;\r\n+}\r\n+.success-message {\r\n+  color: #27ae60;\r\n+  text-align: center;\r\n+  margin-top: 16px;\r\n+  font-size: 1.1rem;\r\n+  display: flex;\r\n+  align-items: center;\r\n+  justify-content: center;\r\n+  gap: 12px;\r\n+  padding: 16px;\r\n+  background: #f8fff9;\r\n+  border: 1px solid #27ae60;\r\n+  border-radius: 8px;\r\n+}\r\n+\r\n+.success-message i {\r\n+  font-size: 1.5rem;\r\n+  flex-shrink: 0;\r\n+}\r\n+\r\n+.success-message div {\r\n+  text-align: left;\r\n+}\r\n+\r\n+.success-message strong {\r\n+  display: block;\r\n+  margin-bottom: 4px;\r\n+}\r\n+\r\n+.success-message p {\r\n+  margin: 0;\r\n+  font-size: 0.95rem;\r\n+  color: #666;\r\n+}\r\n+.error-message {\r\n+  color: #d7263d;\r\n+  text-align: center;\r\n+  margin-top: 12px;\r\n+  font-size: 1rem;\r\n+}\r\n+\r\n+.order-summary-panel {\r\n+  display: flex;\r\n+  flex-direction: column;\r\n+  gap: 18px;\r\n+  height: 100%;\r\n+}\r\n+.order-summary-product {\r\n+  display: flex;\r\n+  gap: 22px;\r\n+  margin-bottom: 10px;\r\n+  align-items: flex-start;\r\n+}\r\n+.order-summary-img {\r\n+  width: 88px;\r\n+  height: 88px;\r\n+  border-radius: 14px;\r\n+  object-fit: cover;\r\n+  box-shadow: 0 2px 8px rgba(44,62,80,0.08);\r\n+}\r\n+.order-summary-product-info {\r\n+  flex: 1;\r\n+  display: flex;\r\n+  flex-direction: column;\r\n+  gap: 2px;\r\n+}\r\n+.product-title {\r\n+  font-weight: 900;\r\n+  font-size: 1.18rem;\r\n+  margin-bottom: 2px;\r\n+  color: #1a2a3a;\r\n+}\r\n+.product-detail {\r\n+  font-size: 1.04rem;\r\n+  color: #444;\r\n+  margin-bottom: 2px;\r\n+  display: flex;\r\n+  align-items: center;\r\n+  gap: 6px;\r\n+}\r\n+.order-summary-title {\r\n+  font-size: 1.45rem;\r\n+  font-weight: 900;\r\n+  margin-bottom: 18px;\r\n+  color: #1a2a3a;\r\n+  letter-spacing: -0.5px;\r\n+}\r\n+.order-summary-total-row {\r\n+  display: flex;\r\n+  justify-content: space-between;\r\n+  font-size: 1.22rem;\r\n+  font-weight: 900;\r\n+  margin-top: 10px;\r\n+  letter-spacing: 0.2px;\r\n+}\r\n+.order-summary-total {\r\n+  color: #FC6421;\r\n+  font-size: 1.32rem;\r\n+  font-weight: 900;\r\n+}\r\n+.order-summary-taxes {\r\n+  color: #0a8a4a;\r\n+  font-size: 0.97rem;\r\n+  margin-top: 2px;\r\n+  text-align: right;\r\n+}\r\n+.phone-row {\r\n+  margin-bottom: 0;\r\n+}\r\n+.phone-input-group {\r\n+  display: flex;\r\n+  gap: 10px;\r\n+  align-items: stretch;\r\n+}\r\n+.country-code-display {\r\n+  display: flex;\r\n+  align-items: center;\r\n+  gap: 6px;\r\n+  background: #f7fafd;\r\n+  border: 2px solid #e0e6ed;\r\n+  border-radius: 10px;\r\n+  padding: 12px 16px;\r\n+  font-size: 1.08rem;\r\n+  min-width: 90px;\r\n+  font-weight: 600;\r\n+  height: 48px;\r\n+  box-sizing: border-box;\r\n+}\r\n+.flag-option {\r\n+  width: 22px;\r\n+  height: 16px;\r\n+  margin-right: 7px;\r\n+  vertical-align: middle;\r\n+  border-radius: 3px;\r\n+  box-shadow: 0 1px 3px rgba(0,0,0,0.07);\r\n+}\r\n+.country-select-row {\r\n+  margin-bottom: 0;\r\n+}\r\n+.country-select-flex {\r\n+  display: flex;\r\n+  align-items: center;\r\n+  gap: 8px;\r\n+}\r\n+.country-select-fullwidth {\r\n+  width: 100%;\r\n+  min-width: 0;\r\n+  box-sizing: border-box;\r\n+}\r\n+.phone-input {\r\n+  flex: 1;\r\n+  padding: 12px 16px;\r\n+  border-radius: 10px;\r\n+  border: 2px solid #e0e6ed;\r\n+  font-size: 1.08rem;\r\n+  background: #f7fafd;\r\n+  outline: none;\r\n+  transition: border 0.2s;\r\n+  height: 48px;\r\n+  box-sizing: border-box;\r\n+}\r\n+.phone-input:focus {\r\n+  border-color: #0070eb;\r\n+}\r\n+.location-btn {\r\n+  background: #f7f7f7;\r\n+  border: 1px solid #ddd;\r\n+  border-radius: 6px;\r\n+  font-size: 1.08rem;\r\n+  padding: 0 16px;\r\n+  height: 48px;\r\n+  display: flex;\r\n+  align-items: center;\r\n+  justify-content: center;\r\n+  cursor: pointer;\r\n+  transition: background 0.2s;\r\n+}\r\n+.location-btn:hover {\r\n+  background: #eee;\r\n+}\r\n+@media (max-width: 900px) {\r\n+  .checkout-main-layout {\r\n+    flex-direction: column;\r\n+    gap: 0;\r\n+    padding: 0.5rem 0 1rem 0;\r\n+    min-height: 100vh;\r\n+    width: 100vw;\r\n+    background: #fff;\r\n+    box-sizing: border-box;\r\n+  }\r\n+  .checkout-left, .checkout-right, .order-summary-panel {\r\n+    width: 100%;\r\n+    max-width: 100vw;\r\n+    border-radius: 10px;\r\n+    box-shadow: 0 2px 8px rgba(44,62,80,0.06);\r\n+    padding: 0.7rem 0.5rem;\r\n+    margin: 0 0 1rem 0;\r\n+    background: #fff;\r\n+    box-sizing: border-box;\r\n+    min-width: 0;\r\n+  }\r\n+}\r\n+@media (max-width: 600px) {\r\n+  body, html {\r\n+    background: #fff !important;\r\n+    margin: 0 !important;\r\n+    padding: 0 !important;\r\n+    overflow-x: hidden !important;\r\n+  }\r\n+  .checkout-main-layout {\r\n+    flex-direction: column !important;\r\n+    align-items: stretch !important;\r\n+    gap: 0 !important;\r\n+    padding: 0 12px !important;\r\n+    min-height: 100vh !important;\r\n+    width: 100vw !important;\r\n+    max-width: 100vw !important;\r\n+    background: #fff !important;\r\n+    box-sizing: border-box !important;\r\n+  }\r\n+  .checkout-left,\r\n+  .checkout-right,\r\n+  .order-summary-panel {\r\n+    width: 100% !important;\r\n+    max-width: 100vw !important;\r\n+    min-width: 0 !important;\r\n+    border-radius: 10px !important;\r\n+    box-shadow: 0 2px 8px rgba(44,62,80,0.06) !important;\r\n+    padding: 0.7rem 0.5rem !important;\r\n+    margin: 0 auto 1rem auto !important;\r\n+    background: #fff !important;\r\n+    box-sizing: border-box !important;\r\n+  }\r\n+  .checkout-left h2 {\r\n+    font-size: 1.4rem !important;\r\n+    margin-bottom: 14px !important;\r\n+  }\r\n+  .form-group,\r\n+  .country-select-fullwidth,\r\n+  .phone-input,\r\n+  .country-code-display,\r\n+  .pay-btn {\r\n+    max-width: 100vw !important;\r\n+    min-width: 0 !important;\r\n+    box-sizing: border-box !important;\r\n+    font-size: 1rem !important;\r\n+    padding-left: 0.2rem !important;\r\n+    padding-right: 0.2rem !important;\r\n+  }\r\n+  .order-summary-img {\r\n+    width: 44px !important;\r\n+    height: 44px !important;\r\n+    min-width: 32px !important;\r\n+    max-width: 44px !important;\r\n+  }\r\n+  .product-title,\r\n+  .order-summary-title {\r\n+    font-size: 1.08rem !important;\r\n+    word-break: break-word !important;\r\n+  }\r\n+  .pay-btn {\r\n+    font-size: 1.08rem !important;\r\n+    padding: 0.7rem 0 !important;\r\n+    margin-top: 0.5rem !important;\r\n+    border-radius: 12px !important;\r\n+  }\r\n+  .form-note {\r\n+    font-size: 0.9rem !important;\r\n+  }\r\n+  /* Scroll edilebilirlik için: */\r\n+  .checkout-modal,\r\n+  .checkout-content {\r\n+    width: 100vw !important;\r\n+    max-width: 100vw !important;\r\n+    height: 100vh !important;\r\n+    max-height: 100vh !important;\r\n+    overflow-y: auto !important;\r\n+    background: #fff !important;\r\n+    border-radius: 0 !important;\r\n+    box-shadow: none !important;\r\n+    padding: 0 !important;\r\n+    margin: 0 !important;\r\n+    display: flex !important;\r\n+    flex-direction: column !important;\r\n+    align-items: stretch !important;\r\n+  }\r\n+}\r\n+</style>\r\n"
                },
                {
                    "date": 1753108424328,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -376,15 +376,14 @@\n       if (result.error) {\r\n         console.error('Ödeme hatası:', result.error.message);\r\n         errorMsg.value = result.error.message || 'Payment failed. Please try again.';\r\n \r\n-      if (data.reservation_id) {\r\n-        await fetch('https://searchyourtour.com/api/payment-failed', {\r\n+      if (data.reservation_id && data.randomCode) {\r\n+        await fetch('https://searchyourtour.com/api/check_payment_status', {\r\n           method: 'POST',\r\n           headers: { 'Content-Type': 'application/json' },\r\n           body: JSON.stringify({\r\n-            reservation_id: data.reservation_id,\r\n-            error: result.error\r\n+            randomCode: data.randomCode\r\n           })\r\n         });\r\n       }\r\n \r\n@@ -793,788 +792,4 @@\n     align-items: stretch !important;\r\n   }\r\n }\r\n </style>\r\n-<template>\r\n-  <div class=\"checkout-main-layout\">\r\n-    <!-- SOL: Kişisel Bilgiler ve Ödeme Formu (Stepper) -->\r\n-    <div class=\"checkout-left\">\r\n-      <h2>Enter your personal details</h2>\r\n-      <div class=\"secure-checkout\">\r\n-        <i class=\"fas fa-lock\"></i> Checkout is fast and secure\r\n-      </div>\r\n-      <form @submit.prevent=\"handleStep\" class=\"checkout-form\">\r\n-        <template v-if=\"currentStep === 1\">\r\n-          <div class=\"form-group\">\r\n-            <label>Full name <span class=\"required\">*</span></label>\r\n-            <input v-model=\"name\" type=\"text\" required placeholder=\"Full Name\" />\r\n-          </div>\r\n-          <div class=\"form-group\">\r\n-            <label>Email <span class=\"required\">*</span></label>\r\n-            <input v-model=\"email\" type=\"email\" required placeholder=\"you@email.com\" />\r\n-          </div>\r\n-          <div class=\"form-group\">\r\n-            <label>Country <span class=\"required\">*</span></label>\r\n-            <select v-model=\"country\" class=\"country-select-fullwidth\">\r\n-              <option v-for=\"c in countries\" :key=\"c.iso\" :value=\"c.name\">\r\n-                {{ c.name }}\r\n-              </option>\r\n-            </select>\r\n-          </div>\r\n-          <div class=\"form-group phone-row\">\r\n-            <label>Mobile phone number <span class=\"required\">*</span></label>\r\n-            <div class=\"phone-input-group\">\r\n-              <div class=\"country-code-display\">\r\n-                <img :src=\"`https://flagsapi.com/${selectedCountry.iso}/flat/24.png`\" :alt=\"selectedCountry.name\" class=\"flag-option\" />\r\n-                <span>{{ selectedCountry.code }}</span>\r\n-              </div>\r\n-              <input\r\n-                v-model=\"phone\"\r\n-                type=\"tel\"\r\n-                required\r\n-                class=\"phone-input\"\r\n-                :placeholder=\"selectedCountry.iso === 'TR' ? '5xx xxx xx xx' : selectedCountry.iso === 'US' ? 'xxx xxx xxxx' : selectedCountry.iso === 'DE' ? '1xx xxxxxxx' : 'xx xx xx xx'\"\r\n-              />\r\n-            </div>\r\n-          </div>\r\n-          <div class=\"form-group\">\r\n-            <label>Hotel Address <span class=\"required\">*</span></label>\r\n-            <input v-model=\"hotelAddress\" type=\"text\" required placeholder=\"Enter your hotel address\" />\r\n-          </div>\r\n-          <div class=\"form-group\">\r\n-            <label>Your Location (optional)</label>\r\n-            <div style=\"display: flex; gap: 8px;\">\r\n-              <input\r\n-                v-model=\"userLocation\"\r\n-                type=\"text\"\r\n-                placeholder=\"Click the button to add your current location\"\r\n-                readonly\r\n-                class=\"input\"\r\n-                style=\"flex: 1;\"\r\n-              />\r\n-              <button type=\"button\" @click=\"getLocation\" class=\"location-btn\" title=\"Use my location\">📍</button>\r\n-            </div>\r\n-            <div v-if=\"userLocation\">\r\n-              <a\r\n-                :href=\"getGoogleMapsLink(userLocation)\"\r\n-                target=\"_blank\"\r\n-                rel=\"noopener\"\r\n-                style=\"color: #0070eb; text-decoration: underline; cursor: pointer; font-size:0.97em;\"\r\n-              >\r\n-                View on Google Maps\r\n-              </a>\r\n-            </div>\r\n-          </div>\r\n-          <div class=\"form-note\">We’ll only contact you with essential updates or changes to your booking</div>\r\n-          <button class=\"pay-btn\" type=\"submit\">Go to payment</button>\r\n-        </template>\r\n-        <template v-else>\r\n-          <div class=\"form-group\">\r\n-            <label>Name on Card <span class=\"required\">*</span></label>\r\n-            <input v-model=\"cardName\" type=\"text\" required placeholder=\"Name on Card\" />\r\n-          </div>\r\n-          <div class=\"form-group\">\r\n-            <label>Card Details</label>\r\n-            <div id=\"card-element\" class=\"stripe-card-element\"></div>\r\n-          </div>\r\n-          <button class=\"pay-btn\" :disabled=\"loading\" type=\"submit\">\r\n-            <span v-if=\"loading\">Processing...</span>\r\n-            <span v-else>Pay Now</span>\r\n-          </button>\r\n-          <div v-if=\"success\" class=\"success-message\">\r\n-            <i class=\"fas fa-check-circle\"></i> \r\n-            <div>\r\n-              <strong>Payment Successful!</strong>\r\n-              <p>Your booking has been confirmed. You will receive a confirmation email shortly.</p>\r\n-            </div>\r\n-          </div>\r\n-          <div v-if=\"errorMsg\" class=\"error-message\">\r\n-            <i class=\"fas fa-exclamation-circle\"></i> {{ errorMsg }}\r\n-          </div>\r\n-        </template>\r\n-      </form>\r\n-    </div>\r\n-    <!-- SAĞ: Order Summary -->\r\n-    <div class=\"checkout-right\">\r\n-      <div class=\"order-summary-panel\" v-if=\"selectedTourStore.tour\">\r\n-        <div class=\"order-summary-title\">Order summary</div>\r\n-        <div class=\"order-summary-product\">\r\n-          <img class=\"order-summary-img\" :src=\"selectedTourStore.tour.image\" :alt=\"selectedTourStore.tour.title\" />\r\n-          <div class=\"order-summary-product-info\">\r\n-            <div class=\"product-title\">{{ selectedTourStore.tour.title }}</div>\r\n-            <div class=\"product-detail\">{{ selectedTourStore.tour.description }}</div>\r\n-            <div class=\"product-detail\" v-if=\"selectedTourStore.tour.bookingDate\">\r\n-              <i class=\"fas fa-calendar-alt\"></i> {{ selectedTourStore.tour.bookingDate }}\r\n-            </div>\r\n-            <div class=\"product-detail\"><i class=\"fas fa-user\"></i> {{ selectedTourStore.tour.participants }}</div>\r\n-            <div class=\"product-detail\" v-if=\"selectedTourStore.tour.email\"><i class=\"fas fa-envelope\"></i> {{ selectedTourStore.tour.email }}</div>\r\n-            <div class=\"product-detail\" v-if=\"selectedTourStore.tour.userLocation\">\r\n-              <i class=\"fas fa-map-marker-alt\"></i>\r\n-              <a\r\n-                :href=\"getGoogleMapsLink(selectedTourStore.tour.userLocation)\"\r\n-                target=\"_blank\"\r\n-                rel=\"noopener\"\r\n-                style=\"color: #0070eb; text-decoration: underline; cursor: pointer;\"\r\n-              >\r\n-                {{ selectedTourStore.tour.userLocation }}\r\n-              </a>\r\n-            </div>\r\n-          </div>\r\n-        </div>\r\n-        <div class=\"order-summary-total-row\">\r\n-          <span>Total</span>\r\n-          <span class=\"order-summary-total\">{{ selectedTourStore.tour.price }}</span>\r\n-        </div>\r\n-        <div class=\"order-summary-taxes\">All taxes and fees included</div>\r\n-      </div>\r\n-    </div>\r\n-  </div>\r\n-</template>\r\n-\r\n-<script setup>\r\n-import { ref, onMounted, watch, computed } from 'vue'\r\n-import { useRouter } from 'vue-router'\r\n-import { useSelectedTourStore } from '../stores/selectedTour'\r\n-let stripe, elements, card\r\n-import { loadStripe } from '@stripe/stripe-js';\r\n-\r\n-const router = useRouter()\r\n-const selectedTourStore = useSelectedTourStore()\r\n-\r\n-// Helper function to get language ID from language code\r\n-const getLanguageId = (langCode) => {\r\n-  const languageMap = {\r\n-    'tr': 2,    // Türkçe\r\n-    'de': 6,    // Deutsch\r\n-    'en': 1,    // English\r\n-    'ar': 3,    // العربية\r\n-    'es': 4,    // Español\r\n-    'fr': 5,    // Français\r\n-    'it': 7,    // Italiano\r\n-    'pt': 8,    // Português\r\n-    'zh': 10,   // 中文\r\n-    'ja': 11,   // 日本語\r\n-    'ru': 9     // Русский\r\n-  }\r\n-  return languageMap[langCode] || 1\r\n-}\r\n-\r\n-// Helper function to get currency ID from currency code\r\n-const getCurrencyId = (currencyCode) => {\r\n-  const currencyMap = {\r\n-    'EUR': 4,\r\n-    'USD': 5,\r\n-    'GBP': 6,\r\n-    'TRY': 7\r\n-  }\r\n-  return currencyMap[currencyCode] || 4\r\n-}\r\n-\r\n-// Tüm ülkeler ve kodları\r\n-const countries = [\r\n-  { name: 'Turkey', code: '+90', iso: 'TR' },\r\n-  { name: 'United States', code: '+1', iso: 'US' },\r\n-  { name: 'Germany', code: '+49', iso: 'DE' },\r\n-  { name: 'France', code: '+33', iso: 'FR' },\r\n-  { name: 'United Kingdom', code: '+44', iso: 'GB' },\r\n-  { name: 'Italy', code: '+39', iso: 'IT' },\r\n-  { name: 'Spain', code: '+34', iso: 'ES' },\r\n-  { name: 'Netherlands', code: '+31', iso: 'NL' },\r\n-  { name: 'Russia', code: '+7', iso: 'RU' },\r\n-  { name: 'Japan', code: '+81', iso: 'JP' },\r\n-  { name: 'China', code: '+86', iso: 'CN' },\r\n-  { name: 'India', code: '+91', iso: 'IN' },\r\n-  { name: 'Brazil', code: '+55', iso: 'BR' },\r\n-  { name: 'Canada', code: '+1', iso: 'CA' },\r\n-  { name: 'Australia', code: '+61', iso: 'AU' },\r\n-]\r\n-\r\n-const country = ref(countries[0].name)\r\n-const phone = ref('')\r\n-const selectedCountry = computed(() => countries.find(c => c.name === country.value) || countries[0])\r\n-\r\n-const name = ref('')\r\n-const email = ref(selectedTourStore.tour?.email || '')\r\n-\r\n-// Debug: Tour verilerini kontrol et\r\n-console.log('Selected Tour Store:', selectedTourStore.tour)\r\n-const cardName = ref('')\r\n-const loading = ref(false)\r\n-const success = ref(false)\r\n-const errorMsg = ref('')\r\n-const currentStep = ref(1)\r\n-const hotelAddress = ref(\"\");\r\n-const userLocation = ref(\"\");\r\n-\r\n-// Currency ve language bilgileri\r\n-const currentCurrency = ref(localStorage.getItem('selectedCurrency') || 'EUR')\r\n-const currencyId = computed(() => getCurrencyId(currentCurrency.value))\r\n-const languageId = computed(() => getLanguageId(localStorage.getItem('selectedLanguage') || 'en'))\r\n-\r\n-onMounted(() => {\r\n-  watch(currentStep, (step) => {\r\n-    if (step === 2) {\r\n-      setTimeout(() => {\r\n-        if (!window.Stripe) {\r\n-          const script = document.createElement('script')\r\n-          script.src = 'https://js.stripe.com/v3/'\r\n-          script.onload = setupStripe\r\n-          document.head.appendChild(script)\r\n-        } else {\r\n-          setupStripe()\r\n-        }\r\n-      }, 0)\r\n-    }\r\n-  }, { immediate: true })\r\n-})\r\n-\r\n-function setupStripe() {\r\n-  if (card) return\r\n-  // Stripe public key - production'da gerçek key kullanılacak\r\n-  stripe = window.Stripe('pk_test_51RmaYhQQzUg4uq68XfoINf2CrffnJsjaJ1OHLwLtNLHHKcJ2uPlQABvQi5gFefQ5CnyJtbBbLOK7yioo2pPhkzfS00bUBXgBV7') // TODO: Replace with your real public key\r\n-  elements = stripe.elements()\r\n-  card = elements.create('card', {\r\n-    style: {\r\n-      base: {\r\n-        fontSize: '16px',\r\n-        color: '#424770',\r\n-        '::placeholder': {\r\n-          color: '#aab7c4',\r\n-        },\r\n-      },\r\n-      invalid: {\r\n-        color: '#9e2146',\r\n-      },\r\n-    },\r\n-  })\r\n-  card.mount('#card-element')\r\n-}\r\n-\r\n-function getLocation() {\r\n-  if (!navigator.geolocation) {\r\n-    alert('Geolocation is not supported by your browser');\r\n-    return;\r\n-  }\r\n-  navigator.geolocation.getCurrentPosition(async (position) => {\r\n-    const { latitude, longitude } = position.coords;\r\n-    try {\r\n-      const response = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${latitude}&lon=${longitude}`);\r\n-      const data = await response.json();\r\n-      userLocation.value = data.display_name || `${latitude}, ${longitude}`;\r\n-    } catch (e) {\r\n-      userLocation.value = `${latitude}, ${longitude}`;\r\n-    }\r\n-  }, (error) => {\r\n-    alert('Could not get your location');\r\n-  });\r\n-}\r\n-\r\n-function getGoogleMapsLink(location) {\r\n-  // Eğer koordinat ise (ör: \"41.123, 29.456\")\r\n-  if (/^-?\\d+(\\.\\d+)?[, ]+\\s*-?\\d+(\\.\\d+)?$/.test(location)) {\r\n-    const coords = location.split(/[ ,]+/).map(Number);\r\n-    return `https://www.google.com/maps?q=${coords[0]},${coords[1]}`;\r\n-  }\r\n-  // Değilse adres olarak arat\r\n-  return `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(location)}`;\r\n-}\r\n-\r\n-// Price string'ini kuruş cinsinden integer'a çevir\r\n-function convertPriceToCents(priceString) {\r\n-  if (!priceString) return 0;\r\n-  \r\n-  // \"€10.00\" formatından sayısal değeri çıkar\r\n-  const numericValue = priceString.replace(/[^\\d.,]/g, '').replace(',', '.');\r\n-  const amount = parseFloat(numericValue);\r\n-  \r\n-  // Kuruş cinsinden döndür (1000 = 10.00 TL)\r\n-  // Tam hassasiyet için Math.round kullanmıyoruz\r\n-  return Math.round(amount * 100);\r\n-}\r\n-\r\n-const handleStep = async () => {\r\n-  if (currentStep.value === 1) {\r\n-    if (!name.value || !email.value || !country.value || !phone.value || !hotelAddress.value) {\r\n-      errorMsg.value = 'Please fill in all required fields.';\r\n-      return;\r\n-    }\r\n-    currentStep.value = 2;\r\n-    return;\r\n-  }\r\n-\r\n-  loading.value = true;\r\n-  errorMsg.value = '';\r\n-  success.value = false;\r\n-\r\n-  try {\r\n-    // Mevcut Stripe instance'ını kullan, yeni oluşturma\r\n-    if (!stripe) {\r\n-      throw new Error('Stripe not initialized. Please refresh the page.');\r\n-    }\r\n-\r\n-    // 1. Sadece rezervasyonu ve ödeme bilgilerini backend’e gönder\r\n-    const response = await fetch('https://searchyourtour.com/api/submit-booking', {\r\n-      method: 'POST',\r\n-      headers: {\r\n-        'Content-Type': 'application/json',\r\n-      },\r\n-      body: JSON.stringify({\r\n-        customer: {\r\n-          name: name.value,\r\n-          email: email.value,\r\n-          phone: selectedCountry.value.code + phone.value,\r\n-          country: country.value,\r\n-          hotel_address: hotelAddress.value,\r\n-          user_location: userLocation.value\r\n-        },\r\n-                  tour: {\r\n-            id: selectedTourStore.tour?.id || null,\r\n-            title: selectedTourStore.tour?.title || '',\r\n-            description: selectedTourStore.tour?.description || '',\r\n-            price: selectedTourStore.tour?.price || '',\r\n-            booking_date: selectedTourStore.tour?.bookingDate || new Date().toISOString().split('T')[0],\r\n-            tenant_id: 'ad5257a5-efdd-4314-9e5e-b56aabe321f1',\r\n-            currency_id: currencyId.value,\r\n-            language_id: languageId.value,\r\n-            buggy: 0,\r\n-            adult: selectedTourStore.tour?.adult || 1,\r\n-            child: selectedTourStore.tour?.child || 0,\r\n-            infant: selectedTourStore.tour?.infant || 0,\r\n-            roomNumber: 0,\r\n-            randomCode: Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15)\r\n-          },\r\n-          payment: {\r\n-            amount: convertPriceToCents(selectedTourStore.tour?.price || ''),\r\n-            currency: currentCurrency.value\r\n-          }\r\n-      })\r\n-    });\r\n-\r\n-    const data = await response.json();\r\n-\r\n-    // 2. client_secret geldiyse, Stripe ile ödemeyi başlat\r\n-    if (data?.client_secret) {\r\n-      const result = await stripe.confirmCardPayment(data.client_secret, {\r\n-        payment_method: {\r\n-                      card: card, // Stripe Elements component\r\n-          billing_details: {\r\n-            name: name.value,\r\n-            email: email.value,\r\n-            phone: selectedCountry.value.code + phone.value,\r\n-            address: {\r\n-              country: selectedCountry.value.iso,\r\n-              line1: hotelAddress.value\r\n-            }\r\n-          }\r\n-        },\r\n-        return_url: 'https://yourfrontend.com/payment-status'\r\n-      });\r\n-\r\n-      if (result.error) {\r\n-        console.error('Ödeme hatası:', result.error.message);\r\n-        errorMsg.value = result.error.message || 'Payment failed. Please try again.';\r\n-      } else if (result.paymentIntent.status === 'succeeded') {\r\n-        // ✅ Ödeme başarılı\r\n-        success.value = true;\r\n-      } else {\r\n-        // Ödeme beklemede ya da başka bir durum\r\n-        errorMsg.value = 'Ödeme tamamlanamadı.';\r\n-      }\r\n-    }\r\n-\r\n-  } catch (err) {\r\n-    console.error('Payment error:', err);\r\n-    errorMsg.value = err.message || 'Payment failed. Please try again.';\r\n-  } finally {\r\n-    loading.value = false;\r\n-  }\r\n-};\r\n-</script>\r\n-\r\n-<style scoped>\r\n-/* CheckoutForm.vue'dan taşınan stiller */\r\n-.checkout-main-layout {\r\n-  display: flex;\r\n-  gap: 64px;\r\n-  align-items: stretch;\r\n-  justify-content: center;\r\n-  background: #f6f8fa;\r\n-  padding: 48px 0;\r\n-  min-height: 100vh;\r\n-}\r\n-.checkout-left, .checkout-right {\r\n-  flex: 1 1 0;\r\n-  min-width: 340px;\r\n-  max-width: 600px;\r\n-  background: #fff;\r\n-  border-radius: 26px;\r\n-  box-shadow: 0 8px 32px rgba(44,62,80,0.10);\r\n-  padding: 36px 44px 24px 44px;\r\n-  font-family: 'Inter', 'Segoe UI', Arial, sans-serif;\r\n-  display: flex;\r\n-  flex-direction: column;\r\n-  justify-content: flex-start;\r\n-  height: 100%;\r\n-}\r\n-.checkout-left h2 {\r\n-  color: #1a2a3a;\r\n-  font-size: 2.3rem;\r\n-  margin-bottom: 18px;\r\n-  font-weight: 900;\r\n-  text-align: left;\r\n-  letter-spacing: -1px;\r\n-}\r\n-.secure-checkout {\r\n-  color: #0a8a4a;\r\n-  font-size: 1.08rem;\r\n-  margin-bottom: 18px;\r\n-  display: flex;\r\n-  align-items: center;\r\n-  gap: 8px;\r\n-  font-weight: 600;\r\n-}\r\n-.checkout-form {\r\n-  display: flex;\r\n-  flex-direction: column;\r\n-  gap: 18px;\r\n-}\r\n-.form-group {\r\n-  display: flex;\r\n-  flex-direction: column;\r\n-  gap: 4px;\r\n-}\r\n-input, select {\r\n-  padding: 12px 16px;\r\n-  border-radius: 10px;\r\n-  border: 2px solid #e0e6ed;\r\n-  font-size: 1.08rem;\r\n-  background: #f7fafd;\r\n-  outline: none;\r\n-  transition: border 0.2s;\r\n-}\r\n-input:focus, select:focus {\r\n-  border-color: #0070eb;\r\n-}\r\n-.stripe-card-element {\r\n-  padding: 12px 16px;\r\n-  border-radius: 10px;\r\n-  border: 2px solid #e0e6ed;\r\n-  background: #f7fafd;\r\n-  margin-top: 4px;\r\n-}\r\n-.form-note {\r\n-  font-size: 0.97rem;\r\n-  color: #888;\r\n-  margin-bottom: 8px;\r\n-}\r\n-.required { color: #d7263d; }\r\n-.pay-btn {\r\n-  width: 100%;\r\n-  background: linear-gradient(90deg, #FC6421 60%, #ff3401 100%);\r\n-  color: #fff;\r\n-  font-size: 1.15rem;\r\n-  font-weight: 800;\r\n-  border: none;\r\n-  border-radius: 32px;\r\n-  padding: 1.05rem 0;\r\n-  margin-top: 8px;\r\n-  cursor: pointer;\r\n-  transition: background 0.2s, box-shadow 0.2s;\r\n-  box-shadow: 0 2px 12px rgba(0,112,235,0.08);\r\n-  letter-spacing: 0.5px;\r\n-}\r\n-.pay-btn:hover {\r\n-  background: linear-gradient(90deg, #ff0000 60%, #ff0000 100%);\r\n-  box-shadow: 0 4px 24px rgba(0,112,235,0.13);\r\n-}\r\n-.pay-btn:disabled {\r\n-  background: #aaa;\r\n-  cursor: not-allowed;\r\n-}\r\n-.success-message {\r\n-  color: #27ae60;\r\n-  text-align: center;\r\n-  margin-top: 16px;\r\n-  font-size: 1.1rem;\r\n-  display: flex;\r\n-  align-items: center;\r\n-  justify-content: center;\r\n-  gap: 12px;\r\n-  padding: 16px;\r\n-  background: #f8fff9;\r\n-  border: 1px solid #27ae60;\r\n-  border-radius: 8px;\r\n-}\r\n-\r\n-.success-message i {\r\n-  font-size: 1.5rem;\r\n-  flex-shrink: 0;\r\n-}\r\n-\r\n-.success-message div {\r\n-  text-align: left;\r\n-}\r\n-\r\n-.success-message strong {\r\n-  display: block;\r\n-  margin-bottom: 4px;\r\n-}\r\n-\r\n-.success-message p {\r\n-  margin: 0;\r\n-  font-size: 0.95rem;\r\n-  color: #666;\r\n-}\r\n-.error-message {\r\n-  color: #d7263d;\r\n-  text-align: center;\r\n-  margin-top: 12px;\r\n-  font-size: 1rem;\r\n-}\r\n-\r\n-.order-summary-panel {\r\n-  display: flex;\r\n-  flex-direction: column;\r\n-  gap: 18px;\r\n-  height: 100%;\r\n-}\r\n-.order-summary-product {\r\n-  display: flex;\r\n-  gap: 22px;\r\n-  margin-bottom: 10px;\r\n-  align-items: flex-start;\r\n-}\r\n-.order-summary-img {\r\n-  width: 88px;\r\n-  height: 88px;\r\n-  border-radius: 14px;\r\n-  object-fit: cover;\r\n-  box-shadow: 0 2px 8px rgba(44,62,80,0.08);\r\n-}\r\n-.order-summary-product-info {\r\n-  flex: 1;\r\n-  display: flex;\r\n-  flex-direction: column;\r\n-  gap: 2px;\r\n-}\r\n-.product-title {\r\n-  font-weight: 900;\r\n-  font-size: 1.18rem;\r\n-  margin-bottom: 2px;\r\n-  color: #1a2a3a;\r\n-}\r\n-.product-detail {\r\n-  font-size: 1.04rem;\r\n-  color: #444;\r\n-  margin-bottom: 2px;\r\n-  display: flex;\r\n-  align-items: center;\r\n-  gap: 6px;\r\n-}\r\n-.order-summary-title {\r\n-  font-size: 1.45rem;\r\n-  font-weight: 900;\r\n-  margin-bottom: 18px;\r\n-  color: #1a2a3a;\r\n-  letter-spacing: -0.5px;\r\n-}\r\n-.order-summary-total-row {\r\n-  display: flex;\r\n-  justify-content: space-between;\r\n-  font-size: 1.22rem;\r\n-  font-weight: 900;\r\n-  margin-top: 10px;\r\n-  letter-spacing: 0.2px;\r\n-}\r\n-.order-summary-total {\r\n-  color: #FC6421;\r\n-  font-size: 1.32rem;\r\n-  font-weight: 900;\r\n-}\r\n-.order-summary-taxes {\r\n-  color: #0a8a4a;\r\n-  font-size: 0.97rem;\r\n-  margin-top: 2px;\r\n-  text-align: right;\r\n-}\r\n-.phone-row {\r\n-  margin-bottom: 0;\r\n-}\r\n-.phone-input-group {\r\n-  display: flex;\r\n-  gap: 10px;\r\n-  align-items: stretch;\r\n-}\r\n-.country-code-display {\r\n-  display: flex;\r\n-  align-items: center;\r\n-  gap: 6px;\r\n-  background: #f7fafd;\r\n-  border: 2px solid #e0e6ed;\r\n-  border-radius: 10px;\r\n-  padding: 12px 16px;\r\n-  font-size: 1.08rem;\r\n-  min-width: 90px;\r\n-  font-weight: 600;\r\n-  height: 48px;\r\n-  box-sizing: border-box;\r\n-}\r\n-.flag-option {\r\n-  width: 22px;\r\n-  height: 16px;\r\n-  margin-right: 7px;\r\n-  vertical-align: middle;\r\n-  border-radius: 3px;\r\n-  box-shadow: 0 1px 3px rgba(0,0,0,0.07);\r\n-}\r\n-.country-select-row {\r\n-  margin-bottom: 0;\r\n-}\r\n-.country-select-flex {\r\n-  display: flex;\r\n-  align-items: center;\r\n-  gap: 8px;\r\n-}\r\n-.country-select-fullwidth {\r\n-  width: 100%;\r\n-  min-width: 0;\r\n-  box-sizing: border-box;\r\n-}\r\n-.phone-input {\r\n-  flex: 1;\r\n-  padding: 12px 16px;\r\n-  border-radius: 10px;\r\n-  border: 2px solid #e0e6ed;\r\n-  font-size: 1.08rem;\r\n-  background: #f7fafd;\r\n-  outline: none;\r\n-  transition: border 0.2s;\r\n-  height: 48px;\r\n-  box-sizing: border-box;\r\n-}\r\n-.phone-input:focus {\r\n-  border-color: #0070eb;\r\n-}\r\n-.location-btn {\r\n-  background: #f7f7f7;\r\n-  border: 1px solid #ddd;\r\n-  border-radius: 6px;\r\n-  font-size: 1.08rem;\r\n-  padding: 0 16px;\r\n-  height: 48px;\r\n-  display: flex;\r\n-  align-items: center;\r\n-  justify-content: center;\r\n-  cursor: pointer;\r\n-  transition: background 0.2s;\r\n-}\r\n-.location-btn:hover {\r\n-  background: #eee;\r\n-}\r\n-@media (max-width: 900px) {\r\n-  .checkout-main-layout {\r\n-    flex-direction: column;\r\n-    gap: 0;\r\n-    padding: 0.5rem 0 1rem 0;\r\n-    min-height: 100vh;\r\n-    width: 100vw;\r\n-    background: #fff;\r\n-    box-sizing: border-box;\r\n-  }\r\n-  .checkout-left, .checkout-right, .order-summary-panel {\r\n-    width: 100%;\r\n-    max-width: 100vw;\r\n-    border-radius: 10px;\r\n-    box-shadow: 0 2px 8px rgba(44,62,80,0.06);\r\n-    padding: 0.7rem 0.5rem;\r\n-    margin: 0 0 1rem 0;\r\n-    background: #fff;\r\n-    box-sizing: border-box;\r\n-    min-width: 0;\r\n-  }\r\n-}\r\n-@media (max-width: 600px) {\r\n-  body, html {\r\n-    background: #fff !important;\r\n-    margin: 0 !important;\r\n-    padding: 0 !important;\r\n-    overflow-x: hidden !important;\r\n-  }\r\n-  .checkout-main-layout {\r\n-    flex-direction: column !important;\r\n-    align-items: stretch !important;\r\n-    gap: 0 !important;\r\n-    padding: 0 12px !important;\r\n-    min-height: 100vh !important;\r\n-    width: 100vw !important;\r\n-    max-width: 100vw !important;\r\n-    background: #fff !important;\r\n-    box-sizing: border-box !important;\r\n-  }\r\n-  .checkout-left,\r\n-  .checkout-right,\r\n-  .order-summary-panel {\r\n-    width: 100% !important;\r\n-    max-width: 100vw !important;\r\n-    min-width: 0 !important;\r\n-    border-radius: 10px !important;\r\n-    box-shadow: 0 2px 8px rgba(44,62,80,0.06) !important;\r\n-    padding: 0.7rem 0.5rem !important;\r\n-    margin: 0 auto 1rem auto !important;\r\n-    background: #fff !important;\r\n-    box-sizing: border-box !important;\r\n-  }\r\n-  .checkout-left h2 {\r\n-    font-size: 1.4rem !important;\r\n-    margin-bottom: 14px !important;\r\n-  }\r\n-  .form-group,\r\n-  .country-select-fullwidth,\r\n-  .phone-input,\r\n-  .country-code-display,\r\n-  .pay-btn {\r\n-    max-width: 100vw !important;\r\n-    min-width: 0 !important;\r\n-    box-sizing: border-box !important;\r\n-    font-size: 1rem !important;\r\n-    padding-left: 0.2rem !important;\r\n-    padding-right: 0.2rem !important;\r\n-  }\r\n-  .order-summary-img {\r\n-    width: 44px !important;\r\n-    height: 44px !important;\r\n-    min-width: 32px !important;\r\n-    max-width: 44px !important;\r\n-  }\r\n-  .product-title,\r\n-  .order-summary-title {\r\n-    font-size: 1.08rem !important;\r\n-    word-break: break-word !important;\r\n-  }\r\n-  .pay-btn {\r\n-    font-size: 1.08rem !important;\r\n-    padding: 0.7rem 0 !important;\r\n-    margin-top: 0.5rem !important;\r\n-    border-radius: 12px !important;\r\n-  }\r\n-  .form-note {\r\n-    font-size: 0.9rem !important;\r\n-  }\r\n-  /* Scroll edilebilirlik için: */\r\n-  .checkout-modal,\r\n-  .checkout-content {\r\n-    width: 100vw !important;\r\n-    max-width: 100vw !important;\r\n-    height: 100vh !important;\r\n-    max-height: 100vh !important;\r\n-    overflow-y: auto !important;\r\n-    background: #fff !important;\r\n-    border-radius: 0 !important;\r\n-    box-shadow: none !important;\r\n-    padding: 0 !important;\r\n-    margin: 0 !important;\r\n-    display: flex !important;\r\n-    flex-direction: column !important;\r\n-    align-items: stretch !important;\r\n-  }\r\n-}\r\n-</style>\r\n"
                },
                {
                    "date": 1753108433982,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -381,8 +381,9 @@\n         await fetch('https://searchyourtour.com/api/check_payment_status', {\r\n           method: 'POST',\r\n           headers: { 'Content-Type': 'application/json' },\r\n           body: JSON.stringify({\r\n+            reservation_id: data.reservation_id,\r\n             randomCode: data.randomCode\r\n           })\r\n         });\r\n       }\r\n"
                },
                {
                    "date": 1753174598261,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -372,8 +372,10 @@\n         },\r\n         return_url: 'https://yourfrontend.com/payment-status'\r\n       });\r\n \r\n+      const paymentIntentId = result.paymentIntent?.id;\r\n+\r\n       if (result.error) {\r\n         console.error('Ödeme hatası:', result.error.message);\r\n         errorMsg.value = result.error.message || 'Payment failed. Please try again.';\r\n \r\n"
                },
                {
                    "date": 1753174663256,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -378,15 +378,16 @@\n       if (result.error) {\r\n         console.error('Ödeme hatası:', result.error.message);\r\n         errorMsg.value = result.error.message || 'Payment failed. Please try again.';\r\n \r\n-      if (data.reservation_id && data.randomCode) {\r\n+      if (data.reservation_id && data.randomCode && paymentIntentId) {\r\n         await fetch('https://searchyourtour.com/api/check_payment_status', {\r\n           method: 'POST',\r\n           headers: { 'Content-Type': 'application/json' },\r\n           body: JSON.stringify({\r\n             reservation_id: data.reservation_id,\r\n-            randomCode: data.randomCode\r\n+            randomCode: data.randomCode,\r\n+            payment_intent_id: paymentIntentId\r\n           })\r\n         });\r\n       }\r\n \r\n"
                },
                {
                    "date": 1753174709230,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -378,9 +378,9 @@\n       if (result.error) {\r\n         console.error('Ödeme hatası:', result.error.message);\r\n         errorMsg.value = result.error.message || 'Payment failed. Please try again.';\r\n \r\n-      if (data.reservation_id && data.randomCode && paymentIntentId) {\r\n+      if (data.reservation_id && paymentIntentId) {\r\n         await fetch('https://searchyourtour.com/api/check_payment_status', {\r\n           method: 'POST',\r\n           headers: { 'Content-Type': 'application/json' },\r\n           body: JSON.stringify({\r\n"
                },
                {
                    "date": 1753174756303,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -393,8 +393,9 @@\n \r\n       } else if (result.paymentIntent.status === 'succeeded') {\r\n         // ✅ Ödeme başarılı\r\n         success.value = true;\r\n+        paymentIntentId.value = paymentIntentId;\r\n       } else {\r\n         // Ödeme beklemede ya da başka bir durum\r\n         errorMsg.value = 'Ödeme tamamlanamadı.';\r\n       }\r\n"
                },
                {
                    "date": 1753174764780,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -393,9 +393,8 @@\n \r\n       } else if (result.paymentIntent.status === 'succeeded') {\r\n         // ✅ Ödeme başarılı\r\n         success.value = true;\r\n-        paymentIntentId.value = paymentIntentId;\r\n       } else {\r\n         // Ödeme beklemede ya da başka bir durum\r\n         errorMsg.value = 'Ödeme tamamlanamadı.';\r\n       }\r\n"
                },
                {
                    "date": 1753175017944,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -393,11 +393,31 @@\n \r\n       } else if (result.paymentIntent.status === 'succeeded') {\r\n         // ✅ Ödeme başarılı\r\n         success.value = true;\r\n+        if (data.reservation_id && paymentIntentId) {\r\n+        await fetch('https://searchyourtour.com/api/check_payment_status', {\r\n+          method: 'POST',\r\n+          headers: { 'Content-Type': 'application/json' },\r\n+          body: JSON.stringify({\r\n+            reservation_id: data.reservation_id,\r\n+            randomCode: data.randomCode,\r\n+            payment_intent_id: paymentIntentId\r\n+          })\r\n+        });\r\n       } else {\r\n         // Ödeme beklemede ya da başka bir durum\r\n         errorMsg.value = 'Ödeme tamamlanamadı.';\r\n+        if (data.reservation_id && paymentIntentId) {\r\n+        await fetch('https://searchyourtour.com/api/check_payment_status', {\r\n+          method: 'POST',\r\n+          headers: { 'Content-Type': 'application/json' },\r\n+          body: JSON.stringify({\r\n+            reservation_id: data.reservation_id,\r\n+            randomCode: data.randomCode,\r\n+            payment_intent_id: paymentIntentId\r\n+          })\r\n+        });\r\n       }\r\n     }\r\n \r\n   } catch (err) {\r\n"
                },
                {
                    "date": 1753175190654,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -372,62 +372,69 @@\n         },\r\n         return_url: 'https://yourfrontend.com/payment-status'\r\n       });\r\n \r\n-      const paymentIntentId = result.paymentIntent?.id;\r\n+      try {\r\n+        const paymentIntentId = result.paymentIntent?.id;\r\n \r\n-      if (result.error) {\r\n-        console.error('Ödeme hatası:', result.error.message);\r\n-        errorMsg.value = result.error.message || 'Payment failed. Please try again.';\r\n-\r\n-      if (data.reservation_id && paymentIntentId) {\r\n-        await fetch('https://searchyourtour.com/api/check_payment_status', {\r\n-          method: 'POST',\r\n-          headers: { 'Content-Type': 'application/json' },\r\n-          body: JSON.stringify({\r\n-            reservation_id: data.reservation_id,\r\n-            randomCode: data.randomCode,\r\n-            payment_intent_id: paymentIntentId\r\n-          })\r\n-        });\r\n+        if (result.error) {\r\n+          // Hata durumu\r\n+          console.error('Ödeme hatası:', result.error.message);\r\n+          errorMsg.value = result.error.message || 'Payment failed. Please try again.';\r\n+          if (data.reservation_id && paymentIntentId) {\r\n+            await fetch('https://searchyourtour.com/api/check_payment_status', {\r\n+              method: 'POST',\r\n+              headers: { 'Content-Type': 'application/json' },\r\n+              body: JSON.stringify({\r\n+                reservation_id: data.reservation_id,\r\n+                randomCode: data.randomCode,\r\n+                payment_intent_id: paymentIntentId\r\n+              })\r\n+            });\r\n+          }\r\n+        } else if (result.paymentIntent.status === 'succeeded') {\r\n+          // Başarılı ödeme\r\n+          success.value = true;\r\n+          if (data.reservation_id && paymentIntentId) {\r\n+            await fetch('https://searchyourtour.com/api/check_payment_status', {\r\n+              method: 'POST',\r\n+              headers: { 'Content-Type': 'application/json' },\r\n+              body: JSON.stringify({\r\n+                reservation_id: data.reservation_id,\r\n+                randomCode: data.randomCode,\r\n+                payment_intent_id: paymentIntentId\r\n+              })\r\n+            });\r\n+          }\r\n+        } else {\r\n+          // Beklemede veya başka bir durum (ör. 3D Secure)\r\n+          errorMsg.value = 'Ödeme işlemi tamamlanmadı, ek onay gerekebilir.';\r\n+          if (data.reservation_id && paymentIntentId) {\r\n+            await fetch('https://searchyourtour.com/api/check_payment_status', {\r\n+              method: 'POST',\r\n+              headers: { 'Content-Type': 'application/json' },\r\n+              body: JSON.stringify({\r\n+                reservation_id: data.reservation_id,\r\n+                randomCode: data.randomCode,\r\n+                payment_intent_id: paymentIntentId\r\n+              })\r\n+            });\r\n+          }\r\n+        }\r\n+      } catch (err) {\r\n+        console.error('Payment error:', err);\r\n+        errorMsg.value = err.message || 'Payment failed. Please try again.';\r\n+      } finally {\r\n+        loading.value = false;\r\n       }\r\n-\r\n-      } else if (result.paymentIntent.status === 'succeeded') {\r\n-        // ✅ Ödeme başarılı\r\n-        success.value = true;\r\n-        if (data.reservation_id && paymentIntentId) {\r\n-        await fetch('https://searchyourtour.com/api/check_payment_status', {\r\n-          method: 'POST',\r\n-          headers: { 'Content-Type': 'application/json' },\r\n-          body: JSON.stringify({\r\n-            reservation_id: data.reservation_id,\r\n-            randomCode: data.randomCode,\r\n-            payment_intent_id: paymentIntentId\r\n-          })\r\n-        });\r\n-      } else {\r\n-        // Ödeme beklemede ya da başka bir durum\r\n-        errorMsg.value = 'Ödeme tamamlanamadı.';\r\n-        if (data.reservation_id && paymentIntentId) {\r\n-        await fetch('https://searchyourtour.com/api/check_payment_status', {\r\n-          method: 'POST',\r\n-          headers: { 'Content-Type': 'application/json' },\r\n-          body: JSON.stringify({\r\n-            reservation_id: data.reservation_id,\r\n-            randomCode: data.randomCode,\r\n-            payment_intent_id: paymentIntentId\r\n-          })\r\n-        });\r\n-      }\r\n     }\r\n-\r\n+    \r\n   } catch (err) {\r\n     console.error('Payment error:', err);\r\n     errorMsg.value = err.message || 'Payment failed. Please try again.';\r\n   } finally {\r\n     loading.value = false;\r\n   }\r\n-};\r\n </script>\r\n \r\n <style scoped>\r\n /* CheckoutForm.vue'dan taşınan stiller */\r\n"
                },
                {
                    "date": 1753175209546,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,827 @@\n+<template>\r\n+  <div class=\"checkout-main-layout\">\r\n+    <!-- SOL: Kişisel Bilgiler ve Ödeme Formu (Stepper) -->\r\n+    <div class=\"checkout-left\">\r\n+      <h2>Enter your personal details</h2>\r\n+      <div class=\"secure-checkout\">\r\n+        <i class=\"fas fa-lock\"></i> Checkout is fast and secure\r\n+      </div>\r\n+      <form @submit.prevent=\"handleStep\" class=\"checkout-form\">\r\n+        <template v-if=\"currentStep === 1\">\r\n+          <div class=\"form-group\">\r\n+            <label>Full name <span class=\"required\">*</span></label>\r\n+            <input v-model=\"name\" type=\"text\" required placeholder=\"Full Name\" />\r\n+          </div>\r\n+          <div class=\"form-group\">\r\n+            <label>Email <span class=\"required\">*</span></label>\r\n+            <input v-model=\"email\" type=\"email\" required placeholder=\"you@email.com\" />\r\n+          </div>\r\n+          <div class=\"form-group\">\r\n+            <label>Country <span class=\"required\">*</span></label>\r\n+            <select v-model=\"country\" class=\"country-select-fullwidth\">\r\n+              <option v-for=\"c in countries\" :key=\"c.iso\" :value=\"c.name\">\r\n+                {{ c.name }}\r\n+              </option>\r\n+            </select>\r\n+          </div>\r\n+          <div class=\"form-group phone-row\">\r\n+            <label>Mobile phone number <span class=\"required\">*</span></label>\r\n+            <div class=\"phone-input-group\">\r\n+              <div class=\"country-code-display\">\r\n+                <img :src=\"`https://flagsapi.com/${selectedCountry.iso}/flat/24.png`\" :alt=\"selectedCountry.name\" class=\"flag-option\" />\r\n+                <span>{{ selectedCountry.code }}</span>\r\n+              </div>\r\n+              <input\r\n+                v-model=\"phone\"\r\n+                type=\"tel\"\r\n+                required\r\n+                class=\"phone-input\"\r\n+                :placeholder=\"selectedCountry.iso === 'TR' ? '5xx xxx xx xx' : selectedCountry.iso === 'US' ? 'xxx xxx xxxx' : selectedCountry.iso === 'DE' ? '1xx xxxxxxx' : 'xx xx xx xx'\"\r\n+              />\r\n+            </div>\r\n+          </div>\r\n+          <div class=\"form-group\">\r\n+            <label>Hotel Address <span class=\"required\">*</span></label>\r\n+            <input v-model=\"hotelAddress\" type=\"text\" required placeholder=\"Enter your hotel address\" />\r\n+          </div>\r\n+          <div class=\"form-group\">\r\n+            <label>Your Location (optional)</label>\r\n+            <div style=\"display: flex; gap: 8px;\">\r\n+              <input\r\n+                v-model=\"userLocation\"\r\n+                type=\"text\"\r\n+                placeholder=\"Click the button to add your current location\"\r\n+                readonly\r\n+                class=\"input\"\r\n+                style=\"flex: 1;\"\r\n+              />\r\n+              <button type=\"button\" @click=\"getLocation\" class=\"location-btn\" title=\"Use my location\">📍</button>\r\n+            </div>\r\n+            <div v-if=\"userLocation\">\r\n+              <a\r\n+                :href=\"getGoogleMapsLink(userLocation)\"\r\n+                target=\"_blank\"\r\n+                rel=\"noopener\"\r\n+                style=\"color: #0070eb; text-decoration: underline; cursor: pointer; font-size:0.97em;\"\r\n+              >\r\n+                View on Google Maps\r\n+              </a>\r\n+            </div>\r\n+          </div>\r\n+          <div class=\"form-note\">We’ll only contact you with essential updates or changes to your booking</div>\r\n+          <button class=\"pay-btn\" type=\"submit\">Go to payment</button>\r\n+        </template>\r\n+        <template v-else>\r\n+          <div class=\"form-group\">\r\n+            <label>Name on Card <span class=\"required\">*</span></label>\r\n+            <input v-model=\"cardName\" type=\"text\" required placeholder=\"Name on Card\" />\r\n+          </div>\r\n+          <div class=\"form-group\">\r\n+            <label>Card Details</label>\r\n+            <div id=\"card-element\" class=\"stripe-card-element\"></div>\r\n+          </div>\r\n+          <button class=\"pay-btn\" :disabled=\"loading\" type=\"submit\">\r\n+            <span v-if=\"loading\">Processing...</span>\r\n+            <span v-else>Pay Now</span>\r\n+          </button>\r\n+          <div v-if=\"success\" class=\"success-message\">\r\n+            <i class=\"fas fa-check-circle\"></i> \r\n+            <div>\r\n+              <strong>Payment Successful!</strong>\r\n+              <p>Your booking has been confirmed. You will receive a confirmation email shortly.</p>\r\n+            </div>\r\n+          </div>\r\n+          <div v-if=\"errorMsg\" class=\"error-message\">\r\n+            <i class=\"fas fa-exclamation-circle\"></i> {{ errorMsg }}\r\n+          </div>\r\n+        </template>\r\n+      </form>\r\n+    </div>\r\n+    <!-- SAĞ: Order Summary -->\r\n+    <div class=\"checkout-right\">\r\n+      <div class=\"order-summary-panel\" v-if=\"selectedTourStore.tour\">\r\n+        <div class=\"order-summary-title\">Order summary</div>\r\n+        <div class=\"order-summary-product\">\r\n+          <img class=\"order-summary-img\" :src=\"selectedTourStore.tour.image\" :alt=\"selectedTourStore.tour.title\" />\r\n+          <div class=\"order-summary-product-info\">\r\n+            <div class=\"product-title\">{{ selectedTourStore.tour.title }}</div>\r\n+            <div class=\"product-detail\">{{ selectedTourStore.tour.description }}</div>\r\n+            <div class=\"product-detail\" v-if=\"selectedTourStore.tour.bookingDate\">\r\n+              <i class=\"fas fa-calendar-alt\"></i> {{ selectedTourStore.tour.bookingDate }}\r\n+            </div>\r\n+            <div class=\"product-detail\"><i class=\"fas fa-user\"></i> {{ selectedTourStore.tour.participants }}</div>\r\n+            <div class=\"product-detail\" v-if=\"selectedTourStore.tour.email\"><i class=\"fas fa-envelope\"></i> {{ selectedTourStore.tour.email }}</div>\r\n+            <div class=\"product-detail\" v-if=\"selectedTourStore.tour.userLocation\">\r\n+              <i class=\"fas fa-map-marker-alt\"></i>\r\n+              <a\r\n+                :href=\"getGoogleMapsLink(selectedTourStore.tour.userLocation)\"\r\n+                target=\"_blank\"\r\n+                rel=\"noopener\"\r\n+                style=\"color: #0070eb; text-decoration: underline; cursor: pointer;\"\r\n+              >\r\n+                {{ selectedTourStore.tour.userLocation }}\r\n+              </a>\r\n+            </div>\r\n+          </div>\r\n+        </div>\r\n+        <div class=\"order-summary-total-row\">\r\n+          <span>Total</span>\r\n+          <span class=\"order-summary-total\">{{ selectedTourStore.tour.price }}</span>\r\n+        </div>\r\n+        <div class=\"order-summary-taxes\">All taxes and fees included</div>\r\n+      </div>\r\n+    </div>\r\n+  </div>\r\n+</template>\r\n+\r\n+<script setup>\r\n+import { ref, onMounted, watch, computed } from 'vue'\r\n+import { useRouter } from 'vue-router'\r\n+import { useSelectedTourStore } from '../stores/selectedTour'\r\n+let stripe, elements, card\r\n+import { loadStripe } from '@stripe/stripe-js';\r\n+\r\n+const router = useRouter()\r\n+const selectedTourStore = useSelectedTourStore()\r\n+\r\n+// Helper function to get language ID from language code\r\n+const getLanguageId = (langCode) => {\r\n+  const languageMap = {\r\n+    'tr': 2,    // Türkçe\r\n+    'de': 6,    // Deutsch\r\n+    'en': 1,    // English\r\n+    'ar': 3,    // العربية\r\n+    'es': 4,    // Español\r\n+    'fr': 5,    // Français\r\n+    'it': 7,    // Italiano\r\n+    'pt': 8,    // Português\r\n+    'zh': 10,   // 中文\r\n+    'ja': 11,   // 日本語\r\n+    'ru': 9     // Русский\r\n+  }\r\n+  return languageMap[langCode] || 1\r\n+}\r\n+\r\n+// Helper function to get currency ID from currency code\r\n+const getCurrencyId = (currencyCode) => {\r\n+  const currencyMap = {\r\n+    'EUR': 4,\r\n+    'USD': 5,\r\n+    'GBP': 6,\r\n+    'TRY': 7\r\n+  }\r\n+  return currencyMap[currencyCode] || 4\r\n+}\r\n+\r\n+// Tüm ülkeler ve kodları\r\n+const countries = [\r\n+  { name: 'Turkey', code: '+90', iso: 'TR' },\r\n+  { name: 'United States', code: '+1', iso: 'US' },\r\n+  { name: 'Germany', code: '+49', iso: 'DE' },\r\n+  { name: 'France', code: '+33', iso: 'FR' },\r\n+  { name: 'United Kingdom', code: '+44', iso: 'GB' },\r\n+  { name: 'Italy', code: '+39', iso: 'IT' },\r\n+  { name: 'Spain', code: '+34', iso: 'ES' },\r\n+  { name: 'Netherlands', code: '+31', iso: 'NL' },\r\n+  { name: 'Russia', code: '+7', iso: 'RU' },\r\n+  { name: 'Japan', code: '+81', iso: 'JP' },\r\n+  { name: 'China', code: '+86', iso: 'CN' },\r\n+  { name: 'India', code: '+91', iso: 'IN' },\r\n+  { name: 'Brazil', code: '+55', iso: 'BR' },\r\n+  { name: 'Canada', code: '+1', iso: 'CA' },\r\n+  { name: 'Australia', code: '+61', iso: 'AU' },\r\n+]\r\n+\r\n+const country = ref(countries[0].name)\r\n+const phone = ref('')\r\n+const selectedCountry = computed(() => countries.find(c => c.name === country.value) || countries[0])\r\n+\r\n+const name = ref('')\r\n+const email = ref(selectedTourStore.tour?.email || '')\r\n+\r\n+// Debug: Tour verilerini kontrol et\r\n+console.log('Selected Tour Store:', selectedTourStore.tour)\r\n+const cardName = ref('')\r\n+const loading = ref(false)\r\n+const success = ref(false)\r\n+const errorMsg = ref('')\r\n+const currentStep = ref(1)\r\n+const hotelAddress = ref(\"\");\r\n+const userLocation = ref(\"\");\r\n+\r\n+// Currency ve language bilgileri\r\n+const currentCurrency = ref(localStorage.getItem('selectedCurrency') || 'EUR')\r\n+const currencyId = computed(() => getCurrencyId(currentCurrency.value))\r\n+const languageId = computed(() => getLanguageId(localStorage.getItem('selectedLanguage') || 'en'))\r\n+\r\n+onMounted(() => {\r\n+  watch(currentStep, (step) => {\r\n+    if (step === 2) {\r\n+      setTimeout(() => {\r\n+        if (!window.Stripe) {\r\n+          const script = document.createElement('script')\r\n+          script.src = 'https://js.stripe.com/v3/'\r\n+          script.onload = setupStripe\r\n+          document.head.appendChild(script)\r\n+        } else {\r\n+          setupStripe()\r\n+        }\r\n+      }, 0)\r\n+    }\r\n+  }, { immediate: true })\r\n+})\r\n+\r\n+function setupStripe() {\r\n+  if (card) return\r\n+  // Stripe public key - production'da gerçek key kullanılacak\r\n+  stripe = window.Stripe('pk_test_51RmaYhQQzUg4uq68XfoINf2CrffnJsjaJ1OHLwLtNLHHKcJ2uPlQABvQi5gFefQ5CnyJtbBbLOK7yioo2pPhkzfS00bUBXgBV7') // TODO: Replace with your real public key\r\n+  elements = stripe.elements()\r\n+  card = elements.create('card', {\r\n+    style: {\r\n+      base: {\r\n+        fontSize: '16px',\r\n+        color: '#424770',\r\n+        '::placeholder': {\r\n+          color: '#aab7c4',\r\n+        },\r\n+      },\r\n+      invalid: {\r\n+        color: '#9e2146',\r\n+      },\r\n+    },\r\n+  })\r\n+  card.mount('#card-element')\r\n+}\r\n+\r\n+function getLocation() {\r\n+  if (!navigator.geolocation) {\r\n+    alert('Geolocation is not supported by your browser');\r\n+    return;\r\n+  }\r\n+  navigator.geolocation.getCurrentPosition(async (position) => {\r\n+    const { latitude, longitude } = position.coords;\r\n+    try {\r\n+      const response = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${latitude}&lon=${longitude}`);\r\n+      const data = await response.json();\r\n+      userLocation.value = data.display_name || `${latitude}, ${longitude}`;\r\n+    } catch (e) {\r\n+      userLocation.value = `${latitude}, ${longitude}`;\r\n+    }\r\n+  }, (error) => {\r\n+    alert('Could not get your location');\r\n+  });\r\n+}\r\n+\r\n+function getGoogleMapsLink(location) {\r\n+  // Eğer koordinat ise (ör: \"41.123, 29.456\")\r\n+  if (/^-?\\d+(\\.\\d+)?[, ]+\\s*-?\\d+(\\.\\d+)?$/.test(location)) {\r\n+    const coords = location.split(/[ ,]+/).map(Number);\r\n+    return `https://www.google.com/maps?q=${coords[0]},${coords[1]}`;\r\n+  }\r\n+  // Değilse adres olarak arat\r\n+  return `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(location)}`;\r\n+}\r\n+\r\n+// Price string'ini kuruş cinsinden integer'a çevir\r\n+function convertPriceToCents(priceString) {\r\n+  if (!priceString) return 0;\r\n+  \r\n+  // \"€10.00\" formatından sayısal değeri çıkar\r\n+  const numericValue = priceString.replace(/[^\\d.,]/g, '').replace(',', '.');\r\n+  const amount = parseFloat(numericValue);\r\n+  \r\n+  // Kuruş cinsinden döndür (1000 = 10.00 TL)\r\n+  // Tam hassasiyet için Math.round kullanmıyoruz\r\n+  return Math.round(amount * 100);\r\n+}\r\n+\r\n+const handleStep = async () => {\r\n+  if (currentStep.value === 1) {\r\n+    if (!name.value || !email.value || !country.value || !phone.value || !hotelAddress.value) {\r\n+      errorMsg.value = 'Please fill in all required fields.';\r\n+      return;\r\n+    }\r\n+    currentStep.value = 2;\r\n+    return;\r\n+  }\r\n+\r\n+  loading.value = true;\r\n+  errorMsg.value = '';\r\n+  success.value = false;\r\n+\r\n+  try {\r\n+    // Mevcut Stripe instance'ını kullan, yeni oluşturma\r\n+    if (!stripe) {\r\n+      throw new Error('Stripe not initialized. Please refresh the page.');\r\n+    }\r\n+\r\n+    // 1. Sadece rezervasyonu ve ödeme bilgilerini backend’e gönder\r\n+    const response = await fetch('https://searchyourtour.com/api/submit-booking', {\r\n+      method: 'POST',\r\n+      headers: {\r\n+        'Content-Type': 'application/json',\r\n+      },\r\n+      body: JSON.stringify({\r\n+        customer: {\r\n+          name: name.value,\r\n+          email: email.value,\r\n+          phone: selectedCountry.value.code + phone.value,\r\n+          country: country.value,\r\n+          hotel_address: hotelAddress.value,\r\n+          user_location: userLocation.value\r\n+        },\r\n+                  tour: {\r\n+            id: selectedTourStore.tour?.id || null,\r\n+            title: selectedTourStore.tour?.title || '',\r\n+            description: selectedTourStore.tour?.description || '',\r\n+            price: selectedTourStore.tour?.price || '',\r\n+            booking_date: selectedTourStore.tour?.bookingDate || new Date().toISOString().split('T')[0],\r\n+            tenant_id: 'ad5257a5-efdd-4314-9e5e-b56aabe321f1',\r\n+            currency_id: currencyId.value,\r\n+            language_id: languageId.value,\r\n+            buggy: 0,\r\n+            adult: selectedTourStore.tour?.adult || 1,\r\n+            child: selectedTourStore.tour?.child || 0,\r\n+            infant: selectedTourStore.tour?.infant || 0,\r\n+            roomNumber: 0,\r\n+            randomCode: Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15)\r\n+          },\r\n+          payment: {\r\n+            amount: convertPriceToCents(selectedTourStore.tour?.price || ''),\r\n+            currency: currentCurrency.value\r\n+          }\r\n+      })\r\n+    });\r\n+\r\n+    const data = await response.json();\r\n+\r\n+    // 2. client_secret geldiyse, Stripe ile ödemeyi başlat\r\n+    if (data?.client_secret) {\r\n+      const result = await stripe.confirmCardPayment(data.client_secret, {\r\n+        payment_method: {\r\n+                      card: card, // Stripe Elements component\r\n+          billing_details: {\r\n+            name: name.value,\r\n+            email: email.value,\r\n+            phone: selectedCountry.value.code + phone.value,\r\n+            address: {\r\n+              country: selectedCountry.value.iso,\r\n+              line1: hotelAddress.value\r\n+            }\r\n+          }\r\n+        },\r\n+        return_url: 'https://yourfrontend.com/payment-status'\r\n+      });\r\n+\r\n+      try {\r\n+        const paymentIntentId = result.paymentIntent?.id;\r\n+\r\n+        if (result.error) {\r\n+          // Hata durumu\r\n+          console.error('Ödeme hatası:', result.error.message);\r\n+          errorMsg.value = result.error.message || 'Payment failed. Please try again.';\r\n+          if (data.reservation_id && paymentIntentId) {\r\n+            await fetch('https://searchyourtour.com/api/check_payment_status', {\r\n+              method: 'POST',\r\n+              headers: { 'Content-Type': 'application/json' },\r\n+              body: JSON.stringify({\r\n+                reservation_id: data.reservation_id,\r\n+                randomCode: data.randomCode,\r\n+                payment_intent_id: paymentIntentId\r\n+              })\r\n+            });\r\n+          }\r\n+        } else if (result.paymentIntent.status === 'succeeded') {\r\n+          // Başarılı ödeme\r\n+          success.value = true;\r\n+          if (data.reservation_id && paymentIntentId) {\r\n+            await fetch('https://searchyourtour.com/api/check_payment_status', {\r\n+              method: 'POST',\r\n+              headers: { 'Content-Type': 'application/json' },\r\n+              body: JSON.stringify({\r\n+                reservation_id: data.reservation_id,\r\n+                randomCode: data.randomCode,\r\n+                payment_intent_id: paymentIntentId\r\n+              })\r\n+            });\r\n+          }\r\n+        } else {\r\n+          // Beklemede veya başka bir durum (ör. 3D Secure)\r\n+          errorMsg.value = 'Ödeme işlemi tamamlanmadı, ek onay gerekebilir.';\r\n+          if (data.reservation_id && paymentIntentId) {\r\n+            await fetch('https://searchyourtour.com/api/check_payment_status', {\r\n+              method: 'POST',\r\n+              headers: { 'Content-Type': 'application/json' },\r\n+              body: JSON.stringify({\r\n+                reservation_id: data.reservation_id,\r\n+                randomCode: data.randomCode,\r\n+                payment_intent_id: paymentIntentId\r\n+              })\r\n+            });\r\n+          }\r\n+        }\r\n+      } catch (err) {\r\n+        console.error('Payment error:', err);\r\n+        errorMsg.value = err.message || 'Payment failed. Please try again.';\r\n+      } finally {\r\n+        loading.value = false;\r\n+      }\r\n+    }\r\n+    \r\n+  } catch (err) {\r\n+    console.error('Payment error:', err);\r\n+    errorMsg.value = err.message || 'Payment failed. Please try again.';\r\n+  } finally {\r\n+    loading.value = false;\r\n+  }\r\n+};\r\n+</script>\r\n+\r\n+<style scoped>\r\n+/* CheckoutForm.vue'dan taşınan stiller */\r\n+.checkout-main-layout {\r\n+  display: flex;\r\n+  gap: 64px;\r\n+  align-items: stretch;\r\n+  justify-content: center;\r\n+  background: #f6f8fa;\r\n+  padding: 48px 0;\r\n+  min-height: 100vh;\r\n+}\r\n+.checkout-left, .checkout-right {\r\n+  flex: 1 1 0;\r\n+  min-width: 340px;\r\n+  max-width: 600px;\r\n+  background: #fff;\r\n+  border-radius: 26px;\r\n+  box-shadow: 0 8px 32px rgba(44,62,80,0.10);\r\n+  padding: 36px 44px 24px 44px;\r\n+  font-family: 'Inter', 'Segoe UI', Arial, sans-serif;\r\n+  display: flex;\r\n+  flex-direction: column;\r\n+  justify-content: flex-start;\r\n+  height: 100%;\r\n+}\r\n+.checkout-left h2 {\r\n+  color: #1a2a3a;\r\n+  font-size: 2.3rem;\r\n+  margin-bottom: 18px;\r\n+  font-weight: 900;\r\n+  text-align: left;\r\n+  letter-spacing: -1px;\r\n+}\r\n+.secure-checkout {\r\n+  color: #0a8a4a;\r\n+  font-size: 1.08rem;\r\n+  margin-bottom: 18px;\r\n+  display: flex;\r\n+  align-items: center;\r\n+  gap: 8px;\r\n+  font-weight: 600;\r\n+}\r\n+.checkout-form {\r\n+  display: flex;\r\n+  flex-direction: column;\r\n+  gap: 18px;\r\n+}\r\n+.form-group {\r\n+  display: flex;\r\n+  flex-direction: column;\r\n+  gap: 4px;\r\n+}\r\n+input, select {\r\n+  padding: 12px 16px;\r\n+  border-radius: 10px;\r\n+  border: 2px solid #e0e6ed;\r\n+  font-size: 1.08rem;\r\n+  background: #f7fafd;\r\n+  outline: none;\r\n+  transition: border 0.2s;\r\n+}\r\n+input:focus, select:focus {\r\n+  border-color: #0070eb;\r\n+}\r\n+.stripe-card-element {\r\n+  padding: 12px 16px;\r\n+  border-radius: 10px;\r\n+  border: 2px solid #e0e6ed;\r\n+  background: #f7fafd;\r\n+  margin-top: 4px;\r\n+}\r\n+.form-note {\r\n+  font-size: 0.97rem;\r\n+  color: #888;\r\n+  margin-bottom: 8px;\r\n+}\r\n+.required { color: #d7263d; }\r\n+.pay-btn {\r\n+  width: 100%;\r\n+  background: linear-gradient(90deg, #FC6421 60%, #ff3401 100%);\r\n+  color: #fff;\r\n+  font-size: 1.15rem;\r\n+  font-weight: 800;\r\n+  border: none;\r\n+  border-radius: 32px;\r\n+  padding: 1.05rem 0;\r\n+  margin-top: 8px;\r\n+  cursor: pointer;\r\n+  transition: background 0.2s, box-shadow 0.2s;\r\n+  box-shadow: 0 2px 12px rgba(0,112,235,0.08);\r\n+  letter-spacing: 0.5px;\r\n+}\r\n+.pay-btn:hover {\r\n+  background: linear-gradient(90deg, #ff0000 60%, #ff0000 100%);\r\n+  box-shadow: 0 4px 24px rgba(0,112,235,0.13);\r\n+}\r\n+.pay-btn:disabled {\r\n+  background: #aaa;\r\n+  cursor: not-allowed;\r\n+}\r\n+.success-message {\r\n+  color: #27ae60;\r\n+  text-align: center;\r\n+  margin-top: 16px;\r\n+  font-size: 1.1rem;\r\n+  display: flex;\r\n+  align-items: center;\r\n+  justify-content: center;\r\n+  gap: 12px;\r\n+  padding: 16px;\r\n+  background: #f8fff9;\r\n+  border: 1px solid #27ae60;\r\n+  border-radius: 8px;\r\n+}\r\n+\r\n+.success-message i {\r\n+  font-size: 1.5rem;\r\n+  flex-shrink: 0;\r\n+}\r\n+\r\n+.success-message div {\r\n+  text-align: left;\r\n+}\r\n+\r\n+.success-message strong {\r\n+  display: block;\r\n+  margin-bottom: 4px;\r\n+}\r\n+\r\n+.success-message p {\r\n+  margin: 0;\r\n+  font-size: 0.95rem;\r\n+  color: #666;\r\n+}\r\n+.error-message {\r\n+  color: #d7263d;\r\n+  text-align: center;\r\n+  margin-top: 12px;\r\n+  font-size: 1rem;\r\n+}\r\n+\r\n+.order-summary-panel {\r\n+  display: flex;\r\n+  flex-direction: column;\r\n+  gap: 18px;\r\n+  height: 100%;\r\n+}\r\n+.order-summary-product {\r\n+  display: flex;\r\n+  gap: 22px;\r\n+  margin-bottom: 10px;\r\n+  align-items: flex-start;\r\n+}\r\n+.order-summary-img {\r\n+  width: 88px;\r\n+  height: 88px;\r\n+  border-radius: 14px;\r\n+  object-fit: cover;\r\n+  box-shadow: 0 2px 8px rgba(44,62,80,0.08);\r\n+}\r\n+.order-summary-product-info {\r\n+  flex: 1;\r\n+  display: flex;\r\n+  flex-direction: column;\r\n+  gap: 2px;\r\n+}\r\n+.product-title {\r\n+  font-weight: 900;\r\n+  font-size: 1.18rem;\r\n+  margin-bottom: 2px;\r\n+  color: #1a2a3a;\r\n+}\r\n+.product-detail {\r\n+  font-size: 1.04rem;\r\n+  color: #444;\r\n+  margin-bottom: 2px;\r\n+  display: flex;\r\n+  align-items: center;\r\n+  gap: 6px;\r\n+}\r\n+.order-summary-title {\r\n+  font-size: 1.45rem;\r\n+  font-weight: 900;\r\n+  margin-bottom: 18px;\r\n+  color: #1a2a3a;\r\n+  letter-spacing: -0.5px;\r\n+}\r\n+.order-summary-total-row {\r\n+  display: flex;\r\n+  justify-content: space-between;\r\n+  font-size: 1.22rem;\r\n+  font-weight: 900;\r\n+  margin-top: 10px;\r\n+  letter-spacing: 0.2px;\r\n+}\r\n+.order-summary-total {\r\n+  color: #FC6421;\r\n+  font-size: 1.32rem;\r\n+  font-weight: 900;\r\n+}\r\n+.order-summary-taxes {\r\n+  color: #0a8a4a;\r\n+  font-size: 0.97rem;\r\n+  margin-top: 2px;\r\n+  text-align: right;\r\n+}\r\n+.phone-row {\r\n+  margin-bottom: 0;\r\n+}\r\n+.phone-input-group {\r\n+  display: flex;\r\n+  gap: 10px;\r\n+  align-items: stretch;\r\n+}\r\n+.country-code-display {\r\n+  display: flex;\r\n+  align-items: center;\r\n+  gap: 6px;\r\n+  background: #f7fafd;\r\n+  border: 2px solid #e0e6ed;\r\n+  border-radius: 10px;\r\n+  padding: 12px 16px;\r\n+  font-size: 1.08rem;\r\n+  min-width: 90px;\r\n+  font-weight: 600;\r\n+  height: 48px;\r\n+  box-sizing: border-box;\r\n+}\r\n+.flag-option {\r\n+  width: 22px;\r\n+  height: 16px;\r\n+  margin-right: 7px;\r\n+  vertical-align: middle;\r\n+  border-radius: 3px;\r\n+  box-shadow: 0 1px 3px rgba(0,0,0,0.07);\r\n+}\r\n+.country-select-row {\r\n+  margin-bottom: 0;\r\n+}\r\n+.country-select-flex {\r\n+  display: flex;\r\n+  align-items: center;\r\n+  gap: 8px;\r\n+}\r\n+.country-select-fullwidth {\r\n+  width: 100%;\r\n+  min-width: 0;\r\n+  box-sizing: border-box;\r\n+}\r\n+.phone-input {\r\n+  flex: 1;\r\n+  padding: 12px 16px;\r\n+  border-radius: 10px;\r\n+  border: 2px solid #e0e6ed;\r\n+  font-size: 1.08rem;\r\n+  background: #f7fafd;\r\n+  outline: none;\r\n+  transition: border 0.2s;\r\n+  height: 48px;\r\n+  box-sizing: border-box;\r\n+}\r\n+.phone-input:focus {\r\n+  border-color: #0070eb;\r\n+}\r\n+.location-btn {\r\n+  background: #f7f7f7;\r\n+  border: 1px solid #ddd;\r\n+  border-radius: 6px;\r\n+  font-size: 1.08rem;\r\n+  padding: 0 16px;\r\n+  height: 48px;\r\n+  display: flex;\r\n+  align-items: center;\r\n+  justify-content: center;\r\n+  cursor: pointer;\r\n+  transition: background 0.2s;\r\n+}\r\n+.location-btn:hover {\r\n+  background: #eee;\r\n+}\r\n+@media (max-width: 900px) {\r\n+  .checkout-main-layout {\r\n+    flex-direction: column;\r\n+    gap: 0;\r\n+    padding: 0.5rem 0 1rem 0;\r\n+    min-height: 100vh;\r\n+    width: 100vw;\r\n+    background: #fff;\r\n+    box-sizing: border-box;\r\n+  }\r\n+  .checkout-left, .checkout-right, .order-summary-panel {\r\n+    width: 100%;\r\n+    max-width: 100vw;\r\n+    border-radius: 10px;\r\n+    box-shadow: 0 2px 8px rgba(44,62,80,0.06);\r\n+    padding: 0.7rem 0.5rem;\r\n+    margin: 0 0 1rem 0;\r\n+    background: #fff;\r\n+    box-sizing: border-box;\r\n+    min-width: 0;\r\n+  }\r\n+}\r\n+@media (max-width: 600px) {\r\n+  body, html {\r\n+    background: #fff !important;\r\n+    margin: 0 !important;\r\n+    padding: 0 !important;\r\n+    overflow-x: hidden !important;\r\n+  }\r\n+  .checkout-main-layout {\r\n+    flex-direction: column !important;\r\n+    align-items: stretch !important;\r\n+    gap: 0 !important;\r\n+    padding: 0 12px !important;\r\n+    min-height: 100vh !important;\r\n+    width: 100vw !important;\r\n+    max-width: 100vw !important;\r\n+    background: #fff !important;\r\n+    box-sizing: border-box !important;\r\n+  }\r\n+  .checkout-left,\r\n+  .checkout-right,\r\n+  .order-summary-panel {\r\n+    width: 100% !important;\r\n+    max-width: 100vw !important;\r\n+    min-width: 0 !important;\r\n+    border-radius: 10px !important;\r\n+    box-shadow: 0 2px 8px rgba(44,62,80,0.06) !important;\r\n+    padding: 0.7rem 0.5rem !important;\r\n+    margin: 0 auto 1rem auto !important;\r\n+    background: #fff !important;\r\n+    box-sizing: border-box !important;\r\n+  }\r\n+  .checkout-left h2 {\r\n+    font-size: 1.4rem !important;\r\n+    margin-bottom: 14px !important;\r\n+  }\r\n+  .form-group,\r\n+  .country-select-fullwidth,\r\n+  .phone-input,\r\n+  .country-code-display,\r\n+  .pay-btn {\r\n+    max-width: 100vw !important;\r\n+    min-width: 0 !important;\r\n+    box-sizing: border-box !important;\r\n+    font-size: 1rem !important;\r\n+    padding-left: 0.2rem !important;\r\n+    padding-right: 0.2rem !important;\r\n+  }\r\n+  .order-summary-img {\r\n+    width: 44px !important;\r\n+    height: 44px !important;\r\n+    min-width: 32px !important;\r\n+    max-width: 44px !important;\r\n+  }\r\n+  .product-title,\r\n+  .order-summary-title {\r\n+    font-size: 1.08rem !important;\r\n+    word-break: break-word !important;\r\n+  }\r\n+  .pay-btn {\r\n+    font-size: 1.08rem !important;\r\n+    padding: 0.7rem 0 !important;\r\n+    margin-top: 0.5rem !important;\r\n+    border-radius: 12px !important;\r\n+  }\r\n+  .form-note {\r\n+    font-size: 0.9rem !important;\r\n+  }\r\n+  /* Scroll edilebilirlik için: */\r\n+  .checkout-modal,\r\n+  .checkout-content {\r\n+    width: 100vw !important;\r\n+    max-width: 100vw !important;\r\n+    height: 100vh !important;\r\n+    max-height: 100vh !important;\r\n+    overflow-y: auto !important;\r\n+    background: #fff !important;\r\n+    border-radius: 0 !important;\r\n+    box-shadow: none !important;\r\n+    padding: 0 !important;\r\n+    margin: 0 !important;\r\n+    display: flex !important;\r\n+    flex-direction: column !important;\r\n+    align-items: stretch !important;\r\n+  }\r\n+}\r\n+</style>\r\n"
                },
                {
                    "date": 1753177908071,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -373,50 +373,50 @@\n         return_url: 'https://yourfrontend.com/payment-status'\r\n       });\r\n \r\n       try {\r\n-        const paymentIntentId = result.paymentIntent?.id;\r\n+        const payment_intent_id = result.paymentIntent?.id;\r\n \r\n         if (result.error) {\r\n           // Hata durumu\r\n           console.error('Ödeme hatası:', result.error.message);\r\n           errorMsg.value = result.error.message || 'Payment failed. Please try again.';\r\n-          if (data.reservation_id && paymentIntentId) {\r\n+          if (data.reservation_id && payment_intent_id) {\r\n             await fetch('https://searchyourtour.com/api/check_payment_status', {\r\n               method: 'POST',\r\n               headers: { 'Content-Type': 'application/json' },\r\n               body: JSON.stringify({\r\n                 reservation_id: data.reservation_id,\r\n                 randomCode: data.randomCode,\r\n-                payment_intent_id: paymentIntentId\r\n+                payment_intent_id: payment_intent_id\r\n               })\r\n             });\r\n           }\r\n         } else if (result.paymentIntent.status === 'succeeded') {\r\n           // Başarılı ödeme\r\n           success.value = true;\r\n-          if (data.reservation_id && paymentIntentId) {\r\n+          if (data.reservation_id && payment_intent_id) {\r\n             await fetch('https://searchyourtour.com/api/check_payment_status', {\r\n               method: 'POST',\r\n               headers: { 'Content-Type': 'application/json' },\r\n               body: JSON.stringify({\r\n                 reservation_id: data.reservation_id,\r\n                 randomCode: data.randomCode,\r\n-                payment_intent_id: paymentIntentId\r\n+                payment_intent_id: payment_intent_id\r\n               })\r\n             });\r\n           }\r\n         } else {\r\n           // Beklemede veya başka bir durum (ör. 3D Secure)\r\n           errorMsg.value = 'Ödeme işlemi tamamlanmadı, ek onay gerekebilir.';\r\n-          if (data.reservation_id && paymentIntentId) {\r\n+          if (data.reservation_id && payment_intent_id) {\r\n             await fetch('https://searchyourtour.com/api/check_payment_status', {\r\n               method: 'POST',\r\n               headers: { 'Content-Type': 'application/json' },\r\n               body: JSON.stringify({\r\n                 reservation_id: data.reservation_id,\r\n                 randomCode: data.randomCode,\r\n-                payment_intent_id: paymentIntentId\r\n+                payment_intent_id: payment_intent_id\r\n               })\r\n             });\r\n           }\r\n         }\r\n@@ -824,830 +824,4 @@\n     align-items: stretch !important;\r\n   }\r\n }\r\n </style>\r\n-<template>\r\n-  <div class=\"checkout-main-layout\">\r\n-    <!-- SOL: Kişisel Bilgiler ve Ödeme Formu (Stepper) -->\r\n-    <div class=\"checkout-left\">\r\n-      <h2>Enter your personal details</h2>\r\n-      <div class=\"secure-checkout\">\r\n-        <i class=\"fas fa-lock\"></i> Checkout is fast and secure\r\n-      </div>\r\n-      <form @submit.prevent=\"handleStep\" class=\"checkout-form\">\r\n-        <template v-if=\"currentStep === 1\">\r\n-          <div class=\"form-group\">\r\n-            <label>Full name <span class=\"required\">*</span></label>\r\n-            <input v-model=\"name\" type=\"text\" required placeholder=\"Full Name\" />\r\n-          </div>\r\n-          <div class=\"form-group\">\r\n-            <label>Email <span class=\"required\">*</span></label>\r\n-            <input v-model=\"email\" type=\"email\" required placeholder=\"you@email.com\" />\r\n-          </div>\r\n-          <div class=\"form-group\">\r\n-            <label>Country <span class=\"required\">*</span></label>\r\n-            <select v-model=\"country\" class=\"country-select-fullwidth\">\r\n-              <option v-for=\"c in countries\" :key=\"c.iso\" :value=\"c.name\">\r\n-                {{ c.name }}\r\n-              </option>\r\n-            </select>\r\n-          </div>\r\n-          <div class=\"form-group phone-row\">\r\n-            <label>Mobile phone number <span class=\"required\">*</span></label>\r\n-            <div class=\"phone-input-group\">\r\n-              <div class=\"country-code-display\">\r\n-                <img :src=\"`https://flagsapi.com/${selectedCountry.iso}/flat/24.png`\" :alt=\"selectedCountry.name\" class=\"flag-option\" />\r\n-                <span>{{ selectedCountry.code }}</span>\r\n-              </div>\r\n-              <input\r\n-                v-model=\"phone\"\r\n-                type=\"tel\"\r\n-                required\r\n-                class=\"phone-input\"\r\n-                :placeholder=\"selectedCountry.iso === 'TR' ? '5xx xxx xx xx' : selectedCountry.iso === 'US' ? 'xxx xxx xxxx' : selectedCountry.iso === 'DE' ? '1xx xxxxxxx' : 'xx xx xx xx'\"\r\n-              />\r\n-            </div>\r\n-          </div>\r\n-          <div class=\"form-group\">\r\n-            <label>Hotel Address <span class=\"required\">*</span></label>\r\n-            <input v-model=\"hotelAddress\" type=\"text\" required placeholder=\"Enter your hotel address\" />\r\n-          </div>\r\n-          <div class=\"form-group\">\r\n-            <label>Your Location (optional)</label>\r\n-            <div style=\"display: flex; gap: 8px;\">\r\n-              <input\r\n-                v-model=\"userLocation\"\r\n-                type=\"text\"\r\n-                placeholder=\"Click the button to add your current location\"\r\n-                readonly\r\n-                class=\"input\"\r\n-                style=\"flex: 1;\"\r\n-              />\r\n-              <button type=\"button\" @click=\"getLocation\" class=\"location-btn\" title=\"Use my location\">📍</button>\r\n-            </div>\r\n-            <div v-if=\"userLocation\">\r\n-              <a\r\n-                :href=\"getGoogleMapsLink(userLocation)\"\r\n-                target=\"_blank\"\r\n-                rel=\"noopener\"\r\n-                style=\"color: #0070eb; text-decoration: underline; cursor: pointer; font-size:0.97em;\"\r\n-              >\r\n-                View on Google Maps\r\n-              </a>\r\n-            </div>\r\n-          </div>\r\n-          <div class=\"form-note\">We’ll only contact you with essential updates or changes to your booking</div>\r\n-          <button class=\"pay-btn\" type=\"submit\">Go to payment</button>\r\n-        </template>\r\n-        <template v-else>\r\n-          <div class=\"form-group\">\r\n-            <label>Name on Card <span class=\"required\">*</span></label>\r\n-            <input v-model=\"cardName\" type=\"text\" required placeholder=\"Name on Card\" />\r\n-          </div>\r\n-          <div class=\"form-group\">\r\n-            <label>Card Details</label>\r\n-            <div id=\"card-element\" class=\"stripe-card-element\"></div>\r\n-          </div>\r\n-          <button class=\"pay-btn\" :disabled=\"loading\" type=\"submit\">\r\n-            <span v-if=\"loading\">Processing...</span>\r\n-            <span v-else>Pay Now</span>\r\n-          </button>\r\n-          <div v-if=\"success\" class=\"success-message\">\r\n-            <i class=\"fas fa-check-circle\"></i> \r\n-            <div>\r\n-              <strong>Payment Successful!</strong>\r\n-              <p>Your booking has been confirmed. You will receive a confirmation email shortly.</p>\r\n-            </div>\r\n-          </div>\r\n-          <div v-if=\"errorMsg\" class=\"error-message\">\r\n-            <i class=\"fas fa-exclamation-circle\"></i> {{ errorMsg }}\r\n-          </div>\r\n-        </template>\r\n-      </form>\r\n-    </div>\r\n-    <!-- SAĞ: Order Summary -->\r\n-    <div class=\"checkout-right\">\r\n-      <div class=\"order-summary-panel\" v-if=\"selectedTourStore.tour\">\r\n-        <div class=\"order-summary-title\">Order summary</div>\r\n-        <div class=\"order-summary-product\">\r\n-          <img class=\"order-summary-img\" :src=\"selectedTourStore.tour.image\" :alt=\"selectedTourStore.tour.title\" />\r\n-          <div class=\"order-summary-product-info\">\r\n-            <div class=\"product-title\">{{ selectedTourStore.tour.title }}</div>\r\n-            <div class=\"product-detail\">{{ selectedTourStore.tour.description }}</div>\r\n-            <div class=\"product-detail\" v-if=\"selectedTourStore.tour.bookingDate\">\r\n-              <i class=\"fas fa-calendar-alt\"></i> {{ selectedTourStore.tour.bookingDate }}\r\n-            </div>\r\n-            <div class=\"product-detail\"><i class=\"fas fa-user\"></i> {{ selectedTourStore.tour.participants }}</div>\r\n-            <div class=\"product-detail\" v-if=\"selectedTourStore.tour.email\"><i class=\"fas fa-envelope\"></i> {{ selectedTourStore.tour.email }}</div>\r\n-            <div class=\"product-detail\" v-if=\"selectedTourStore.tour.userLocation\">\r\n-              <i class=\"fas fa-map-marker-alt\"></i>\r\n-              <a\r\n-                :href=\"getGoogleMapsLink(selectedTourStore.tour.userLocation)\"\r\n-                target=\"_blank\"\r\n-                rel=\"noopener\"\r\n-                style=\"color: #0070eb; text-decoration: underline; cursor: pointer;\"\r\n-              >\r\n-                {{ selectedTourStore.tour.userLocation }}\r\n-              </a>\r\n-            </div>\r\n-          </div>\r\n-        </div>\r\n-        <div class=\"order-summary-total-row\">\r\n-          <span>Total</span>\r\n-          <span class=\"order-summary-total\">{{ selectedTourStore.tour.price }}</span>\r\n-        </div>\r\n-        <div class=\"order-summary-taxes\">All taxes and fees included</div>\r\n-      </div>\r\n-    </div>\r\n-  </div>\r\n-</template>\r\n-\r\n-<script setup>\r\n-import { ref, onMounted, watch, computed } from 'vue'\r\n-import { useRouter } from 'vue-router'\r\n-import { useSelectedTourStore } from '../stores/selectedTour'\r\n-let stripe, elements, card\r\n-import { loadStripe } from '@stripe/stripe-js';\r\n-\r\n-const router = useRouter()\r\n-const selectedTourStore = useSelectedTourStore()\r\n-\r\n-// Helper function to get language ID from language code\r\n-const getLanguageId = (langCode) => {\r\n-  const languageMap = {\r\n-    'tr': 2,    // Türkçe\r\n-    'de': 6,    // Deutsch\r\n-    'en': 1,    // English\r\n-    'ar': 3,    // العربية\r\n-    'es': 4,    // Español\r\n-    'fr': 5,    // Français\r\n-    'it': 7,    // Italiano\r\n-    'pt': 8,    // Português\r\n-    'zh': 10,   // 中文\r\n-    'ja': 11,   // 日本語\r\n-    'ru': 9     // Русский\r\n-  }\r\n-  return languageMap[langCode] || 1\r\n-}\r\n-\r\n-// Helper function to get currency ID from currency code\r\n-const getCurrencyId = (currencyCode) => {\r\n-  const currencyMap = {\r\n-    'EUR': 4,\r\n-    'USD': 5,\r\n-    'GBP': 6,\r\n-    'TRY': 7\r\n-  }\r\n-  return currencyMap[currencyCode] || 4\r\n-}\r\n-\r\n-// Tüm ülkeler ve kodları\r\n-const countries = [\r\n-  { name: 'Turkey', code: '+90', iso: 'TR' },\r\n-  { name: 'United States', code: '+1', iso: 'US' },\r\n-  { name: 'Germany', code: '+49', iso: 'DE' },\r\n-  { name: 'France', code: '+33', iso: 'FR' },\r\n-  { name: 'United Kingdom', code: '+44', iso: 'GB' },\r\n-  { name: 'Italy', code: '+39', iso: 'IT' },\r\n-  { name: 'Spain', code: '+34', iso: 'ES' },\r\n-  { name: 'Netherlands', code: '+31', iso: 'NL' },\r\n-  { name: 'Russia', code: '+7', iso: 'RU' },\r\n-  { name: 'Japan', code: '+81', iso: 'JP' },\r\n-  { name: 'China', code: '+86', iso: 'CN' },\r\n-  { name: 'India', code: '+91', iso: 'IN' },\r\n-  { name: 'Brazil', code: '+55', iso: 'BR' },\r\n-  { name: 'Canada', code: '+1', iso: 'CA' },\r\n-  { name: 'Australia', code: '+61', iso: 'AU' },\r\n-]\r\n-\r\n-const country = ref(countries[0].name)\r\n-const phone = ref('')\r\n-const selectedCountry = computed(() => countries.find(c => c.name === country.value) || countries[0])\r\n-\r\n-const name = ref('')\r\n-const email = ref(selectedTourStore.tour?.email || '')\r\n-\r\n-// Debug: Tour verilerini kontrol et\r\n-console.log('Selected Tour Store:', selectedTourStore.tour)\r\n-const cardName = ref('')\r\n-const loading = ref(false)\r\n-const success = ref(false)\r\n-const errorMsg = ref('')\r\n-const currentStep = ref(1)\r\n-const hotelAddress = ref(\"\");\r\n-const userLocation = ref(\"\");\r\n-\r\n-// Currency ve language bilgileri\r\n-const currentCurrency = ref(localStorage.getItem('selectedCurrency') || 'EUR')\r\n-const currencyId = computed(() => getCurrencyId(currentCurrency.value))\r\n-const languageId = computed(() => getLanguageId(localStorage.getItem('selectedLanguage') || 'en'))\r\n-\r\n-onMounted(() => {\r\n-  watch(currentStep, (step) => {\r\n-    if (step === 2) {\r\n-      setTimeout(() => {\r\n-        if (!window.Stripe) {\r\n-          const script = document.createElement('script')\r\n-          script.src = 'https://js.stripe.com/v3/'\r\n-          script.onload = setupStripe\r\n-          document.head.appendChild(script)\r\n-        } else {\r\n-          setupStripe()\r\n-        }\r\n-      }, 0)\r\n-    }\r\n-  }, { immediate: true })\r\n-})\r\n-\r\n-function setupStripe() {\r\n-  if (card) return\r\n-  // Stripe public key - production'da gerçek key kullanılacak\r\n-  stripe = window.Stripe('pk_test_51RmaYhQQzUg4uq68XfoINf2CrffnJsjaJ1OHLwLtNLHHKcJ2uPlQABvQi5gFefQ5CnyJtbBbLOK7yioo2pPhkzfS00bUBXgBV7') // TODO: Replace with your real public key\r\n-  elements = stripe.elements()\r\n-  card = elements.create('card', {\r\n-    style: {\r\n-      base: {\r\n-        fontSize: '16px',\r\n-        color: '#424770',\r\n-        '::placeholder': {\r\n-          color: '#aab7c4',\r\n-        },\r\n-      },\r\n-      invalid: {\r\n-        color: '#9e2146',\r\n-      },\r\n-    },\r\n-  })\r\n-  card.mount('#card-element')\r\n-}\r\n-\r\n-function getLocation() {\r\n-  if (!navigator.geolocation) {\r\n-    alert('Geolocation is not supported by your browser');\r\n-    return;\r\n-  }\r\n-  navigator.geolocation.getCurrentPosition(async (position) => {\r\n-    const { latitude, longitude } = position.coords;\r\n-    try {\r\n-      const response = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${latitude}&lon=${longitude}`);\r\n-      const data = await response.json();\r\n-      userLocation.value = data.display_name || `${latitude}, ${longitude}`;\r\n-    } catch (e) {\r\n-      userLocation.value = `${latitude}, ${longitude}`;\r\n-    }\r\n-  }, (error) => {\r\n-    alert('Could not get your location');\r\n-  });\r\n-}\r\n-\r\n-function getGoogleMapsLink(location) {\r\n-  // Eğer koordinat ise (ör: \"41.123, 29.456\")\r\n-  if (/^-?\\d+(\\.\\d+)?[, ]+\\s*-?\\d+(\\.\\d+)?$/.test(location)) {\r\n-    const coords = location.split(/[ ,]+/).map(Number);\r\n-    return `https://www.google.com/maps?q=${coords[0]},${coords[1]}`;\r\n-  }\r\n-  // Değilse adres olarak arat\r\n-  return `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(location)}`;\r\n-}\r\n-\r\n-// Price string'ini kuruş cinsinden integer'a çevir\r\n-function convertPriceToCents(priceString) {\r\n-  if (!priceString) return 0;\r\n-  \r\n-  // \"€10.00\" formatından sayısal değeri çıkar\r\n-  const numericValue = priceString.replace(/[^\\d.,]/g, '').replace(',', '.');\r\n-  const amount = parseFloat(numericValue);\r\n-  \r\n-  // Kuruş cinsinden döndür (1000 = 10.00 TL)\r\n-  // Tam hassasiyet için Math.round kullanmıyoruz\r\n-  return Math.round(amount * 100);\r\n-}\r\n-\r\n-const handleStep = async () => {\r\n-  if (currentStep.value === 1) {\r\n-    if (!name.value || !email.value || !country.value || !phone.value || !hotelAddress.value) {\r\n-      errorMsg.value = 'Please fill in all required fields.';\r\n-      return;\r\n-    }\r\n-    currentStep.value = 2;\r\n-    return;\r\n-  }\r\n-\r\n-  loading.value = true;\r\n-  errorMsg.value = '';\r\n-  success.value = false;\r\n-\r\n-  try {\r\n-    // Mevcut Stripe instance'ını kullan, yeni oluşturma\r\n-    if (!stripe) {\r\n-      throw new Error('Stripe not initialized. Please refresh the page.');\r\n-    }\r\n-\r\n-    // 1. Sadece rezervasyonu ve ödeme bilgilerini backend’e gönder\r\n-    const response = await fetch('https://searchyourtour.com/api/submit-booking', {\r\n-      method: 'POST',\r\n-      headers: {\r\n-        'Content-Type': 'application/json',\r\n-      },\r\n-      body: JSON.stringify({\r\n-        customer: {\r\n-          name: name.value,\r\n-          email: email.value,\r\n-          phone: selectedCountry.value.code + phone.value,\r\n-          country: country.value,\r\n-          hotel_address: hotelAddress.value,\r\n-          user_location: userLocation.value\r\n-        },\r\n-                  tour: {\r\n-            id: selectedTourStore.tour?.id || null,\r\n-            title: selectedTourStore.tour?.title || '',\r\n-            description: selectedTourStore.tour?.description || '',\r\n-            price: selectedTourStore.tour?.price || '',\r\n-            booking_date: selectedTourStore.tour?.bookingDate || new Date().toISOString().split('T')[0],\r\n-            tenant_id: 'ad5257a5-efdd-4314-9e5e-b56aabe321f1',\r\n-            currency_id: currencyId.value,\r\n-            language_id: languageId.value,\r\n-            buggy: 0,\r\n-            adult: selectedTourStore.tour?.adult || 1,\r\n-            child: selectedTourStore.tour?.child || 0,\r\n-            infant: selectedTourStore.tour?.infant || 0,\r\n-            roomNumber: 0,\r\n-            randomCode: Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15)\r\n-          },\r\n-          payment: {\r\n-            amount: convertPriceToCents(selectedTourStore.tour?.price || ''),\r\n-            currency: currentCurrency.value\r\n-          }\r\n-      })\r\n-    });\r\n-\r\n-    const data = await response.json();\r\n-\r\n-    // 2. client_secret geldiyse, Stripe ile ödemeyi başlat\r\n-    if (data?.client_secret) {\r\n-      const result = await stripe.confirmCardPayment(data.client_secret, {\r\n-        payment_method: {\r\n-                      card: card, // Stripe Elements component\r\n-          billing_details: {\r\n-            name: name.value,\r\n-            email: email.value,\r\n-            phone: selectedCountry.value.code + phone.value,\r\n-            address: {\r\n-              country: selectedCountry.value.iso,\r\n-              line1: hotelAddress.value\r\n-            }\r\n-          }\r\n-        },\r\n-        return_url: 'https://yourfrontend.com/payment-status'\r\n-      });\r\n-\r\n-      try {\r\n-        const paymentIntentId = result.paymentIntent?.id;\r\n-\r\n-        if (result.error) {\r\n-          // Hata durumu\r\n-          console.error('Ödeme hatası:', result.error.message);\r\n-          errorMsg.value = result.error.message || 'Payment failed. Please try again.';\r\n-          if (data.reservation_id && paymentIntentId) {\r\n-            await fetch('https://searchyourtour.com/api/check_payment_status', {\r\n-              method: 'POST',\r\n-              headers: { 'Content-Type': 'application/json' },\r\n-              body: JSON.stringify({\r\n-                reservation_id: data.reservation_id,\r\n-                randomCode: data.randomCode,\r\n-                payment_intent_id: paymentIntentId\r\n-              })\r\n-            });\r\n-          }\r\n-        } else if (result.paymentIntent.status === 'succeeded') {\r\n-          // Başarılı ödeme\r\n-          success.value = true;\r\n-          if (data.reservation_id && paymentIntentId) {\r\n-            await fetch('https://searchyourtour.com/api/check_payment_status', {\r\n-              method: 'POST',\r\n-              headers: { 'Content-Type': 'application/json' },\r\n-              body: JSON.stringify({\r\n-                reservation_id: data.reservation_id,\r\n-                randomCode: data.randomCode,\r\n-                payment_intent_id: paymentIntentId\r\n-              })\r\n-            });\r\n-          }\r\n-        } else {\r\n-          // Beklemede veya başka bir durum (ör. 3D Secure)\r\n-          errorMsg.value = 'Ödeme işlemi tamamlanmadı, ek onay gerekebilir.';\r\n-          if (data.reservation_id && paymentIntentId) {\r\n-            await fetch('https://searchyourtour.com/api/check_payment_status', {\r\n-              method: 'POST',\r\n-              headers: { 'Content-Type': 'application/json' },\r\n-              body: JSON.stringify({\r\n-                reservation_id: data.reservation_id,\r\n-                randomCode: data.randomCode,\r\n-                payment_intent_id: paymentIntentId\r\n-              })\r\n-            });\r\n-          }\r\n-        }\r\n-      } catch (err) {\r\n-        console.error('Payment error:', err);\r\n-        errorMsg.value = err.message || 'Payment failed. Please try again.';\r\n-      } finally {\r\n-        loading.value = false;\r\n-      }\r\n-    }\r\n-    \r\n-  } catch (err) {\r\n-    console.error('Payment error:', err);\r\n-    errorMsg.value = err.message || 'Payment failed. Please try again.';\r\n-  } finally {\r\n-    loading.value = false;\r\n-  }\r\n-</script>\r\n-\r\n-<style scoped>\r\n-/* CheckoutForm.vue'dan taşınan stiller */\r\n-.checkout-main-layout {\r\n-  display: flex;\r\n-  gap: 64px;\r\n-  align-items: stretch;\r\n-  justify-content: center;\r\n-  background: #f6f8fa;\r\n-  padding: 48px 0;\r\n-  min-height: 100vh;\r\n-}\r\n-.checkout-left, .checkout-right {\r\n-  flex: 1 1 0;\r\n-  min-width: 340px;\r\n-  max-width: 600px;\r\n-  background: #fff;\r\n-  border-radius: 26px;\r\n-  box-shadow: 0 8px 32px rgba(44,62,80,0.10);\r\n-  padding: 36px 44px 24px 44px;\r\n-  font-family: 'Inter', 'Segoe UI', Arial, sans-serif;\r\n-  display: flex;\r\n-  flex-direction: column;\r\n-  justify-content: flex-start;\r\n-  height: 100%;\r\n-}\r\n-.checkout-left h2 {\r\n-  color: #1a2a3a;\r\n-  font-size: 2.3rem;\r\n-  margin-bottom: 18px;\r\n-  font-weight: 900;\r\n-  text-align: left;\r\n-  letter-spacing: -1px;\r\n-}\r\n-.secure-checkout {\r\n-  color: #0a8a4a;\r\n-  font-size: 1.08rem;\r\n-  margin-bottom: 18px;\r\n-  display: flex;\r\n-  align-items: center;\r\n-  gap: 8px;\r\n-  font-weight: 600;\r\n-}\r\n-.checkout-form {\r\n-  display: flex;\r\n-  flex-direction: column;\r\n-  gap: 18px;\r\n-}\r\n-.form-group {\r\n-  display: flex;\r\n-  flex-direction: column;\r\n-  gap: 4px;\r\n-}\r\n-input, select {\r\n-  padding: 12px 16px;\r\n-  border-radius: 10px;\r\n-  border: 2px solid #e0e6ed;\r\n-  font-size: 1.08rem;\r\n-  background: #f7fafd;\r\n-  outline: none;\r\n-  transition: border 0.2s;\r\n-}\r\n-input:focus, select:focus {\r\n-  border-color: #0070eb;\r\n-}\r\n-.stripe-card-element {\r\n-  padding: 12px 16px;\r\n-  border-radius: 10px;\r\n-  border: 2px solid #e0e6ed;\r\n-  background: #f7fafd;\r\n-  margin-top: 4px;\r\n-}\r\n-.form-note {\r\n-  font-size: 0.97rem;\r\n-  color: #888;\r\n-  margin-bottom: 8px;\r\n-}\r\n-.required { color: #d7263d; }\r\n-.pay-btn {\r\n-  width: 100%;\r\n-  background: linear-gradient(90deg, #FC6421 60%, #ff3401 100%);\r\n-  color: #fff;\r\n-  font-size: 1.15rem;\r\n-  font-weight: 800;\r\n-  border: none;\r\n-  border-radius: 32px;\r\n-  padding: 1.05rem 0;\r\n-  margin-top: 8px;\r\n-  cursor: pointer;\r\n-  transition: background 0.2s, box-shadow 0.2s;\r\n-  box-shadow: 0 2px 12px rgba(0,112,235,0.08);\r\n-  letter-spacing: 0.5px;\r\n-}\r\n-.pay-btn:hover {\r\n-  background: linear-gradient(90deg, #ff0000 60%, #ff0000 100%);\r\n-  box-shadow: 0 4px 24px rgba(0,112,235,0.13);\r\n-}\r\n-.pay-btn:disabled {\r\n-  background: #aaa;\r\n-  cursor: not-allowed;\r\n-}\r\n-.success-message {\r\n-  color: #27ae60;\r\n-  text-align: center;\r\n-  margin-top: 16px;\r\n-  font-size: 1.1rem;\r\n-  display: flex;\r\n-  align-items: center;\r\n-  justify-content: center;\r\n-  gap: 12px;\r\n-  padding: 16px;\r\n-  background: #f8fff9;\r\n-  border: 1px solid #27ae60;\r\n-  border-radius: 8px;\r\n-}\r\n-\r\n-.success-message i {\r\n-  font-size: 1.5rem;\r\n-  flex-shrink: 0;\r\n-}\r\n-\r\n-.success-message div {\r\n-  text-align: left;\r\n-}\r\n-\r\n-.success-message strong {\r\n-  display: block;\r\n-  margin-bottom: 4px;\r\n-}\r\n-\r\n-.success-message p {\r\n-  margin: 0;\r\n-  font-size: 0.95rem;\r\n-  color: #666;\r\n-}\r\n-.error-message {\r\n-  color: #d7263d;\r\n-  text-align: center;\r\n-  margin-top: 12px;\r\n-  font-size: 1rem;\r\n-}\r\n-\r\n-.order-summary-panel {\r\n-  display: flex;\r\n-  flex-direction: column;\r\n-  gap: 18px;\r\n-  height: 100%;\r\n-}\r\n-.order-summary-product {\r\n-  display: flex;\r\n-  gap: 22px;\r\n-  margin-bottom: 10px;\r\n-  align-items: flex-start;\r\n-}\r\n-.order-summary-img {\r\n-  width: 88px;\r\n-  height: 88px;\r\n-  border-radius: 14px;\r\n-  object-fit: cover;\r\n-  box-shadow: 0 2px 8px rgba(44,62,80,0.08);\r\n-}\r\n-.order-summary-product-info {\r\n-  flex: 1;\r\n-  display: flex;\r\n-  flex-direction: column;\r\n-  gap: 2px;\r\n-}\r\n-.product-title {\r\n-  font-weight: 900;\r\n-  font-size: 1.18rem;\r\n-  margin-bottom: 2px;\r\n-  color: #1a2a3a;\r\n-}\r\n-.product-detail {\r\n-  font-size: 1.04rem;\r\n-  color: #444;\r\n-  margin-bottom: 2px;\r\n-  display: flex;\r\n-  align-items: center;\r\n-  gap: 6px;\r\n-}\r\n-.order-summary-title {\r\n-  font-size: 1.45rem;\r\n-  font-weight: 900;\r\n-  margin-bottom: 18px;\r\n-  color: #1a2a3a;\r\n-  letter-spacing: -0.5px;\r\n-}\r\n-.order-summary-total-row {\r\n-  display: flex;\r\n-  justify-content: space-between;\r\n-  font-size: 1.22rem;\r\n-  font-weight: 900;\r\n-  margin-top: 10px;\r\n-  letter-spacing: 0.2px;\r\n-}\r\n-.order-summary-total {\r\n-  color: #FC6421;\r\n-  font-size: 1.32rem;\r\n-  font-weight: 900;\r\n-}\r\n-.order-summary-taxes {\r\n-  color: #0a8a4a;\r\n-  font-size: 0.97rem;\r\n-  margin-top: 2px;\r\n-  text-align: right;\r\n-}\r\n-.phone-row {\r\n-  margin-bottom: 0;\r\n-}\r\n-.phone-input-group {\r\n-  display: flex;\r\n-  gap: 10px;\r\n-  align-items: stretch;\r\n-}\r\n-.country-code-display {\r\n-  display: flex;\r\n-  align-items: center;\r\n-  gap: 6px;\r\n-  background: #f7fafd;\r\n-  border: 2px solid #e0e6ed;\r\n-  border-radius: 10px;\r\n-  padding: 12px 16px;\r\n-  font-size: 1.08rem;\r\n-  min-width: 90px;\r\n-  font-weight: 600;\r\n-  height: 48px;\r\n-  box-sizing: border-box;\r\n-}\r\n-.flag-option {\r\n-  width: 22px;\r\n-  height: 16px;\r\n-  margin-right: 7px;\r\n-  vertical-align: middle;\r\n-  border-radius: 3px;\r\n-  box-shadow: 0 1px 3px rgba(0,0,0,0.07);\r\n-}\r\n-.country-select-row {\r\n-  margin-bottom: 0;\r\n-}\r\n-.country-select-flex {\r\n-  display: flex;\r\n-  align-items: center;\r\n-  gap: 8px;\r\n-}\r\n-.country-select-fullwidth {\r\n-  width: 100%;\r\n-  min-width: 0;\r\n-  box-sizing: border-box;\r\n-}\r\n-.phone-input {\r\n-  flex: 1;\r\n-  padding: 12px 16px;\r\n-  border-radius: 10px;\r\n-  border: 2px solid #e0e6ed;\r\n-  font-size: 1.08rem;\r\n-  background: #f7fafd;\r\n-  outline: none;\r\n-  transition: border 0.2s;\r\n-  height: 48px;\r\n-  box-sizing: border-box;\r\n-}\r\n-.phone-input:focus {\r\n-  border-color: #0070eb;\r\n-}\r\n-.location-btn {\r\n-  background: #f7f7f7;\r\n-  border: 1px solid #ddd;\r\n-  border-radius: 6px;\r\n-  font-size: 1.08rem;\r\n-  padding: 0 16px;\r\n-  height: 48px;\r\n-  display: flex;\r\n-  align-items: center;\r\n-  justify-content: center;\r\n-  cursor: pointer;\r\n-  transition: background 0.2s;\r\n-}\r\n-.location-btn:hover {\r\n-  background: #eee;\r\n-}\r\n-@media (max-width: 900px) {\r\n-  .checkout-main-layout {\r\n-    flex-direction: column;\r\n-    gap: 0;\r\n-    padding: 0.5rem 0 1rem 0;\r\n-    min-height: 100vh;\r\n-    width: 100vw;\r\n-    background: #fff;\r\n-    box-sizing: border-box;\r\n-  }\r\n-  .checkout-left, .checkout-right, .order-summary-panel {\r\n-    width: 100%;\r\n-    max-width: 100vw;\r\n-    border-radius: 10px;\r\n-    box-shadow: 0 2px 8px rgba(44,62,80,0.06);\r\n-    padding: 0.7rem 0.5rem;\r\n-    margin: 0 0 1rem 0;\r\n-    background: #fff;\r\n-    box-sizing: border-box;\r\n-    min-width: 0;\r\n-  }\r\n-}\r\n-@media (max-width: 600px) {\r\n-  body, html {\r\n-    background: #fff !important;\r\n-    margin: 0 !important;\r\n-    padding: 0 !important;\r\n-    overflow-x: hidden !important;\r\n-  }\r\n-  .checkout-main-layout {\r\n-    flex-direction: column !important;\r\n-    align-items: stretch !important;\r\n-    gap: 0 !important;\r\n-    padding: 0 12px !important;\r\n-    min-height: 100vh !important;\r\n-    width: 100vw !important;\r\n-    max-width: 100vw !important;\r\n-    background: #fff !important;\r\n-    box-sizing: border-box !important;\r\n-  }\r\n-  .checkout-left,\r\n-  .checkout-right,\r\n-  .order-summary-panel {\r\n-    width: 100% !important;\r\n-    max-width: 100vw !important;\r\n-    min-width: 0 !important;\r\n-    border-radius: 10px !important;\r\n-    box-shadow: 0 2px 8px rgba(44,62,80,0.06) !important;\r\n-    padding: 0.7rem 0.5rem !important;\r\n-    margin: 0 auto 1rem auto !important;\r\n-    background: #fff !important;\r\n-    box-sizing: border-box !important;\r\n-  }\r\n-  .checkout-left h2 {\r\n-    font-size: 1.4rem !important;\r\n-    margin-bottom: 14px !important;\r\n-  }\r\n-  .form-group,\r\n-  .country-select-fullwidth,\r\n-  .phone-input,\r\n-  .country-code-display,\r\n-  .pay-btn {\r\n-    max-width: 100vw !important;\r\n-    min-width: 0 !important;\r\n-    box-sizing: border-box !important;\r\n-    font-size: 1rem !important;\r\n-    padding-left: 0.2rem !important;\r\n-    padding-right: 0.2rem !important;\r\n-  }\r\n-  .order-summary-img {\r\n-    width: 44px !important;\r\n-    height: 44px !important;\r\n-    min-width: 32px !important;\r\n-    max-width: 44px !important;\r\n-  }\r\n-  .product-title,\r\n-  .order-summary-title {\r\n-    font-size: 1.08rem !important;\r\n-    word-break: break-word !important;\r\n-  }\r\n-  .pay-btn {\r\n-    font-size: 1.08rem !important;\r\n-    padding: 0.7rem 0 !important;\r\n-    margin-top: 0.5rem !important;\r\n-    border-radius: 12px !important;\r\n-  }\r\n-  .form-note {\r\n-    font-size: 0.9rem !important;\r\n-  }\r\n-  /* Scroll edilebilirlik için: */\r\n-  .checkout-modal,\r\n-  .checkout-content {\r\n-    width: 100vw !important;\r\n-    max-width: 100vw !important;\r\n-    height: 100vh !important;\r\n-    max-height: 100vh !important;\r\n-    overflow-y: auto !important;\r\n-    background: #fff !important;\r\n-    border-radius: 0 !important;\r\n-    box-shadow: none !important;\r\n-    padding: 0 !important;\r\n-    margin: 0 !important;\r\n-    display: flex !important;\r\n-    flex-direction: column !important;\r\n-    align-items: stretch !important;\r\n-  }\r\n-}\r\n-</style>\r\n"
                },
                {
                    "date": 1753178337470,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -373,9 +373,9 @@\n         return_url: 'https://yourfrontend.com/payment-status'\r\n       });\r\n \r\n       try {\r\n-        const payment_intent_id = result.paymentIntent?.id;\r\n+        const payment_intent_id = response.paymentIntent?.id;\r\n \r\n         if (result.error) {\r\n           // Hata durumu\r\n           console.error('Ödeme hatası:', result.error.message);\r\n"
                },
                {
                    "date": 1753179724950,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -373,9 +373,9 @@\n         return_url: 'https://yourfrontend.com/payment-status'\r\n       });\r\n \r\n       try {\r\n-        const payment_intent_id = response.paymentIntent?.id;\r\n+        const payment_intent_id = data.payment_intent_id;\r\n \r\n         if (result.error) {\r\n           // Hata durumu\r\n           console.error('Ödeme hatası:', result.error.message);\r\n"
                },
                {
                    "date": 1753346169249,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -404,8 +404,19 @@\n                 payment_intent_id: payment_intent_id\r\n               })\r\n             });\r\n           }\r\n+          // Ödeme başarılıysa yönlendir\r\n+          router.push({\r\n+            name: 'PaymentSuccess',\r\n+            query: {\r\n+              bookingId: data.reservation_id,\r\n+              tourTitle: selectedTourStore.tour?.title || '',\r\n+              bookingDate: selectedTourStore.tour?.bookingDate || '',\r\n+              amount: selectedTourStore.tour?.price || '',\r\n+              customerName: name.value || ''\r\n+            }\r\n+          });\r\n         } else {\r\n           // Beklemede veya başka bir durum (ör. 3D Secure)\r\n           errorMsg.value = 'Ödeme işlemi tamamlanmadı, ek onay gerekebilir.';\r\n           if (data.reservation_id && payment_intent_id) {\r\n"
                },
                {
                    "date": 1753346178717,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -406,9 +406,9 @@\n             });\r\n           }\r\n           // Ödeme başarılıysa yönlendir\r\n           router.push({\r\n-            name: 'PaymentSuccess',\r\n+            name: 'payment-success',\r\n             query: {\r\n               bookingId: data.reservation_id,\r\n               tourTitle: selectedTourStore.tour?.title || '',\r\n               bookingDate: selectedTourStore.tour?.bookingDate || '',\r\n"
                },
                {
                    "date": 1753449413945,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -98,11 +98,13 @@\n       </form>\r\n     </div>\r\n     <!-- SAĞ: Order Summary -->\r\n     <div class=\"checkout-right\">\r\n-      <div class=\"order-summary-panel\" v-if=\"selectedTourStore.tour\">\r\n+      <div class=\"order-summary-panel\" v-if=\"selectedTourStore.tour || selectedTourStore.pass\">\r\n         <div class=\"order-summary-title\">Order summary</div>\r\n-        <div class=\"order-summary-product\">\r\n+        \r\n+        <!-- Tour için order summary -->\r\n+        <div v-if=\"selectedTourStore.tour\" class=\"order-summary-product\">\r\n           <img class=\"order-summary-img\" :src=\"selectedTourStore.tour.image\" :alt=\"selectedTourStore.tour.title\" />\r\n           <div class=\"order-summary-product-info\">\r\n             <div class=\"product-title\">{{ selectedTourStore.tour.title }}</div>\r\n             <div class=\"product-detail\">{{ selectedTourStore.tour.description }}</div>\r\n@@ -123,11 +125,31 @@\n               </a>\r\n             </div>\r\n           </div>\r\n         </div>\r\n+\r\n+        <!-- Pass için order summary -->\r\n+        <div v-if=\"selectedTourStore.pass\" class=\"order-summary-product\">\r\n+          <div class=\"pass-icon\">\r\n+            <i class=\"fas fa-ticket-alt\"></i>\r\n+          </div>\r\n+          <div class=\"order-summary-product-info\">\r\n+            <div class=\"product-title\">{{ selectedTourStore.pass.name }}</div>\r\n+            <div class=\"product-detail\">{{ selectedTourStore.pass.days }} Day Istanbul Tourist Pass</div>\r\n+            <div class=\"product-detail\" v-if=\"selectedTourStore.pass.startDate\">\r\n+              <i class=\"fas fa-calendar-alt\"></i> Start Date: {{ selectedTourStore.pass.startDate }}\r\n+            </div>\r\n+            <div class=\"product-detail\"><i class=\"fas fa-user\"></i> Quantity: {{ selectedTourStore.pass.quantity }}</div>\r\n+            <div class=\"product-detail\" v-if=\"selectedTourStore.pass.email\"><i class=\"fas fa-envelope\"></i> {{ selectedTourStore.pass.email }}</div>\r\n+            <div class=\"product-detail\" v-if=\"selectedTourStore.pass.discount\">\r\n+              <i class=\"fas fa-tag\"></i> Save {{ selectedTourStore.pass.discount }}€\r\n+            </div>\r\n+          </div>\r\n+        </div>\r\n+\r\n         <div class=\"order-summary-total-row\">\r\n           <span>Total</span>\r\n-          <span class=\"order-summary-total\">{{ selectedTourStore.tour.price }}</span>\r\n+          <span class=\"order-summary-total\">{{ selectedTourStore.tour?.price || selectedTourStore.pass?.totalPrice }}</span>\r\n         </div>\r\n         <div class=\"order-summary-taxes\">All taxes and fees included</div>\r\n       </div>\r\n     </div>\r\n@@ -727,8 +749,23 @@\n }\r\n .location-btn:hover {\r\n   background: #eee;\r\n }\r\n+.pass-icon {\r\n+  width: 88px;\r\n+  height: 88px;\r\n+  border-radius: 14px;\r\n+  background-color: #f7fafd;\r\n+  display: flex;\r\n+  align-items: center;\r\n+  justify-content: center;\r\n+  box-shadow: 0 2px 8px rgba(44,62,80,0.08);\r\n+  margin-right: 22px;\r\n+}\r\n+.pass-icon i {\r\n+  font-size: 3rem;\r\n+  color: #0070eb;\r\n+}\r\n @media (max-width: 900px) {\r\n   .checkout-main-layout {\r\n     flex-direction: column;\r\n     gap: 0;\r\n"
                },
                {
                    "date": 1753449429014,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -336,9 +336,9 @@\n     if (!stripe) {\r\n       throw new Error('Stripe not initialized. Please refresh the page.');\r\n     }\r\n \r\n-    // 1. Sadece rezervasyonu ve ödeme bilgilerini backend’e gönder\r\n+    // 1. Sadece rezervasyonu ve ödeme bilgilerini backend'e gönder\r\n     const response = await fetch('https://searchyourtour.com/api/submit-booking', {\r\n       method: 'POST',\r\n       headers: {\r\n         'Content-Type': 'application/json',\r\n@@ -351,9 +351,11 @@\n           country: country.value,\r\n           hotel_address: hotelAddress.value,\r\n           user_location: userLocation.value\r\n         },\r\n-                  tour: {\r\n+        // Tour veya Pass verilerini gönder\r\n+        ...(selectedTourStore.tour ? {\r\n+          tour: {\r\n             id: selectedTourStore.tour?.id || null,\r\n             title: selectedTourStore.tour?.title || '',\r\n             description: selectedTourStore.tour?.description || '',\r\n             price: selectedTourStore.tour?.price || '',\r\n@@ -365,14 +367,32 @@\n             adult: selectedTourStore.tour?.adult || 1,\r\n             child: selectedTourStore.tour?.child || 0,\r\n             infant: selectedTourStore.tour?.infant || 0,\r\n             roomNumber: 0,\r\n-            randomCode: Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15)\r\n-          },\r\n-          payment: {\r\n-            amount: convertPriceToCents(selectedTourStore.tour?.price || ''),\r\n-            currency: currentCurrency.value\r\n+            randomCode: Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15),\r\n+            type: 'tour'\r\n           }\r\n+        } : {\r\n+          pass: {\r\n+            id: selectedTourStore.pass?.id || null,\r\n+            name: selectedTourStore.pass?.name || '',\r\n+            days: selectedTourStore.pass?.days || 1,\r\n+            price: selectedTourStore.pass?.price || '',\r\n+            total_price: selectedTourStore.pass?.totalPrice || '',\r\n+            quantity: selectedTourStore.pass?.quantity || 1,\r\n+            start_date: selectedTourStore.pass?.startDate || new Date().toISOString().split('T')[0],\r\n+            email: selectedTourStore.pass?.email || '',\r\n+            tenant_id: 'ad5257a5-efdd-4314-9e5e-b56aabe321f1',\r\n+            currency_id: currencyId.value,\r\n+            language_id: languageId.value,\r\n+            randomCode: Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15),\r\n+            type: 'pass'\r\n+          }\r\n+        }),\r\n+        payment: {\r\n+          amount: convertPriceToCents(selectedTourStore.tour?.price || selectedTourStore.pass?.totalPrice || ''),\r\n+          currency: currentCurrency.value\r\n+        }\r\n       })\r\n     });\r\n \r\n     const data = await response.json();\r\n"
                },
                {
                    "date": 1753449435253,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -218,9 +218,9 @@\n const phone = ref('')\r\n const selectedCountry = computed(() => countries.find(c => c.name === country.value) || countries[0])\r\n \r\n const name = ref('')\r\n-const email = ref(selectedTourStore.tour?.email || '')\r\n+const email = ref(selectedTourStore.tour?.email || selectedTourStore.pass?.email || '')\r\n \r\n // Debug: Tour verilerini kontrol et\r\n console.log('Selected Tour Store:', selectedTourStore.tour)\r\n const cardName = ref('')\r\n"
                }
            ],
            "date": 1751893563511,
            "name": "Commit-0",
            "content": "<template>\r\n  <div class=\"checkout-wrapper\">\r\n    <div class=\"checkout-main\">\r\n      <div class=\"checkout-stepper\">\r\n        <div :class=\"['step', {active: step === 1}]\">\r\n          <span>1</span>\r\n          <div>Contact</div>\r\n        </div>\r\n        <div class=\"step-line\"></div>\r\n        <div :class=\"['step', {active: step === 2}]\">\r\n          <span>2</span>\r\n          <div>Payment</div>\r\n        </div>\r\n      </div>\r\n      <div class=\"checkout-content\">\r\n        <form v-if=\"step === 1\" class=\"checkout-form\" @submit.prevent=\"goToPayment\">\r\n          <h2>Enter your personal details</h2>\r\n          <div class=\"secure-info\"><i class=\"fas fa-lock\"></i> Checkout is fast and secure</div>\r\n          <div class=\"form-group\">\r\n            <label>Full name *</label>\r\n            <input v-model=\"contact.name\" type=\"text\" required placeholder=\"Full name\" />\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label>Email *</label>\r\n            <input v-model=\"contact.email\" type=\"email\" required placeholder=\"Email\" />\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label>Country *</label>\r\n            <select v-model=\"contact.country\" required>\r\n              <option value=\"Turkey\">Turkey (+90)</option>\r\n              <option value=\"USA\">USA (+1)</option>\r\n              <option value=\"Germany\">Germany (+49)</option>\r\n              <option value=\"UK\">UK (+44)</option>\r\n              <!-- Diğer ülkeler eklenebilir -->\r\n            </select>\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label>Mobile phone number *</label>\r\n            <input v-model=\"contact.phone\" type=\"tel\" required placeholder=\"Mobile phone number\" />\r\n          </div>\r\n          <button class=\"btn-primary big-btn\" type=\"submit\">Go to payment</button>\r\n        </form>\r\n        <form v-else class=\"checkout-form\" @submit.prevent=\"submitPayment\">\r\n          <h2>Payment details</h2>\r\n          <div class=\"form-group\">\r\n            <label>Cardholder Name *</label>\r\n            <input v-model=\"payment.cardName\" type=\"text\" required placeholder=\"Cardholder Name\" />\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label>Card Number *</label>\r\n            <input v-model=\"payment.cardNumber\" type=\"text\" required maxlength=\"19\" placeholder=\"1234 5678 9012 3456\" />\r\n          </div>\r\n          <div class=\"form-row\">\r\n            <div class=\"form-group\">\r\n              <label>Expiry *</label>\r\n              <input v-model=\"payment.expiry\" type=\"text\" required maxlength=\"5\" placeholder=\"MM/YY\" />\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <label>CVC *</label>\r\n              <input v-model=\"payment.cvc\" type=\"text\" required maxlength=\"4\" placeholder=\"CVC\" />\r\n            </div>\r\n          </div>\r\n          <button class=\"btn-primary big-btn\" type=\"submit\">Pay now</button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n    <div class=\"checkout-summary\">\r\n      <div class=\"summary-card\">\r\n        <div class=\"summary-title\">Order summary</div>\r\n        <div class=\"summary-tour\">\r\n          <img class=\"summary-img\" :src=\"tour.image\" alt=\"Tour image\" />\r\n          <div>\r\n            <div class=\"tour-name\">{{ tour.name }}</div>\r\n            <div class=\"tour-date\">{{ tour.date }}</div>\r\n            <div class=\"tour-detail\">{{ tour.detail }}</div>\r\n          </div>\r\n        </div>\r\n        <div class=\"summary-info\">\r\n          <div><i class=\"fas fa-user\"></i> {{ tour.person }}</div>\r\n          <div><i class=\"fas fa-star\"></i> {{ tour.rating }}</div>\r\n        </div>\r\n        <div class=\"summary-total\">\r\n          <div>Total</div>\r\n          <div class=\"summary-price\">{{ tour.price }}</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue'\r\n\r\nconst step = ref(1)\r\nconst contact = ref({ name: '', email: '', country: 'Turkey', phone: '' })\r\nconst payment = ref({ cardName: '', cardNumber: '', expiry: '', cvc: '' })\r\n\r\nconst tour = ref({\r\n  image: 'https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=400&q=80',\r\n  name: 'San Diego: Harbor Cruise',\r\n  date: 'Friday, July 18, 2025 at 10:00 AM',\r\n  detail: 'North Harbor Tour (1 Hour) • Language: English',\r\n  person: '1 adult (Age 13 - 99)',\r\n  rating: '4.6 (1,200)',\r\n  price: '₺1,450.13'\r\n})\r\n\r\nfunction goToPayment() {\r\n  step.value = 2\r\n}\r\nfunction submitPayment() {\r\n  alert('Payment submitted!')\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.checkout-wrapper {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: flex-start;\r\n  gap: 2.5rem;\r\n  padding: 2.5rem 0 3.5rem 0;\r\n  background: #f7fafd;\r\n  min-height: 100vh;\r\n}\r\n.checkout-main {\r\n  width: 480px;\r\n  background: #fff;\r\n  border-radius: 18px;\r\n  box-shadow: 0 4px 32px rgba(44,62,80,0.08);\r\n  padding: 2.5rem 2.5rem 2rem 2.5rem;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: stretch;\r\n}\r\n.checkout-stepper {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  margin-bottom: 2.2rem;\r\n  gap: 1.2rem;\r\n}\r\n.step {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  color: #b0b8c1;\r\n  font-weight: 600;\r\n  font-size: 1.1rem;\r\n}\r\n.step.active {\r\n  color: #223366;\r\n}\r\n.step span {\r\n  width: 32px;\r\n  height: 32px;\r\n  border-radius: 50%;\r\n  background: #f7fafd;\r\n  border: 2.5px solid #b0b8c1;\r\n  color: #b0b8c1;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 1.2rem;\r\n  margin-bottom: 0.3rem;\r\n  font-weight: 700;\r\n  transition: border 0.2s, color 0.2s;\r\n}\r\n.step.active span {\r\n  border-color: #223366;\r\n  color: #223366;\r\n  background: #fff;\r\n}\r\n.step-line {\r\n  width: 48px;\r\n  height: 3px;\r\n  background: #b0b8c1;\r\n  border-radius: 2px;\r\n}\r\n.checkout-content {\r\n  width: 100%;\r\n}\r\n.checkout-form {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1.3rem;\r\n}\r\n.checkout-form h2 {\r\n  font-size: 1.5rem;\r\n  font-weight: 700;\r\n  margin-bottom: 0.5rem;\r\n  color: #223366;\r\n}\r\n.secure-info {\r\n  color: #0a8a4a;\r\n  font-size: 1.08rem;\r\n  margin-bottom: 0.7rem;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  font-weight: 600;\r\n}\r\n.form-group {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.3rem;\r\n}\r\n.form-group label {\r\n  font-size: 1.08rem;\r\n  color: #223366;\r\n  font-weight: 600;\r\n}\r\n.form-group input,\r\n.form-group select {\r\n  padding: 0.95rem 1.1rem;\r\n  border-radius: 8px;\r\n  border: 2px solid #e0e6ed;\r\n  font-size: 1.08rem;\r\n  background: #f7fafd;\r\n  outline: none;\r\n  transition: border 0.2s;\r\n}\r\n.form-group input:focus,\r\n.form-group select:focus {\r\n  border-color: #223366;\r\n}\r\n.form-row {\r\n  display: flex;\r\n  gap: 1.2rem;\r\n}\r\n.big-btn {\r\n  width: 100%;\r\n  padding: 1.1rem 0;\r\n  font-size: 1.18rem;\r\n  border-radius: 32px;\r\n  background: #0070eb;\r\n  color: #fff;\r\n  font-weight: 700;\r\n  margin-top: 1.2rem;\r\n  box-shadow: 0 2px 12px rgba(0,112,235,0.08);\r\n  border: none;\r\n  transition: background 0.2s;\r\n}\r\n.big-btn:hover {\r\n  background: #005bb5;\r\n}\r\n.checkout-summary {\r\n  width: 370px;\r\n  background: none;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: stretch;\r\n}\r\n.summary-card {\r\n  background: #fff;\r\n  border-radius: 16px;\r\n  box-shadow: 0 2px 16px rgba(44,62,80,0.10);\r\n  padding: 2rem 2rem 1.5rem 2rem;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1.2rem;\r\n}\r\n.summary-title {\r\n  font-size: 1.3rem;\r\n  font-weight: 700;\r\n  color: #223366;\r\n  margin-bottom: 0.7rem;\r\n}\r\n.summary-tour {\r\n  display: flex;\r\n  gap: 1.1rem;\r\n  align-items: center;\r\n  margin-bottom: 0.7rem;\r\n}\r\n.summary-img {\r\n  width: 64px;\r\n  height: 64px;\r\n  border-radius: 10px;\r\n  object-fit: cover;\r\n  box-shadow: 0 2px 8px rgba(44,62,80,0.08);\r\n}\r\n.tour-name {\r\n  font-size: 1.08rem;\r\n  font-weight: 700;\r\n  color: #223366;\r\n}\r\n.tour-date {\r\n  font-size: 1.01rem;\r\n  color: #444;\r\n}\r\n.tour-detail {\r\n  font-size: 0.98rem;\r\n  color: #888;\r\n}\r\n.summary-info {\r\n  display: flex;\r\n  gap: 1.2rem;\r\n  font-size: 1.01rem;\r\n  color: #223366;\r\n  align-items: center;\r\n}\r\n.summary-total {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  font-size: 1.18rem;\r\n  font-weight: 700;\r\n  color: #223366;\r\n  margin-top: 1.2rem;\r\n  border-top: 1.5px solid #e0e6ed;\r\n  padding-top: 1.1rem;\r\n}\r\n.summary-price {\r\n  color: #0070eb;\r\n  font-size: 1.25rem;\r\n  font-weight: 800;\r\n}\r\n@media (max-width: 1100px) {\r\n  .checkout-wrapper {\r\n    flex-direction: column;\r\n    align-items: center;\r\n    gap: 1.5rem;\r\n    padding: 1.2rem 0 2.5rem 0;\r\n  }\r\n  .checkout-main {\r\n    width: 98vw;\r\n    max-width: 520px;\r\n    margin-bottom: 2rem;\r\n  }\r\n  .checkout-summary {\r\n    width: 98vw;\r\n    max-width: 420px;\r\n  }\r\n}\r\n@media (max-width: 600px) {\r\n  .checkout-main {\r\n    padding: 1.2rem 0.5rem 1.2rem 0.5rem;\r\n  }\r\n  .summary-card {\r\n    padding: 1.2rem 0.5rem 1.2rem 0.5rem;\r\n  }\r\n}\r\n</style> "
        }
    ]
}