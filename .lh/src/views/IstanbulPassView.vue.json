{
    "sourceFile": "src/views/IstanbulPassView.vue",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1754473053153,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1754473053153,
            "name": "Commit-0",
            "content": "<template>\r\n  <div class=\"istanbul-pass\">\r\n    <section class=\"hero-section\">\r\n      <div class=\"container\">\r\n        <h1>SearchYourTour Pass</h1>\r\n        <p>Choose the perfect pass for your Istanbul adventure</p>\r\n      </div>\r\n    </section>\r\n\r\n    <section class=\"pass-selection\">\r\n      <div class=\"container pass-flex\">\r\n        <div class=\"pass-grid\">\r\n          <div class=\"pass-card\" v-for=\"pass in passes\" :key=\"pass.id\">\r\n            <div class=\"pass-header\">\r\n              <h3>{{ pass.name }}</h3>\r\n              <div class=\"pass-price\">{{ pass.price }} <span class=\"currency\">‚Ç¨</span></div>\r\n            </div>\r\n            <div class=\"pass-features\">\r\n              <ul>\r\n                <li v-for=\"feature in pass.features\" :key=\"feature\">{{ feature }}</li>\r\n              </ul>\r\n            </div>\r\n            <div class=\"pass-action\">\r\n              <button @click=\"selectPass(pass)\" class=\"btn btn-primary\">Select Pass</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div v-if=\"selectedPass\" class=\"pass-box\">\r\n          <h2>Choose your pass</h2>\r\n          <!-- Pass se√ßimi satƒ±rƒ± (template kƒ±smƒ±nda g√ºncelleme) -->\r\n          <div class=\"pass-select-row\">\r\n            <div class=\"pass-select\">{{ selectedPass.name }}</div>\r\n            <span class=\"pass-price\">\r\n              {{ selectedPass.price }} <span class=\"currency\">‚Ç¨</span> <small>/ person</small>\r\n            </span>\r\n          </div>\r\n          <div class=\"quantity-row\">\r\n            <button @click=\"decrement\" :disabled=\"quantity <= 1\">-</button>\r\n            <span>{{ quantity }}</span>\r\n            <button @click=\"increment\">+</button>\r\n          </div>\r\n          <div class=\"price-summary\">\r\n            <div class=\"old-price\" v-if=\"selectedPass.oldPrice\">\r\n              <s>{{ selectedPass.oldPrice }}</s>\r\n            </div>\r\n            <div class=\"new-price\">{{ selectedPass.price }}</div>\r\n            <div class=\"discount\" v-if=\"selectedPass.discount\">\r\n              <span>Sale Discount</span>\r\n              <span>-{{ selectedPass.discount }}</span>\r\n            </div>\r\n          </div>\r\n          <hr />\r\n          <div class=\"fee-row\">\r\n            <span>Instant Access Fee <span class=\"info\" title=\"You get your pass instantly after payment.\">i</span></span>\r\n            <span>{{ instantFee }}</span>\r\n          </div>\r\n          <div class=\"eco-row\">\r\n            <span class=\"eco-icon\">üå±</span>\r\n            <span>Eco-Friendly Green Technology</span>\r\n          </div>\r\n          <hr />\r\n          <div class=\"order-total-row\">\r\n            <span>Order Total</span>\r\n            <span class=\"order-total\">{{ orderTotal }}</span>\r\n          </div>\r\n          <div class=\"tax-note\">All taxes and fees included</div>\r\n          <input type=\"email\" placeholder=\"E-mail Address\" class=\"input\" v-model=\"email\" />\r\n          <div class=\"date-input-wrapper\" ref=\"dateInputWrapper\">\r\n            <input\r\n              type=\"text\"\r\n              class=\"input date-input\"\r\n              :value=\"startDate\"\r\n              placeholder=\"gg.aa.yyyy\"\r\n              readonly\r\n              @click=\"openDatePicker\"\r\n              style=\"background:#f7f7f7; color:#222; padding-right:36px;\"\r\n            />\r\n            <span class=\"calendar-icon\" @click=\"openDatePicker\">\r\n              <svg width=\"22\" height=\"22\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n                <rect x=\"3\" y=\"5\" width=\"18\" height=\"16\" rx=\"2\" stroke=\"#FC6421\" stroke-width=\"2\"/>\r\n                <path d=\"M16 3v4M8 3v4\" stroke=\"#FC6421\" stroke-width=\"2\" stroke-linecap=\"round\"/>\r\n                <path d=\"M3 9h18\" stroke=\"#FC6421\" stroke-width=\"2\"/>\r\n              </svg>\r\n            </span>\r\n            <ElDatePicker\r\n              v-if=\"!isMobile\"\r\n              ref=\"pickerRef\"\r\n              v-model=\"startDate\"\r\n              type=\"date\"\r\n              format=\"YYYY-MM-DD\"\r\n              value-format=\"YYYY-MM-DD\"\r\n              :teleported=\"false\"\r\n              :editable=\"false\"\r\n              :input-visible=\"false\"\r\n              :disabled-date=\"disablePastDates\"\r\n              popper-class=\"custom-datepicker-popper\"\r\n              :popper-options=\"{ placement: 'bottom-start' }\"\r\n              style=\"opacity:0; pointer-events:none; position:absolute; left:0; top:0; width:100%;\"\r\n              @change=\"onDateChange\"\r\n            />\r\n            <!-- Mobilde tam ekran ve scrollable v-calendar -->\r\n            <div v-if=\"isMobile && showDatePicker\" class=\"mobile-calendar-modal\">\r\n              <div class=\"calendar-modal-header\">\r\n                <span>Pick a date</span>\r\n                <button class=\"calendar-modal-close\" @click=\"showDatePicker = false\">&times;</button>\r\n              </div>\r\n              <div class=\"calendar-scroll-container\">\r\n                <Calendar\r\n                  :columns=\"1\"\r\n                  :rows=\"9\"\r\n                  :min-date=\"todayStr\"\r\n                  :locale=\"'en-US'\"\r\n                  @dayclick=\"onDayClick\"\r\n                  class=\"vcalendar-mobile\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <button \r\n            class=\"pay-btn\" \r\n            @click=\"proceedToPayment\"\r\n            :disabled=\"!isDateSelected\"\r\n            :class=\"{ 'disabled': !isDateSelected }\"\r\n          >\r\n            {{ isDateSelected ? 'Proceed to Payment' : 'Please Select Date' }}\r\n          </button>\r\n          <div class=\"save-note\">\r\n            <b>Save over {{ savings }}</b> on attractions versus original prices.\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted, nextTick, onUnmounted } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport { useSelectedTourStore } from '../stores/selectedTour'\r\nimport { ElDatePicker } from 'element-plus'\r\nimport 'element-plus/dist/index.css'\r\nimport { Calendar } from 'v-calendar';\r\nimport 'v-calendar/style.css';\r\n\r\nconst router = useRouter()\r\nconst selectedTourStore = useSelectedTourStore()\r\n\r\nconst passes = ref([\r\n  {\r\n    id: 1,\r\n    name: '1 Day Pass',\r\n    price: 139,\r\n    oldPrice: 230,\r\n    discount: 91,\r\n    days: 1,\r\n    features: [\r\n      'Access to 100+ attractions',\r\n      'Skip-the-line entry',\r\n      'Free guided tours',\r\n      'Mobile ticket'\r\n    ]\r\n  },\r\n  {\r\n    id: 2,\r\n    name: '3 Day Pass',\r\n    price: 199,\r\n    oldPrice: 270,\r\n    discount: 71,\r\n    days: 3,\r\n    features: [\r\n      'Access to 100+ attractions',\r\n      'Skip-the-line entry',\r\n      'Free guided tours',\r\n      'Mobile ticket',\r\n      'Best value option'\r\n    ]\r\n  },\r\n  {\r\n    id: 3,\r\n    name: '7 Day Pass',\r\n    price: 259,\r\n    oldPrice: 340,\r\n    discount: 81,\r\n    days: 7,\r\n    features: [\r\n      'Access to 100+ attractions',\r\n      'Skip-the-line entry',\r\n      'Free guided tours',\r\n      'Mobile ticket',\r\n      'Maximum flexibility'\r\n    ]\r\n  }\r\n])\r\n\r\nconst selectedPass = ref(null)\r\nconst quantity = ref(1)\r\nconst email = ref('')\r\nconst startDate = ref('')\r\nconst instantFee = '‚Ç¨10.00'\r\nconst savings = '‚Ç¨270'\r\n\r\n// Date picker i√ßin gerekli state'ler\r\nconst showDatePicker = ref(false)\r\nconst pickerRef = ref(null)\r\nconst isMobile = ref(false)\r\nconst todayStr = new Date().toISOString().slice(0, 10);\r\n\r\nconst selectPass = (pass) => {\r\n  selectedPass.value = pass\r\n  quantity.value = 1\r\n}\r\nconst increment = () => { quantity.value++ }\r\nconst decrement = () => { if (quantity.value > 1) quantity.value-- }\r\n\r\nconst orderTotal = computed(() => {\r\n  if (!selectedPass.value) return '‚Ç¨0.00'\r\n  const total = (selectedPass.value.price * quantity.value) + 10\r\n  return `‚Ç¨${total}.00`\r\n})\r\n\r\n// Tarih se√ßili mi kontrol√º\r\nconst isDateSelected = computed(() => {\r\n  return startDate.value && startDate.value.trim() !== '';\r\n})\r\n\r\n// DatePicker'ƒ± input ile tetiklemek i√ßin fonksiyonlar\r\nfunction openDatePicker() {\r\n  if (isMobile.value) {\r\n    showDatePicker.value = true;\r\n  } else {\r\n    nextTick(() => {\r\n      if (pickerRef.value) pickerRef.value.handleOpen();\r\n    });\r\n  }\r\n}\r\n\r\nfunction onDateChange(val) {\r\n  showDatePicker.value = false;\r\n}\r\n\r\nfunction onDayClick(day) {\r\n  if (!day || !day.id) return;\r\n  // Se√ßilen g√ºn bug√ºnden k√º√ß√ºkse izin verme\r\n  if (day.id < todayStr) return;\r\n  startDate.value = day.id;\r\n  showDatePicker.value = false;\r\n}\r\n\r\n// Masa√ºst√º i√ßin bug√ºnden √∂nceki tarihleri devre dƒ±≈üƒ± bƒ±rak\r\nfunction disablePastDates(date) {\r\n  const today = new Date();\r\n  today.setHours(0,0,0,0);\r\n  return date < today;\r\n}\r\n\r\nconst proceedToPayment = () => {\r\n  if (!startDate.value || startDate.value === '' || startDate.value.trim() === '') {\r\n    alert('Please select a date before proceeding to payment');\r\n    return;\r\n  }\r\n  \r\n  if (!selectedPass.value) {\r\n    alert('Please select a pass before proceeding to payment');\r\n    return;\r\n  }\r\n\r\n  // Pass verilerini store'a aktar\r\n  selectedTourStore.setPass({\r\n    id: selectedPass.value.id,\r\n    name: selectedPass.value.name,\r\n    price: selectedPass.value.price,\r\n    oldPrice: selectedPass.value.oldPrice,\r\n    discount: selectedPass.value.discount,\r\n    days: selectedPass.value.days,\r\n    quantity: quantity.value,\r\n    email: email.value,\r\n    startDate: startDate.value,\r\n    totalPrice: orderTotal.value,\r\n    instantFee: instantFee,\r\n    features: selectedPass.value.features,\r\n    type: 'pass' // Pass olduƒüunu belirtmek i√ßin\r\n  })\r\n\r\n  // Checkout'a y√∂nlendir\r\n  router.push('/checkout')\r\n}\r\n\r\nonMounted(() => {\r\n  const checkMobile = () => {\r\n    isMobile.value = window.innerWidth <= 768;\r\n  };\r\n  checkMobile();\r\n  window.addEventListener('resize', checkMobile);\r\n  \r\n  // Temizlik\r\n  onUnmounted(() => {\r\n    window.removeEventListener('resize', checkMobile);\r\n  });\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.istanbul-pass {\r\n  min-height: 100vh;\r\n}\r\n\r\n.hero-section {\r\n  background: #fc6421;\r\n  color: white;\r\n  padding: 4rem 0;\r\n  text-align: center;\r\n}\r\n\r\n.hero-section h1 {\r\n  font-size: 3rem;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.pass-selection {\r\n  padding: 4rem 0;\r\n}\r\n\r\n.pass-flex {\r\n  display: flex;\r\n  gap: 2rem;\r\n  align-items: flex-start;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.pass-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\r\n  gap: 2rem;\r\n  flex: 2;\r\n}\r\n\r\n.pass-card {\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-between;\r\n  background: white;\r\n  border-radius: 8px;\r\n  padding: 2rem;\r\n  box-shadow: 0 2px 10px rgba(0,0,0,0.1);\r\n  text-align: center;\r\n}\r\n\r\n.pass-header h3 {\r\n  font-size: 1.5rem;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.pass-header .pass-price {\r\n  font-size: 2rem;\r\n  font-weight: 700;\r\n  color: #FC6421;\r\n  margin-bottom: 1.5rem;\r\n  display: block;\r\n}\r\n\r\n.pass-features ul {\r\n  list-style: none;\r\n  padding: 0;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.pass-features li {\r\n  padding: 0.5rem 0;\r\n  border-bottom: 1px solid #eee;\r\n}\r\n\r\n.pass-features li:last-child {\r\n  border-bottom: none;\r\n}\r\n\r\n/* Yeni √∂deme kutusu stilleri */\r\n.pass-box {\r\n  background: #fff;\r\n  border-radius: 18px;\r\n  box-shadow: 0 2px 16px rgba(0,0,0,0.07);\r\n  padding: 32px 24px;\r\n  max-width: 400px;\r\n  min-width: 320px;\r\n  font-family: 'Inter', sans-serif;\r\n  margin-top: 0.5rem;\r\n}\r\n\r\n.pass-box h2 {\r\n  color: #FC6421;\r\n  font-size: 2rem;\r\n  margin-bottom: 18px;\r\n  font-weight: 700;\r\n}\r\n\r\n.pass-select-row {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 12px;\r\n}\r\n\r\n.pass-select {\r\n  flex: 1;\r\n  padding: 8px 12px;\r\n  border-radius: 8px;\r\n  border: 1px solid #eee;\r\n  font-size: 1rem;\r\n  background: #f7f7f7;\r\n}\r\n\r\n.pass-price {\r\n  font-size: 1.2rem;\r\n  font-weight: 600;\r\n  color: #222;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n}\r\n.currency {\r\n  font-size: 1.1rem;\r\n  font-weight: 500;\r\n  margin-left: 2px;\r\n}\r\n.quantity-row {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  margin-bottom: 12px;\r\n}\r\n.quantity-row button {\r\n  width: 36px;\r\n  height: 36px;\r\n  border-radius: 50%;\r\n  border: none;\r\n  background: #f2f2f2;\r\n  font-size: 1.4rem;\r\n  font-weight: 700;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: pointer;\r\n  transition: background 0.2s;\r\n}\r\n\r\n.quantity-row button:disabled {\r\n  background: #eee;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.price-summary {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 4px;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.old-price {\r\n  color: #aaa;\r\n  font-size: 1rem;\r\n}\r\n\r\n.new-price {\r\n  color: #FC6421;\r\n  font-size: 1.3rem;\r\n  font-weight: 700;\r\n}\r\n\r\n.discount {\r\n  color: #FC6421;\r\n  font-size: 1rem;\r\n}\r\n\r\n.fee-row, .eco-row, .order-total-row {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin: 8px 0;\r\n}\r\n\r\n.eco-icon {\r\n  font-size: 1.2rem;\r\n}\r\n\r\n.order-total {\r\n  font-size: 1.4rem;\r\n  font-weight: 700;\r\n  color: #222;\r\n}\r\n\r\n.tax-note {\r\n  font-size: 0.9rem;\r\n  color: #888;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.input {\r\n  width: 100%;\r\n  padding: 10px 12px;\r\n  border-radius: 8px;\r\n  border: 1px solid #eee;\r\n  margin-bottom: 10px;\r\n  font-size: 1rem;\r\n}\r\n\r\n.pay-btn {\r\n  width: 100%;\r\n  background: #FC6421;\r\n  color: #fff;\r\n  font-size: 1.1rem;\r\n  font-weight: 700;\r\n  border: none;\r\n  border-radius: 10px;\r\n  padding: 14px 0;\r\n  margin: 12px 0;\r\n  cursor: pointer;\r\n  transition: background 0.2s;\r\n  box-shadow: 0 2px 8px rgba(230,0,76,0.08);\r\n}\r\n\r\n.pay-btn:hover {\r\n  background: #c4003c;\r\n}\r\n\r\n.save-note {\r\n  background: #f7f7f7;\r\n  border-radius: 8px;\r\n  padding: 8px 12px;\r\n  font-size: 1rem;\r\n  color: #222;\r\n  margin-top: 8px;\r\n  text-align: center;\r\n}\r\n\r\nhr {\r\n  border: none;\r\n  border-top: 1px solid #eee;\r\n  margin: 12px 0;\r\n}\r\n\r\n.info {\r\n  font-size: 0.9em;\r\n  color: #888;\r\n  cursor: pointer;\r\n  margin-left: 4px;\r\n}\r\n\r\n.pass-action {\r\n  margin-top: auto;\r\n}\r\n\r\n/* Tarih se√ßici stilleri */\r\n.date-input-wrapper {\r\n  position: relative;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.date-input {\r\n  width: 100%;\r\n  padding: 10px 12px;\r\n  border-radius: 8px;\r\n  border: 1px solid #eee;\r\n  font-size: 1rem;\r\n  cursor: pointer;\r\n}\r\n\r\n.calendar-icon {\r\n  position: absolute;\r\n  right: 12px;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  cursor: pointer;\r\n  z-index: 2;\r\n}\r\n\r\n.calendar-icon svg {\r\n  width: 20px;\r\n  height: 20px;\r\n}\r\n\r\n/* Mobil takvim modal stilleri */\r\n.mobile-calendar-modal {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  z-index: 9999;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.calendar-modal-header {\r\n  background: #fff;\r\n  padding: 16px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  border-bottom: 1px solid #eee;\r\n}\r\n\r\n.calendar-modal-header span {\r\n  font-weight: 600;\r\n  font-size: 1.1rem;\r\n}\r\n\r\n.calendar-modal-close {\r\n  background: none;\r\n  border: none;\r\n  font-size: 1.5rem;\r\n  cursor: pointer;\r\n  padding: 0;\r\n  width: 30px;\r\n  height: 30px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.calendar-scroll-container {\r\n  flex: 1;\r\n  background: #fff;\r\n  overflow-y: auto;\r\n}\r\n\r\n.vcalendar-mobile {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n/* Disabled buton stili */\r\n.pay-btn.disabled {\r\n  background: #ccc;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.pay-btn.disabled:hover {\r\n  background: #ccc;\r\n}\r\n\r\n@media (max-width: 900px) {\r\n  .container {\r\n    padding-left: 16px !important;\r\n    padding-right: 16px !important;\r\n  }\r\n  .pass-flex { flex-direction: column; }\r\n  .pass-box { max-width: 100%; min-width: 0; }\r\n  .pass-grid {\r\n    grid-template-columns: 1fr;\r\n    justify-items: center;\r\n    width: 100%;\r\n    max-width: 400px;\r\n    margin: 0 auto;\r\n  }\r\n  .pass-card {\r\n    margin: 0 auto 1.5rem auto;\r\n    width: 100%;\r\n    max-width: 350px;\r\n  }\r\n}\r\n</style> "
        }
    ]
}